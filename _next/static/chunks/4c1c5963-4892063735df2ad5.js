"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[239],{2634:(t,e,r)=>{r.d(e,{Ay:()=>nS});var n=r(3398),i=r(9593),o=r(7385),a=r(419),s=r(20),u=r(2256),l=r(8811),c=r(7660),f=r(2115),p=r(4500),d=r(2719),g=r(8765),h=r(4346),v=function(t,e){return(v=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function m(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}v(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var b=function(){return(b=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function x(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function S(t,e,r){if(r||2==arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}function y(t,e){return b({events:[],props:[],name:t},e)}var E=["n","w","s","e"],D=["n","w","s","e","nw","ne","sw","se"],R=(0,n.Ay)(),C=R.browser.webkit,M=C&&function(){var t="undefined"==typeof window?{userAgent:""}:window.navigator,e=/applewebkit\/([^\s]+)/g.exec(t.userAgent.toLowerCase());return!!e&&605>parseFloat(e[1])}(),z=R.browser.name,O=parseInt(R.browser.version,10),T=R.browser.chromium,w=parseInt(R.browser.chromiumVersion,10)||0,G="chrome"===z&&O>=109||T&&w>=109,P="firefox"===z,B=parseInt(R.browser.webkitVersion,10)>=612||O>=15,k="moveable-",I=D.map(function(t){var e="",r="",n="center",i="center",o="calc(var(--moveable-control-padding, 20) * -1px)";return t.indexOf("n")>-1&&(e="top: ".concat(o,";"),i="bottom"),t.indexOf("s")>-1&&(e="top: 0px;",i="top"),t.indexOf("w")>-1&&(r="left: ".concat(o,";"),n="right"),t.indexOf("e")>-1&&(r="left: 0px;",n="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(r).concat(e,"\n        transform-origin: ").concat(n," ").concat(i,";\n    }")}).join("\n"),_="\n{\nposition: absolute;\nwidth: 1px;\nheight: 1px;\nleft: 0;\ntop: 0;\nz-index: 3000;\n--moveable-color: #4af;\n--zoom: 1;\n--zoompx: 1px;\n--moveable-line-padding: 0;\n--moveable-control-padding: 0;\nwill-change: transform;\noutline: 1px solid transparent;\n}\n.control-box {\nz-index: 0;\n}\n.line, .control {\nposition: absolute;\nleft: 0;\ntop: 0;\nwill-change: transform;\n}\n.control {\nwidth: 14px;\nheight: 14px;\nborder-radius: 50%;\nborder: 2px solid #fff;\nbox-sizing: border-box;\nbackground: #4af;\nbackground: var(--moveable-color);\nmargin-top: -7px;\nmargin-left: -7px;\nborder: 2px solid #fff;\nz-index: 10;\n}\n.around-control {\nposition: absolute;\nwill-change: transform;\nwidth: calc(var(--moveable-control-padding, 20) * 1px);\nheight: calc(var(--moveable-control-padding, 20) * 1px);\nleft: calc(var(--moveable-control-padding, 20) * -0.5px);\ntop: calc(var(--moveable-control-padding, 20) * -0.5px);\nbox-sizing: border-box;\nbackground: transparent;\nz-index: 8;\ncursor: alias;\ntransform-origin: center center;\n}\n".concat(I,"\n.padding {\nposition: absolute;\ntop: 0px;\nleft: 0px;\nwidth: 100px;\nheight: 100px;\ntransform-origin: 0 0;\n}\n.line {\nwidth: 1px;\nheight: 1px;\nbackground: #4af;\nbackground: var(--moveable-color);\ntransform-origin: 0px 50%;\n}\n.line.edge {\nz-index: 1;\nbackground: transparent;\n}\n.line.dashed {\nbox-sizing: border-box;\nbackground: transparent;\n}\n.line.dashed.horizontal {\nborder-top: 1px dashed #4af;\nborder-top-color: #4af;\nborder-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\nborder-left: 1px dashed #4af;\nborder-left-color: #4af;\nborder-left-color: var(--moveable-color);\n}\n.line.vertical {\ntransform: translateX(-50%);\n}\n.line.horizontal {\ntransform: translateY(-50%);\n}\n.line.vertical.bold {\nwidth: 2px;\n}\n.line.horizontal.bold {\nheight: 2px;\n}\n\n.control.origin {\nborder-color: #f55;\nbackground: #fff;\nwidth: 12px;\nheight: 12px;\nmargin-top: -6px;\nmargin-left: -6px;\npointer-events: none;\n}\n").concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){var e,r,n;return'\n.direction[data-rotation="'.concat(t,'"], :global .view-control-rotation').concat(t," {\n").concat((e='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32,'px" height="').concat(32,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(t,'deg);transform-origin: 16px 16px"></path></svg>'),n="ns-resize",135==(r=45*Math.round(t/45)%180)?n="nwse-resize":45===r?n="nesw-resize":90===r&&(n="ew-resize"),"cursor:".concat(n,";cursor: url('").concat(e,"') 16 16, ").concat(n,";")),"\n}\n")}).join("\n"),'\n\n.line.direction:before {\ncontent: "";\nposition: absolute;\nwidth: 100%;\nheight: calc(var(--moveable-line-padding, 0) * 1px);\nbottom: 0;\nleft: 0;\n}\n.group {\nz-index: -1;\n}\n.area {\nposition: absolute;\n}\n.area-pieces {\nposition: absolute;\ntop: 0;\nleft: 0;\ndisplay: none;\n}\n.area.avoid, .area.pass {\npointer-events: none;\n}\n.area.avoid+.area-pieces {\ndisplay: block;\n}\n.area-piece {\nposition: absolute;\n}\n\n').concat(M?':global svg *:before {\ncontent:"";\ntransform-origin: inherit;\n}':"","\n"),F=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],A={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},N={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},q={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Y=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate","waitToChangeTarget","updateSelectors","getTargets","stopDrag","getControlBoxElement","getMoveables","getDragElement"];function W(t,e,r,n,i,o){void 0===o&&(o="draggable");var a,s,u=null!==(s=null===(a=e.gestos[o])||void 0===a?void 0:a.move(r,t.inputEvent))&&void 0!==s?s:{},l=u.originalDatas||u.datas,c=l[o]||(l[o]={});return b(b({},i?rl(e,u):u),{isPinch:!!n,parentEvent:!0,datas:c,originalDatas:t.originalDatas})}var H=function(){function t(t){var e;void 0===t&&(t="draggable"),this.ableName=t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}return t.prototype.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var r=e.originalDatas;return this.datas=r,r[this.ableName]||(r[this.ableName]={}),b(b({},this.move(t,e.inputEvent)),{type:"dragstart"})},t.prototype.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},t.prototype.move=function(t,e){var r,n,i=!1;if(this.isFlag){var o=this.isDrag;r=this.prevX+t[0],n=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0),!o&&this.isDrag&&(i=!0)}else this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],n=t[1],this.isFlag=!0;return this.prevX=r,this.prevY=n,{type:"drag",clientX:r,clientY:n,inputEvent:e,isFirstDrag:i,isDrag:this.isDrag,distX:r-this.startX,distY:n-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function X(t,e,r,n){var i=16===t.length?4:3,o=x(eq(t,r,n,i),4),a=x(o[0],2),s=a[0],u=a[1],l=x(o[1],2),c=l[0],f=l[1],p=x(o[2],2),d=p[0],g=p[1],h=x(o[3],2),v=h[0],m=h[1],b=x(eN(t,e,i),2),S=b[0],y=b[1],E=Math.min(s,c,d,v),D=Math.min(u,f,g,m),R=Math.max(s,c,d,v),C=Math.max(u,f,g,m);return s=s-E||0,c=c-E||0,d=d-E||0,v=v-E||0,u=u-D||0,f=f-D||0,g=g-D||0,m=m-D||0,S=S-E||0,y=y-D||0,{left:E,top:D,right:R,bottom:C,origin:[S,y],pos1:[s,u],pos2:[c,f],pos3:[d,g],pos4:[v,m],direction:rE(t[0]*t[i+1])}}function L(t,e){var r=e.clientX,n=e.clientY,i=e.datas,o=t.state,s=o.moveableClientRect,u=o.rootMatrix,l=o.is3d,c=o.pos1,f=s.left,p=s.top,d=x((0,a.Rd)(ru(u,[r-f,n-p],l?4:3),c),2),g=x($({datas:i,distX:d[0],distY:d[1]}),2);return[g[0],g[1]]}function j(t,e){var r=e.datas,n=t.state,i=n.allMatrix,o=n.beforeMatrix,s=n.is3d,u=n.left,l=n.top,c=n.origin,f=n.offsetMatrix,p=n.targetMatrix,d=n.transformOrigin,g=s?4:3;r.is3d=s,r.matrix=i,r.targetMatrix=p,r.beforeMatrix=o,r.offsetMatrix=f,r.transformOrigin=d,r.inverseMatrix=(0,a.B8)(i,g),r.inverseBeforeMatrix=(0,a.B8)(o,g),r.absoluteOrigin=(0,a.ez)((0,a.tY)([u,l],c),g),r.startDragBeforeDist=(0,a.Di)(r.inverseBeforeMatrix,r.absoluteOrigin,g),r.startDragDist=(0,a.Di)(r.inverseMatrix,r.absoluteOrigin,g)}function V(t,e,r){var n,i,u,l,c,f,p,d,g,h,v,m,b,y,E,D,R,C,M,z,O,T=e.datas,w=e.originalDatas.beforeRenderable,G=T.transformIndex,P=w.nextTransforms,B=P.length,k=w.nextTransformAppendedIndexes,I=-1;-1===G?("translate"===r?I=0:"rotate"===r&&(I=(0,o.SL)(P,function(t){return t.match(/scale\(/g)})),-1===I&&(I=P.length),T.transformIndex=I):I=(0,o.I6)(k,function(t){return t.index===G&&t.functionName===r})?G:G+k.filter(function(t){return t.index<G}).length;var _=(n=P,i=t.state,u=I,c=(0,s.qg)(n,{"x%":function(t){return t/100*i.offsetWidth},"y%":function(t){return t/100*i.offsetHeight}}),f=n.slice(0,u<0?void 0:u),p=n.slice(0,u<0?void 0:u+1),d=n[u]||"",g=u<0?[]:n.slice(u),h=u<0?[]:n.slice(u+1),v=c.slice(0,u<0?void 0:u),m=c.slice(0,u<0?void 0:u+1),b=null!==(l=c[u])&&void 0!==l?l:(0,s.qg)([""])[0],y=u<0?[]:c.slice(u),E=u<0?[]:c.slice(u+1),D=b?[b]:[],R=(0,s.ap)(v),C=(0,s.ap)(m),M=(0,s.ap)(y),z=(0,s.ap)(E),O=(0,a.lw)(R,M,4),{transforms:n,beforeFunctionMatrix:R,beforeFunctionMatrix2:C,targetFunctionMatrix:(0,s.ap)(D),afterFunctionMatrix:M,afterFunctionMatrix2:z,allFunctionMatrix:O,beforeFunctions:v,beforeFunctions2:m,targetFunction:D[0],afterFunctions:y,afterFunctions2:E,beforeFunctionTexts:f,beforeFunctionTexts2:p,targetFunctionText:d,afterFunctionTexts:g,afterFunctionTexts2:h}),F=_.targetFunction,A="rotate"===r?"rotateZ":r;T.beforeFunctionTexts=_.beforeFunctionTexts,T.afterFunctionTexts=_.afterFunctionTexts,T.beforeTransform=_.beforeFunctionMatrix,T.beforeTransform2=_.beforeFunctionMatrix2,T.targetTansform=_.targetFunctionMatrix,T.afterTransform=_.afterFunctionMatrix,T.afterTransform2=_.afterFunctionMatrix2,T.targetAllTransform=_.allFunctionMatrix,F.functionName===A?(T.afterFunctionTexts.splice(0,1),T.isAppendTransform=!1):B>I&&(T.isAppendTransform=!0,w.nextTransformAppendedIndexes=S(S([],x(k),!1),[{functionName:r,index:I,isAppend:!0}],!1))}function U(t,e,r){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?r:e," ").concat(t.afterFunctionTexts.join(" "))}function K(t,e,r){var n=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,s=t.afterTransform2,u=t.targetAllTransform,l=r?(0,a.lw)(u,e,4):(0,a.lw)(e,u,4),c=(0,a.lw)((0,a.B8)(r?o:n,4),l,4);return(0,a.lw)(c,(0,a.B8)(r?s:i,4),4)}function Z(t){var e=t.datas,r=t.distX,n=t.distY,i=e.inverseBeforeMatrix,o=e.is3d,s=e.startDragBeforeDist,u=e.absoluteOrigin;return(0,a.Rd)((0,a.Di)(i,(0,a.tY)(u,[r,n]),o?4:3),s)}function $(t,e){var r=t.datas,n=t.distX,i=t.distY,o=r.inverseBeforeMatrix,s=r.inverseMatrix,u=r.is3d,l=r.startDragBeforeDist,c=r.startDragDist,f=r.absoluteOrigin;return(0,a.Rd)((0,a.Di)(e?o:s,(0,a.tY)(f,[n,i]),u?4:3),e?l:c)}function Q(t){var e=[];return t[1]>=0&&(t[0]>=0&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(t[0]>=0&&e.push(1),t[0]<=0&&e.push(0)),e}function J(t,e){var r=(e+1)/2;return[(0,o.Om)(t[0][0],t[1][0],r,1-r),(0,o.Om)(t[0][1],t[1][1],r,1-r)]}function tt(t,e){var r=J([t[0],t[1]],e[0]),n=J([t[2],t[3]],e[0]);return J([r,n],e[1])}function te(t,e,r,n){return(0,a.lw)(t,eG(e,n,r),n)}function tr(t,e){var r=ta(e);return{setTransform:function(n,i){void 0===i&&(i=-1),r.startTransforms=(0,o.cy)(n)?n:(0,o.Z3)(n),ti(t,e,i)},setTransformIndex:function(r){ti(t,e,r)}}}function tn(t,e,r){var n=ta(e).startTransforms;ti(t,e,(0,o.SL)(n,function(t){return 0===t.indexOf("".concat(r,"("))}))}function ti(t,e,r){var n=ta(e),i=e.datas;if(i.transformIndex=r,-1!==r){var o=n.startTransforms[r];if(o){var a=t.state;i.startValue=(0,s.qg)([o],{"x%":function(t){return t/100*a.offsetWidth},"y%":function(t){return t/100*a.offsetHeight}})[0].functionValue}}}function to(t,e){ta(t).nextTransforms=(0,o.Z3)(e)}function ta(t){return t.originalDatas.beforeRenderable}function ts(t){return t.originalDatas.beforeRenderable.nextTransforms}function tu(t){return(ts(t)||[]).join(" ")}function tl(t){return ta(t).nextStyle}function tc(t,e,r,n,i){to(i,e);var o=en.drag(t,W(i,t.state,r,n,!1)),a=o?o.transform:e;return b(b({transform:e,drag:o},e5({transform:a},i)),{afterTransform:a})}function tf(t,e,r,n,i,u){var l,c,f,p,d,g,h,v,m=function(t,e,r,n){var i,u=t.transformOrigin,l=t.offsetMatrix,c=t.is3d?4:3;if((0,o.Kg)(r)){var f=e.beforeTransform,p=e.afterTransform;i=n?(0,a._C)((0,s.yV)(r),4,c):(0,a._C)((0,a.lw)((0,a.lw)(f,(0,s.yV)([r]),4),p,4),4,c)}else i=r;return te(l,i,u,c)}(t.state,i,e,u);return l=t,c=r,f=n,void 0===(p=m)&&(p=l.state.allMatrix),g=(d=l.state).width,h=d.height,v=d.is3d,eN(p,[g/2*(1+c[0])+f[0],h/2*(1+c[1])+f[1]],v?4:3)}function tp(t,e,r,n,i,o,s){var u=tf(t,e,r,i,o,s),l=t.state,c=l.left,f=l.top,p=t.props.groupable,d=(0,a.Rd)(n,u);return(0,a.Rd)(d,[p?c:0,p?f:0])}function td(t,e,r){for(var n,i,u,l=t,c=[],f=(0,o.ep)(t)||(0,o.uD)(t),p=!r&&t===e||t===f,d=p,g=!1,h=3,v=!1,m=ek(e,e,!0).offsetParent,b=1;l&&!d;){d=p;var S,y=tb(l),E=y("position"),D=eB(l),R="fixed"===E,z=function(t){var e=t("scale"),r=t("rotate"),n=t("translate"),i=[];return n&&"0px"!==n&&"none"!==n&&i.push("translate(".concat(n.split(/\s+/).join(","),")")),r&&"1"!==r&&"none"!==r&&i.push("rotate(".concat(r,")")),e&&"1"!==e&&"none"!==e&&i.push("scale(".concat(e.split(/\s+/).join(","),")")),i}(y),O=(0,a.zs)((S=D)&&"none"!==S?(0,o.Gv)(S)?S:(0,s.yV)(S):[1,0,0,1,0,0]),T=void 0,w=!1,k=!1,I=0,_=0,F=0,A=0,N={hasTransform:!1,fixedContainer:null};R&&(v=!0,m=(N=function(t){for(var e=t.parentElement,r=!1,n=(0,o.uD)(t);e;){var i=re(e).transform;if(i&&"none"!==i){r=!0;break}if(e===n)break;e=e.parentElement}return{fixedContainer:e||n,hasTransform:r}}(l)).fixedContainer);var q=O.length;!g&&(16===q||z.length)&&(g=!0,h=4,e_(c),u&&(u=(0,a._C)(u,3,4))),g&&9===q&&(O=(0,a._C)(O,3,4));var Y=function(t,e){var r,n,i,a=t.tagName.toLowerCase(),s=t.offsetLeft,u=t.offsetTop,l=tb(t),c=(0,o.b0)(s),f=!c;if(!f&&("svg"!==a||t.ownerSVGElement))i=(n=M?eP(re(t,":before").transformOrigin).map(function(e,r){var n,i=(0,o.hg)(e),a=i.value,s=i.unit;return a*(n=0===r,"%"===s?eA(t.ownerSVGElement)[n?"width":"height"]/100:1)}):eP(l("transformOrigin")).map(function(t){return parseFloat(t)})).slice(),f=!0,"svg"===a?(s=0,u=0):(s=(r=x(function(t,e,r){var n=t.tagName.toLowerCase();if(!t.getBBox||!r&&"g"===n)return[0,0,0,0];var i="fill-box"===tb(t)("transform-box"),o=t.getBBox(),a=eA(t.ownerSVGElement),s=o.x,u=o.y;"foreignobject"!==n||s||u||(s=parseFloat(t.getAttribute("x"))||0,u=parseFloat(t.getAttribute("y"))||0);var l=s-a.x,c=u-a.y,f=i?e[0]:e[0]-l,p=i?e[1]:e[1]-c;return[l,c,f,p]}(t,n,t===e&&"g"===e.tagName.toLowerCase()),4))[0],u=r[1],n[0]=r[2],n[1]=r[3]);else i=(n=eP(l("transformOrigin")).map(function(t){return parseFloat(t)})).slice();return{tagName:a,isSVG:c,hasOffset:f,offset:[s||0,u||0],origin:n,targetOrigin:i}}(l,t),W=Y.tagName,H=Y.hasOffset,X=Y.isSVG,L=Y.origin,j=Y.targetOrigin,V=x(Y.offset,2),U=V[0],K=V[1];"svg"===W&&!l.ownerSVGElement&&u&&(c.push({type:"target",target:l,matrix:function(t,e){var r,n=eA(t),i=n.width,o=n.height,s=n.clientWidth,u=n.clientHeight,l=s/i,c=u/o,f=t.preserveAspectRatio.baseVal,p=f.align,d=f.meetOrSlice,g=[0,0],h=[l,c],v=[0,0];if(1!==p){var m=(p-2)%3,b=Math.floor((p-2)/3);g[0]=i*m/2,g[1]=o*b/2;var S=2===d?Math.max(c,l):Math.min(l,c);h[0]=S,h[1]=S,v[0]=(s-i)/2*m,v[1]=(u-o)/2*b}var y=(0,a.kb)(h,e);return r=x(v,2),y[e*(e-1)]=r[0],y[e*(e-1)+1]=r[1],eG(y,e,g)}(l,h)}),c.push({type:"offset",target:l,matrix:(0,a.k8)(h)}));var Z=parseFloat(y("zoom"))||1;if(R)T=N.fixedContainer,w=!0;else{var $=ek(l,e,!1,!0,y),Q=$.offsetZoom;if(T=$.offsetParent,w=$.isEnd,k=$.isStatic,b*=Q,($.isCustomElement||1!==Q)&&k)U-=T.offsetLeft,K-=T.offsetTop;else if((P||G)&&$.parentSlotElement){for(var J=T,tt=0,te=0;J&&function(t){if(t&&t.getRootNode){var e=t.getRootNode();if(11===e.nodeType)return e}}(J);)tt+=J.offsetLeft,te+=J.offsetTop,J=J.offsetParent;U-=tt,K-=te}}if(C&&!B&&H&&!X&&k&&("relative"===E||"static"===E)&&(U-=T.offsetLeft,K-=T.offsetTop,p=p||w),R)H&&N.hasTransform&&(F=T.clientLeft,A=T.clientTop);else if(H&&m!==T&&(I=T.clientLeft,_=T.clientTop),H&&T===f){var tr=eI(l,!1);U+=tr[0],K+=tr[1]}if(c.push({type:"target",target:l,matrix:eG(O,h,L)}),z.length&&(c.push({type:"offset",target:l,matrix:(0,a.k8)(h)}),c.push({type:"target",target:l,matrix:eG((0,s.yV)(z),h,L)})),H){var tn=l===t,ti=tn?0:l.scrollLeft,to=tn?0:l.scrollTop;c.push({type:"offset",target:l,matrix:(0,a.GD)([U-ti+I-F,K-to+_-A],h)})}else c.push({type:"offset",target:l,origin:L});if(1!==Z&&c.push({type:"zoom",target:l,matrix:eG((0,a.kb)([Z,Z],h),h,[0,0])}),u||(u=O),n||(n=L),i||(i=j),d||R)break;l=T,p=w,r&&l!==f||(d=p)}return u||(u=(0,a.k8)(h)),n||(n=[0,0]),i||(i=[0,0]),{zoom:b,offsetContainer:m,matrixes:c,targetMatrix:u,transformOrigin:n,targetOrigin:i,is3d:g,hasFixed:v}}var tg=null,th=null,tv=null;function tm(t){t?(window.Map&&(tg=new Map,th=new Map),tv=[]):(tg=null,tv=null,th=null)}function tb(t){var e=null==tg?void 0:tg.get(t);if(!e){var r=(0,o.zk)(t).getComputedStyle(t);if(!tg)return function(t){return r[t]};e={style:r,cached:{}},tg.set(t,e)}var n=e.cached,i=e.style;return function(t){return t in n||(n[t]=i[t]),n[t]}}function tx(t,e,r){var n=r.originalDatas;n.groupable=n.groupable||{};var i=n.groupable;i.childDatas=i.childDatas||[];var o=i.childDatas;return t.moveables.map(function(t,n){return o[n]=o[n]||{},o[n][e]=o[n][e]||{},b(b({},r),{isRequestChild:!0,datas:o[n][e],originalDatas:o[n]})})}function tS(t,e,r,n,i,o,a){var s=!!r.match(/Start$/g),u=!!r.match(/End$/g),l=i.isPinch,c=i.datas,f=tx(t,e.name,i),p=t.moveables,d=[],g=f.map(function(t,i){var f=p[i],g=f.state,h=g.gestos,v=t;if(s)v=new H(a).dragStart(n,t),d.push(v);else{if(h[a]||(h[a]=c.childGestos[i]),!h[a])return;v=W(t,g,n,l,o,a),d.push(v)}var m=e[r](f,b(b({},v),{parentFlag:!0}));return u&&(h[a]=null),m});return s&&(c.childGestos=p.map(function(t){return t.state.gestos[a]})),{eventParams:g,childEvents:d}}function ty(t,e,r,n,i,o){void 0===i&&(i=function(t,e){return e});var a=!!r.match(/End$/g),s=tx(t,e.name,n),u=t.moveables;return s.map(function(t,n){var s=u[n],l=t;l=i(s,t);var c=e[r](s,b(b({},l),{parentFlag:!0}));return c&&o&&o(s,t,c,n),a&&(s.state.gestos={}),c})}function tE(t,e,r,n){var i=r.fixedDirection,o=r.fixedPosition,s=tt(n.datas.startPositions||e2(e.state),i),u=x((0,a.Di)((0,a.XI)(-t.rotation/180*Math.PI,3),[s[0]-o[0],s[1]-o[1],1],3),2),l=u[0],c=u[1];return n.datas.originalX=l,n.datas.originalY=c,n}function tD(t,e,r,n){var i=t.getState(),a=i.renderPoses,s=i.rotation,u=i.direction,l=ej(t.props,e).zoom,c=eR(s/Math.PI*180),f={},p=t.renderState;p.renderDirectionMap||(p.renderDirectionMap={});var d=p.renderDirectionMap;r.forEach(function(t){f[t.dir]=!0});var g=rE(u);return r.map(function(t){var r=t.data,i=t.classNames,u=t.dir,p=N[u];if(!p||!f[u])return null;d[u]=!0;var h=((0,o.nF)(c,15)+g*q[u]+720)%180,v={};return(0,o.xD)(r).forEach(function(t){v["data-".concat(t)]=r[t]}),n.createElement("div",b({className:eT.apply(void 0,S(["control","direction",u,e],x(i),!1)),"data-rotation":h,"data-direction":u},v,{key:"direction-".concat(u),style:eL.apply(void 0,S([s,l],x(p.map(function(t){return a[t]})),!1))}))})}function tR(t,e,r,n){var i=ej(t.props,r),o=i.renderDirections,a=void 0===o?e:o,s=i.displayAroundControls;if(!a)return[];var u=!0===a?D:a;return S(S([],x(s?tO(t,n,r,u):[]),!1),x(tD(t,r,u.map(function(t){return{data:{},classNames:[],dir:t}}),n)),!1)}function tC(t,e,r,n,i,a){for(var s=[],u=6;u<arguments.length;u++)s[u-6]=arguments[u];var l=(0,o.Mu)(r,n),c=e?(0,o.nF)(l/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line-".concat(a),className:eT.apply(void 0,S(["line","direction",e?"edge":"",e],x(s),!1)),"data-rotation":c,"data-line-key":a,"data-direction":e,style:eX(r,n,i,l)})}function tM(t,e,r,n,i){return(!0===r?E:r).map(function(r,o){var a=x(N[r],2),s=a[0],u=a[1];if(null!=u)return tC(t,r,n[s],n[u],i,"".concat(e,"Edge").concat(o),e)}).filter(Boolean)}function tz(t){return function(e,r){var n=ej(e.props,t).edge;return n&&(!0===n||n.length)?S(S([],x(tM(r,t,n,e.getState().renderPoses,e.props.zoom)),!1),x(tR(e,["nw","ne","sw","se"],t,r)),!1):tR(e,D,t,r)}}function tO(t,e,r,n){var i=t.renderState;i.renderDirectionMap||(i.renderDirectionMap={});var a=t.getState(),s=a.renderPoses,u=a.rotation,l=a.direction,c=i.renderDirectionMap,f=t.props.zoom,p=rE(l),d=u/Math.PI*180;return(n||(0,o.xD)(c)).map(function(t){var n=N[t];if(!n)return null;var i=((0,o.nF)(d,15)+p*q[t]+720)%180,a=["around-control"];return r&&a.push("direction",r),e.createElement("div",{className:eT.apply(void 0,S([],x(a),!1)),"data-rotation":i,"data-direction":t,key:"direction-around-".concat(t),style:eL.apply(void 0,S([u,f],x(n.map(function(t){return s[t]})),!1))})})}function tT(t,e,r){var n=t||{},i=n.position,o=n.left,a=n.top,s=n.right,u=n.bottom,l={position:void 0===i?"client":i,left:void 0===o?-1/0:o,top:void 0===a?-1/0:a,right:void 0===s?1/0:s,bottom:void 0===u?1/0:u};return{vertical:tG(l,e,!0),horizontal:tG(l,r,!1)}}function tw(t,e){var r=t.state,n=r.containerClientRect,i=n.clientHeight,o=n.clientWidth,a=n.clientLeft,s=n.clientTop,u=r.snapOffset,l=u.left,c=u.top,f=u.right,p=u.bottom,d=e||t.props.bounds||{},g="css"===(d.position||"client"),h=d.left,v=d.top,m=d.right,b=void 0===m?g?-1/0:1/0:m,x=d.bottom,S=void 0===x?g?-1/0:1/0:x;return g&&(b=o+f-l-b,S=i+p-c-S),{left:(void 0===h?-1/0:h)+l-a,right:b+l-a,top:(void 0===v?-1/0:v)+c-s,bottom:S+c-s}}function tG(t,e,r){var n=t[r?"left":"top"],i=t[r?"right":"bottom"],o=Math.min.apply(Math,S([],x(e),!1)),a=Math.max.apply(Math,S([],x(e),!1)),s=[];return n+1>o&&s.push({direction:"start",isBound:!0,offset:o-n,pos:n}),i-1<a&&s.push({direction:"end",isBound:!0,offset:a-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort(function(t,e){return rD(e.offset)-rD(t.offset)})}function tP(t,e,r){return(r?t.map(function(t){return(0,a.e$)(t,r)}):t).some(function(t){return t[0]<e.left&&rD(t[0]-e.left)>.1||t[0]>e.right&&rD(t[0]-e.right)>.1||t[1]<e.top&&rD(t[1]-e.top)>.1||t[1]>e.bottom&&rD(t[1]-e.bottom)>.1})}var tB=["left","right","center"],tk=["top","bottom","middle"],tI={left:"start",right:"end",center:"center",top:"start",bottom:"end",middle:"center"},t_={start:"left",end:"right",center:"center"},tF={start:"top",end:"bottom",center:"middle"};function tA(){return{left:!1,top:!1,right:!1,bottom:!1}}function tN(t,e){var r=t.props,n=r.snappable,i=r.bounds,o=r.innerBounds,a=r.verticalGuidelines,s=r.horizontalGuidelines,u=r.snapGridWidth,l=r.snapGridHeight,c=t.state,f=c.guidelines,p=c.enableSnap;return!(!n||!p||e&&!0!==n&&0>n.indexOf(e))&&(!!u||!!l||!!i||!!o||!!f&&!!f.length||!!a&&!!a.length||!!s&&!!s.length||!1)}function tq(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function tY(t,e){var r=function(t,e){var r=tq(t),n={};for(var i in r)i in e&&r[i]&&(n[i]=e[i]);return n}(t,e),n=tk.filter(function(t){return t in r}),i=tB.filter(function(t){return t in r});return{horizontalNames:n,verticalNames:i,horizontal:n.map(function(t){return r[t]}),vertical:i.map(function(t){return r[t]})}}var tW="snapRotationThreshold",tH="snapRotationDegrees",tX="snapHorizontalThreshold",tL="snapVerticalThreshold";function tj(t,e,r,n,i,o,a){void 0===n&&(n=[]),void 0===i&&(i=[]);var s,u=t.props,l=(null===(s=t.state.snapThresholdInfo)||void 0===s?void 0:s.multiples)||[1,1],c=ri(a,u[tX],5),f=ri(o,u[tL],5);return tV(t.state.guidelines,e,r,n,i,c,f,l)}function tV(t,e,r,n,i,o,a,s){return{vertical:t$(t,"vertical",e,a*s[0],n),horizontal:t$(t,"horizontal",r,o*s[1],i)}}function tU(t){var e="";return -1===t||"top"===t||"left"===t?e="start":0===t||"center"===t||"middle"===t?e="center":(1===t||"right"===t||"bottom"===t)&&(e="end"),e}function tK(t,e,r,n){var i=tY(t.props.snapDirections,e),o=tj(t,i.vertical,i.horizontal,i.verticalNames.map(function(t){return tU(t)}),i.horizontalNames.map(function(t){return tU(t)}),r,n),a=tU(i.horizontalNames[o.horizontal.index]),s=tU(i.verticalNames[o.vertical.index]);return{vertical:b(b({},o.vertical),{direction:s}),horizontal:b(b({},o.horizontal),{direction:a})}}function tZ(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],n=r.guidelineInfos[0],i=n.offset,o=n.dist,a=n.guideline;return{isSnap:e,offset:i,dist:o,pos:r.pos,guideline:a}}function t$(t,e,r,n,i){if(void 0===i&&(i=[]),!t||!t.length)return{isSnap:!1,index:-1,direction:"",posInfos:[]};var o,a,s=+("vertical"!==e),u=r.map(function(r,o){var a=i[o]||"",u=t.map(function(t){var e=r-t.pos[s];return{offset:e,dist:rD(e),guideline:t,direction:a}}).filter(function(t){var r=t.guideline,i=t.dist;return r.type===e&&!(i>n)}).sort(function(t,e){return t.dist-e.dist});return{pos:r,index:o,guidelineInfos:u,direction:a}}).filter(function(t){return t.guidelineInfos.length>0}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}),l=u.length>0;return{isSnap:l,index:l?u[0].index:-1,direction:null!==(a=null===(o=u[0])||void 0===o?void 0:o.direction)&&void 0!==a?a:"",posInfos:u}}function tQ(t,e){var r=rD(t.offset),n=rD(e.offset);if(t.isBound&&e.isBound)return n-r;if(t.isBound)return -1;if(e.isBound)return 1;if(t.isSnap&&e.isSnap)return n-r;if(t.isSnap)return -1;else if(e.isSnap)return 1;else if(r<1e-7)return 1;else if(n<1e-7)return -1;return r-n}function tJ(t,e){return t.slice().sort(function(t,r){var n=t.sign[e],i=r.sign[e],o=t.offset[e],a=r.offset[e];return n?i?tQ({isBound:t.isBound,isSnap:t.isSnap,offset:o},{isBound:r.isBound,isSnap:r.isSnap,offset:a}):-1:1})[0]}function t0(t,e){var r=(0,o.G8)([e[0][0],e[1][0]]),n=(0,o.G8)([e[0][1],e[1][1]]);return{vertical:r<=t[0],horizontal:n<=t[1]}}function t1(t,e){var r,n,i=x(e,2),o=i[0],a=i[1],s=a[0]-o[0],u=a[1]-o[1];return 1e-7>rD(s)&&(s=0),1e-7>rD(u)&&(u=0),s?(r=u?u/s*(t[0]-o[0])+o[1]:o[1],n=t[1]):(r=o[0],n=t[0]),r-n}function t2(t,e,r,n){return void 0===n&&(n=1e-7),t.every(function(t){var i=t1(t,e);return i<=0===r||rD(i)<=n})}function t3(t,e,r,n,i){return(void 0===i&&(i=0),n&&e-i<=t||!n&&t<=r+i)?{isBound:!0,offset:n?e-t:r-t}:{isBound:!1,offset:0}}function t4(t,e,r,n,i,o){var a=x(e,2),s=a[0],u=a[1],l=t[0],c=r[0],f=r[1],p=rp(f[1]-c[1]),d=rp(f[0]-c[0]),g=-s/u;if(d){if(!p){if(o&&!u);else{if(s)return t3((c[1]-l[1])/g+l[0],c[0],f[0],n,i);var h=c[1]-l[1],v=rD(h)<=(i||0);return{isBound:v,offset:v?h:0}}}}else if(o&&!s);else{if(u)return t3(g*(c[0]-l[0])+l[1],c[1],f[1],n,i);var h=c[0]-l[0],v=rD(h)<=(i||0);return{isBound:v,offset:v?h:0}}return{isBound:!1,offset:0}}function t5(t,e,r){return e.map(function(e){var n=function(t,e){var r=e.line,n=e.centerSign,i=e.verticalSign,o=e.horizontalSign,a=e.lineConstants,s=t.props.innerBounds;if(!s)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var u=s.left,l=s.top,c=s.width,f=s.height,p=[[u,l],[u,l+f]],d=[[u,l],[u+c,l]],g=[[u+c,l],[u+c,l+f]],h=[[u,l+f],[u+c,l+f]];if(t2([[u,l],[u+c,l],[u,l+f],[u+c,l+f]],r,n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var v=t4(r,a,d,i),m=t4(r,a,h,i),b=t4(r,a,p,o),x=t4(r,a,g,o),S=v.isBound&&m.isBound,y=v.isBound||m.isBound,E=b.isBound&&x.isBound,D=b.isBound||x.isBound,R=rs(v.offset,m.offset),C=rs(b.offset,x.offset),M=[0,0],z=!1,O=!1;return rD(C)<rD(R)?(M=[R,0],z=y,O=S):(M=[0,C],z=D,O=E),{isAllBound:O,isVerticalBound:y,isHorizontalBound:D,isBound:z,offset:M}}(t,e),i=n.isBound,o=n.offset,a=n.isVerticalBound,s=n.isHorizontalBound,u=e.multiple,l=$({datas:r,distX:o[0],distY:o[1]}).map(function(t,e){return t*(u[e]?2/u[e]:0)});return{sign:u,isBound:i,isVerticalBound:a,isHorizontalBound:s,isSnap:!1,offset:l}})}function t8(t,e,r,n){var i,a,s,u=t.state,l=eq(u.allMatrix,100,100,u.is3d?4:3),c=tt(l,[0,0]);return(i=[],a=r[0],s=r[1],a&&s?i.push([[0,2*s],r,[-a,s]],[[2*a,0],r,[a,-s]]):a?(i.push([[2*a,0],[a,1],[a,-1]]),n&&i.push([[0,-1],[a,-1],[-a,-1]],[[0,1],[a,1],[-a,1]])):s?(i.push([[0,2*s],[1,s],[-1,s]]),n&&i.push([[-1,0],[-1,s],[-1,-s]],[[1,0],[1,s],[1,-s]])):i.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),i).map(function(t){var r,n,i,a,s,u,f,p,d=x(t,3),g=d[0],h=d[1],v=d[2],m=[tt(l,h),tt(l,v)],b=(n=(r=x(m,2))[0],a=(i=r[1])[0]-n[0],s=i[1]-n[1],Math.abs(a)<o._4&&(a=0),Math.abs(s)<o._4&&(s=0),u=0,f=0,p=0,a?s?(f=1,p=(u=-s/a)*n[0]-n[1]):(f=1,p=-n[1]):(u=-1,p=n[0]),[u,f,p].map(function(t){return(0,o.nF)(t,o._4)})),S=t0(c,m),y=S.vertical,E=S.horizontal;return{multiple:g,centerSign:0>=t1(c,m),verticalSign:y,horizontalSign:E,lineConstants:b,line:[tt(e,h),tt(e,v)]}})}function t6(t,e,r,n){var i=n?t.map(function(t){return(0,a.e$)(t,n)}):t;return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some(function(t){var n=0>=t1(r,t);return!t2(e,t,n)})}function t7(t,e,r,n,i){var a=function(t,e,r,n){var i=e[0]-t[0],a=e[1]-t[1];if(rD(i)<o._4&&(i=0),rD(a)<o._4&&(a=0),!i)return n?[0,0]:[0,r];if(!a)return n?[r,0]:[0,0];var s=a/i,u=t[1]-s*t[0];if(!n)return[(e[1]+r-u)/s-e[0],r];var l=s*(e[0]+r)+u;return[r,l-e[1]]}(t,e,r,n);if(!a)return{isOutside:!1,offset:[0,0]};var s=(0,o.l$)(t,e),u=(0,o.l$)(a,t),l=(0,o.l$)(a,e),c=x($({datas:i,distX:a[0],distY:a[1]}),2);return{offset:[c[0],c[1]],isOutside:u>s||l>s}}function t9(t,e){return t.isBound?t.offset:e.isSnap?tZ(e).offset:0}function et(t,e,r,n){void 0===n&&(n=r);var i=tT(tw(t),n.vertical,n.horizontal),o=i.horizontal,a=i.vertical,s=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:tj(t,r.vertical,r.horizontal,void 0,void 0,void 0,void 0),u=s.horizontal,l=s.vertical,c=t9(o[0],u),f=t9(a[0],l),p=rD(c),d=rD(f);return{horizontal:{isBound:o[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:o,snap:u},vertical:{isBound:a[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:a,snap:l}}}function ee(t,e,r,n,i,o,a){void 0===a&&(a=[1,1]);var s=tT(e,r,n),u=s.horizontal,l=s.vertical,c=tV(t,r,n,[],[],i,o,a),f=c.horizontal,p=c.vertical,d=t9(u[0],f),g=t9(l[0],p),h=rD(d),v=rD(g);return{horizontal:{isBound:u[0].isBound,isSnap:f.isSnap,snapIndex:f.index,offset:d,dist:h,bounds:u,snap:f},vertical:{isBound:l[0].isBound,isSnap:p.isSnap,snapIndex:p.index,offset:g,dist:v,bounds:l,snap:p}}}function er(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}var en={name:"draggable",props:["draggable","throttleDrag","throttleDragRotate","hideThrottleDragRotateLine","startDragRotate","edgeDraggable"],events:["dragStart","drag","dragEnd","dragGroupStart","dragGroup","dragGroupEnd"],requestStyle:function(){return["left","top","right","bottom"]},requestChildStyle:function(){return["left","top","right","bottom"]},render:function(t,e){var r=t.props,n=r.hideThrottleDragRotateLine,i=r.throttleDragRotate,a=r.zoom,s=t.getState(),u=s.dragInfo,l=s.beforeOrigin;if(n||!i||!u)return[];var c=u.dist;if(!c[0]&&!c[1])return[];var f=eW(c),p=(0,o.Mu)(c,[0,0]);return[e.createElement("div",{className:eT("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(f,"px"),transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) rotate(").concat(p,"rad) scaleY(").concat(a,")")}})]},dragStart:function(t,e){var r=e.datas,n=e.parentEvent,i=e.parentGesto,o=t.state,a=o.gestos,s=o.style;if(a.draggable)return!1;a.draggable=i||t.targetGesto,r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],j(t,e),tn(t,e,"translate"),r.absolutePoses=e2(t.state),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1,r.deltaOffset=[0,0];var u=e6(t,e,b({set:function(t){r.startValue=t}},tr(t,e)));return!1!==(n||rt(t,"onDragStart",u))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(a.draggable=null,r.isPinch=!1),!!r.isDrag&&u},drag:function(t,e){if(!!e){V(t,e,"translate");var r,n,i,s,u,l,c=e.datas,f=e.parentEvent,p=e.parentFlag,d=e.isPinch,g=e.deltaOffset,h=e.useSnap,v=e.isRequest,m=e.isGroup,S=e.parentThrottleDrag,y=e.distX,E=e.distY,D=c.isDrag,R=c.prevDist,C=c.prevBeforeDist,M=c.startValue;if(D){g&&(y+=g[0],E+=g[1]);var z=t.props,O=z.parentMoveable,T=m?0:z.throttleDrag||S||0,w=f?0:z.throttleDragRotate||0,G=0,P=!1,B=!1,k=!1,I=!1;if(!f&&w>0&&(y||E)){var _=z.startDragRotate||0,F=(0,o.nF)(_+180*(0,o.Mu)([0,0],[y,E])/Math.PI,w)-_,A=E*Math.abs(Math.cos((F-90)/180*Math.PI)),N=eW([y*Math.abs(Math.cos(F/180*Math.PI)),A]);y=N*Math.cos(G=F*Math.PI/180),E=N*Math.sin(G)}if(!d&&!f&&!p){var q=x(function(t,e,r,n,i,s){if(!tN(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var u,l,c,f,p,d,g,h,v,m,S,y,E,D,R,C,M,z,O,T,w,G,P,B=e1(s.absolutePoses,[e,r]),k=eY(B),I=k.left,_=k.right,F=k.top,A=k.bottom,N={horizontal:B.map(function(t){return t[1]}),vertical:B.map(function(t){return t[0]})},q=tY(tq(t.props.snapDirections),{left:I,right:_,top:F,bottom:A,center:(I+_)/2,middle:(F+A)/2}),Y=et(t,i,q,N),W=Y.vertical,H=Y.horizontal,X=(u=t,l=B,c=s,C=t8(u,l,[0,0],!1).map(function(t){return b(b({},t),{multiple:t.multiple.map(function(t){return 2*rD(t)})})}),z=tJ(M=t5(u,C,c),0),O=tJ(M,1),T=0,w=0,G=z.isVerticalBound||O.isVerticalBound,P=z.isHorizontalBound||O.isHorizontalBound,(G||P)&&(T=(R=x((d=(f={datas:c,distX:-z.offset[0],distY:-O.offset[1]}).datas,g=f.distX,h=f.distY,d.beforeMatrix,m=d.matrix,S=d.is3d,y=d.startDragBeforeDist,E=d.startDragDist,D=d.absoluteOrigin,(0,a.Rd)((0,a.Di)(m,(0,a.tY)(p?y:E,[g,h]),S?4:3),D)),2))[0],w=R[1]),{vertical:{isBound:G,offset:T},horizontal:{isBound:P,offset:w}}),L=X.vertical,j=X.horizontal,V=W.isSnap,U=H.isSnap,K=W.isBound||L.isBound,Z=H.isBound||j.isBound,$=x(function(t,e,r,n,i){var s=x(e,2),u=s[0],l=s[1],c=x(r,2),f=c[0],p=c[1],d=x(n,2),g=d[0],h=d[1],v=x(i,2),m=v[0],b=v[1],S=-m,y=-b;if(t&&u&&l){S=0,y=0;var E=[];if(f&&p?E.push([0,b],[m,0]):f?E.push([m,0]):p?E.push([0,b]):g&&h?E.push([0,b],[m,0]):g?E.push([m,0]):h&&E.push([0,b]),E.length){E.sort(function(t,e){return eW((0,a.Rd)([u,l],t))-eW((0,a.Rd)([u,l],e))});var D=E[0];if(D[0]&&rD(u)>o._4?y=l*rD(u+(S=-D[0]))/rD(u)-l:D[1]&&rD(l)>o._4&&(S=u*rD(l+(y=-D[1]))/rD(l)-u),t&&p&&f){if(rD(S)>o._4&&rD(S)<rD(m)){var R=rD(m)/rD(S);S*=R,y*=R}else if(rD(y)>o._4&&rD(y)<rD(b)){var R=rD(b)/rD(y);S*=R,y*=R}else S=rs(-m,S),y=rs(-b,y)}}}else S=u||f?-m:0,y=l||p?-b:0;return[S,y]}(n,[e,r],[K,Z],[V,U],[rs(W.offset,L.offset),rs(H.offset,j.offset)]),2);return[{isBound:K,isSnap:V,offset:$[0]},{isBound:Z,isSnap:U,offset:$[1]}]}(t,y,E,w,!h&&v||g,c),2),Y=q[0],W=q[1];P=Y.isSnap,B=Y.isBound,k=W.isSnap,I=W.isBound;var H=Y.offset,X=W.offset;y+=H,E+=X}var L=(0,a.tY)(Z({datas:c,distX:y,distY:E}),M),j=(0,a.tY)((s=(i=x(Z({datas:n=(r={datas:c,distX:y,distY:E}).datas,distX:r.distX,distY:r.distY}),2))[0],u=i[1],l=K(n,(0,a.kN)([s,u],4)),(0,a.Di)(l,(0,a.ez)([0,0,0],4),4)),M);(0,o.cC)(j,1e-7),(0,o.cC)(L,1e-7),w||(P||B||(j[0]=(0,o.nF)(j[0],T),L[0]=(0,o.nF)(L[0],T)),k||I||(j[1]=(0,o.nF)(j[1],T),L[1]=(0,o.nF)(L[1],T)));var $=(0,a.Rd)(L,M),Q=(0,a.Rd)(j,M),J=(0,a.Rd)(Q,R),tt=(0,a.Rd)($,C);c.prevDist=Q,c.prevBeforeDist=$,c.passDelta=J,c.passDist=Q;var te=c.left+$[0],tr=c.top+$[1],tn=c.right-$[0],ti=c.bottom-$[1],ta=U(c,"translate(".concat(j[0],"px, ").concat(j[1],"px)"),"translate(".concat(Q[0],"px, ").concat(Q[1],"px)"));if(to(e,ta),t.state.dragInfo.dist=f?[0,0]:Q,!(!f&&!O&&J.every(function(t){return!t})&&tt.some(function(t){return!t}))){var ts=t.state,tu=ts.width,tl=ts.height,tc=e6(t,e,b({transform:ta,dist:Q,delta:J,translate:j,beforeDist:$,beforeDelta:tt,beforeTranslate:L,left:te,top:tr,right:tn,bottom:ti,width:tu,height:tl,isPinch:d},e5({transform:ta},e)));return f||rt(t,"onDrag",tc),tc}}}},dragAfter:function(t,e){var r=e.datas,n=r.deltaOffset;return(!!n[0]||!!n[1])&&(r.deltaOffset=[0,0],this.drag(t,b(b({},e),{deltaOffset:n})))},dragEnd:function(t,e){var r=e.parentEvent,n=e.datas;if(t.state.dragInfo=null,n.isDrag){n.isDrag=!1;var i=e7(t,e,{});return r||rt(t,"onDragEnd",i),i}},dragGroupStart:function(t,e){var r,n,i=e.datas,o=e.clientX,a=e.clientY,s=this.dragStart(t,e);if(!s)return!1;var u=tS(t,this,"dragStart",[o||0,a||0],e,!1,"draggable"),l=u.childEvents,c=u.eventParams,f=b(b({},s),{targets:t.props.targets,events:c});i.isDrag=!1!==rt(t,"onDragGroupStart",f);var p=null!==(n=null===(r=l[0])||void 0===r?void 0:r.datas.startValue)&&void 0!==n?n:[0,0];return i.throttleOffset=[p[0]%1,p[1]%1],!!i.isDrag&&s},dragGroup:function(t,e){if(e.datas.isDrag){var r=this.drag(t,b(b({},e),{parentThrottleDrag:t.props.throttleDrag})),n=tS(t,this,"drag",e.datas.passDelta,e,!1,"draggable").eventParams;if(r){var i=b({targets:t.props.targets,events:n},r);return rt(t,"onDragGroup",i),i}}},dragGroupEnd:function(t,e){var r=e.isDrag;if(e.datas.isDrag){this.dragEnd(t,e);var n=tS(t,this,"dragEnd",[0,0],e,!1,"draggable").eventParams;return rt(t,"onDragGroupEnd",e7(t,e,{targets:t.props.targets,events:n})),r}},request:function(t){var e={},r=t.getRect(),n=0,i=0,o=!1;return{isControl:!1,requestStart:function(t){return{datas:e,useSnap:o=t.useSnap}},request:function(t){return"x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:n,distY:i,useSnap:o}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:o}}}},unset:function(t){t.state.gestos.draggable=null,t.state.dragInfo=null}};function ei(t,e){return{fixedPosition:tt(t,e),fixedDirection:e,fixedOffset:[0,0]}}function eo(t,e){var r=t.allMatrix,n=t.is3d,i=t.width,o=t.height,a=[i?-1+e[0]/(i/2):0,o?-1+e[1]/(o/2):0];return{fixedPosition:eN(r,e,n?4:3),fixedDirection:a,fixedOffset:[i?0:e[0],o?0:e[1]]}}var ea=rg("resizable"),es={name:"resizable",ableGroup:"size",canPinch:!0,props:["resizable","throttleResize","renderDirections","displayAroundControls","keepRatio","resizeFormat","keepRatioFinally","edge","checkResizableError"],events:["resizeStart","beforeResize","resize","resizeEnd","resizeGroupStart","beforeResizeGroup","resizeGroup","resizeGroupEnd"],render:tz("resizable"),dragControlCondition:ea,viewClassName:rd("resizable"),dragControlStart:function(t,e){var r,n=e.inputEvent,i=e.isPinch,a=e.isGroup,s=e.parentDirection,u=e.parentGesto,l=e.datas,c=e.parentFixedDirection,f=e.parentEvent,p=eJ(s,i,n,l),d=t.state,g=d.target,h=d.width,v=d.height,m=d.gestos;if(!p||!g||m.resizable)return!1;m.resizable=u||t.controlGesto,i||j(t,e),l.datas={},l.direction=p,l.startOffsetWidth=h,l.startOffsetHeight=v,l.prevWidth=0,l.prevHeight=0,l.minSize=[0,0],l.startWidth=d.inlineCSSWidth||d.cssWidth,l.startHeight=d.inlineCSSHeight||d.cssHeight,l.maxSize=[1/0,1/0],a||(l.minSize=[d.minOffsetWidth,d.minOffsetHeight],l.maxSize=[d.maxOffsetWidth,d.maxOffsetHeight]);var b=t.props.transformOrigin||"% %";function S(t){l.ratio=t&&isFinite(t)?t:0}function y(t){var e=ei(l.startPositions,t);l.fixedDirection=e.fixedDirection,l.fixedPosition=e.fixedPosition,l.fixedOffset=e.fixedOffset}function E(e){var r=eo(t.state,e);l.fixedDirection=r.fixedDirection,l.fixedPosition=r.fixedPosition,l.fixedOffset=r.fixedOffset}function D(t){l.minSize=[(0,o.jc)("".concat(t[0]),0)||0,(0,o.jc)("".concat(t[1]),0)||0]}function R(t){var e=[t[0]||1/0,t[1]||1/0];(!(0,o.Et)(e[0])||isFinite(e[0]))&&(e[0]=(0,o.jc)("".concat(e[0]),0)||1/0),(!(0,o.Et)(e[1])||isFinite(e[1]))&&(e[1]=(0,o.jc)("".concat(e[1]),0)||1/0),l.maxSize=e}l.transformOrigin=b&&(0,o.Kg)(b)?b.split(" "):b,l.startOffsetMatrix=d.offsetMatrix,l.startTransformOrigin=d.transformOrigin,l.isWidth=null!==(r=null==e?void 0:e.parentIsWidth)&&void 0!==r?r:!p[0]&&!p[1]||p[0]||!p[1],l.startPositions=e2(t.state),S(h/v),y(c||[-p[0],-p[1]]),l.setFixedDirection=y,l.setFixedPosition=E,l.setMin=D,l.setMax=R;var C=e6(t,e,{direction:p,startRatio:l.ratio,set:function(t){var e=x(t,2),r=e[0],n=e[1];l.startWidth=r,l.startHeight=n},setMin:D,setMax:R,setRatio:S,setFixedDirection:y,setFixedPosition:E,setOrigin:function(t){l.transformOrigin=t},dragStart:en.dragStart(t,new H().dragStart([0,0],e))}),M=f||rt(t,"onResizeStart",C);return l.startFixedDirection=l.fixedDirection,l.startFixedPosition=l.fixedPosition,!1!==M&&(l.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:p}),!!l.isResize&&C},dragControl:function(t,e){var r,n,i,u,l,c,f,p,d,g,h,v,m,S,y,E,D,R,C,M,z,O,T=e.datas,w=e.parentFlag,G=e.isPinch,P=e.parentKeepRatio,B=e.dragClient,k=e.parentDist,I=e.useSnap,_=e.isRequest,F=e.isGroup,A=e.parentEvent,N=e.resolveMatrix,q=T.isResize,Y=T.transformOrigin,H=T.startWidth,X=T.startHeight,L=T.prevWidth,j=T.prevHeight,V=T.minSize,U=T.maxSize,K=T.ratio,Z=T.startOffsetWidth,$=T.startOffsetHeight,Q=T.isWidth;if(q){if(N){var J=t.state.is3d,tr=T.startOffsetMatrix,tn=T.startTransformOrigin,ti=J?4:3,to=(0,s.yV)(ts(e)),ta=Math.sqrt(to.length);ti!==ta&&(to=(0,a._C)(to,ta,ti));var tu=te(tr,to,tn,ti);T.startPositions=eq(tu,Z,$,ti),T.nextTargetMatrix=to,T.nextAllMatrix=tu}var tl=ej(t.props,"resizable"),tc=tl.resizeFormat,tf=tl.throttleResize,tp=void 0===tf?+!w:tf,td=tl.parentMoveable,tg=tl.keepRatioFinally,th=T.direction,tv=th,tm=0,tb=0;th[0]||th[1]||(tv=[1,1]);var tx=K&&(null!=P?P:tl.keepRatio)||!1,tS=x(tB(),2),ty=tS[0],tE=tS[1];A||(T.setFixedDirection(T.fixedDirection),rt(t,"onBeforeResize",e6(t,e,{startFixedDirection:T.startFixedDirection,startFixedPosition:T.startFixedPosition,setFixedDirection:function(t){var e;return T.setFixedDirection(t),ty=(e=x(tB(),2))[0],tE=e[1],[ty,tE]},setFixedPosition:function(t){var e;return T.setFixedPosition(t),ty=(e=x(tB(),2))[0],tE=e[1],[ty,tE]},boundingWidth:ty,boundingHeight:tE,setSize:function(t){var e;ty=(e=x(t,2))[0],tE=e[1]}},!0)));var tD=B;!B&&(tD=!w&&G?tt(e2(t.state),[0,0]):T.fixedPosition);var tR=[0,0];if(G||(tR=function(t,e,r,n,i,o,a){if(!tN(t,"resizable"))return[0,0];var s=a.fixedDirection,u=a.nextAllMatrix,l=t.state,c=l.allMatrix,f=l.is3d;return eD(t,function(t,n){return eE(u||c,e+t,r+n,s,i,f)},e,r,n,i,o,a)}(t,ty,tE,th,tD,!I&&_,T)),k&&(k[0]||(tR[0]=0),k[1]||(tR[1]=0)),tx){tv[0]&&tv[1]&&tR[0]&&tR[1]&&(rD(tR[0])>rD(tR[1])?tR[1]=0:tR[0]=0);var tC=!tR[0]&&!tR[1];tC&&tk(),tv[0]&&!tv[1]||tR[0]&&!tR[1]||tC&&Q?(ty+=tR[0],tE=ty/K):(!tv[0]&&tv[1]||!tR[0]&&tR[1]||tC&&!Q)&&(tE+=tR[1],ty=tE*K)}else ty+=tR[0],tE+=tR[1],ty=Math.max(0,ty),tE=Math.max(0,tE);ty=(O=x((0,o.u0)([ty,tE],V,U,!!tx&&K),2))[0],tE=O[1],tk(),tx&&(F||tg)&&(Q?tE=ty/K:ty=tE*K);var tM=[(tm=ty-Z)-L,(tb=tE-$)-j];T.prevWidth=tm,T.prevHeight=tb;var tz=(r=ty,n=tE,i=tD,u=t.props.groupable,c=(l=t.state).transformOrigin,f=l.offsetMatrix,p=l.is3d,d=l.width,g=l.height,h=l.left,v=l.top,m=T.fixedDirection,S=T.nextTargetMatrix||l.targetMatrix,y=p?4:3,M=tt(eq(C=te(f,S,(E=d,D=g,R=c,(void 0===E&&(E=r),void 0===D&&(D=n),void 0===R&&(R=[0,0]),Y)?Y.map(function(t,e){var i=(0,o.hg)(t),a=i.value,s=i.unit,u=e?D:E,l=e?n:r;return"%"===t||isNaN(a)?l*(u?R[e]/u:0):"%"!==s?a:l*a/100}):R),y),r,n,y),m),z=[i[0]-M[0],i[1]-M[1]],(0,a.Rd)(z,[u?h:0,u?v:0]));if(!(!td&&tM.every(function(t){return!t})&&tz.every(function(t){return!t}))){var tO=en.drag(t,W(e,t.state,tz,!!G,!1,"draggable")),tT=tO.transform,tw=H+tm,tG=X+tb,tP=e6(t,e,b({width:tw,height:tG,offsetWidth:Math.round(ty),offsetHeight:Math.round(tE),startRatio:K,boundingWidth:ty,boundingHeight:tE,direction:th,dist:[tm,tb],delta:tM,isPinch:!!G,drag:tO},e8({style:{width:"".concat(tw,"px"),height:"".concat(tG,"px")},transform:tT},tO,e)));return A||rt(t,"onResize",tP),tP}}function tB(){var t=T.fixedDirection,r=rx(tv,tx,T,e);tm=r.distWidth,tb=r.distHeight;var n=tv[0]-t[0]||tx?Math.max(Z+tm,1e-7):Z,i=tv[1]-t[1]||tx?Math.max($+tb,1e-7):$;return tx&&Z&&$&&(Q?i=n/K:n=i*K),[n,i]}function tk(){var t;tc&&(ty=(t=x(tc([ty,tE]),2))[0],tE=t[1]),ty=(0,o.nF)(ty,tp),tE=(0,o.nF)(tE,tp)}},dragControlAfter:function(t,e){var r=e.datas,n=r.isResize,i=r.startOffsetWidth,o=r.startOffsetHeight,a=r.prevWidth,s=r.prevHeight;if(n&&!1!==t.props.checkResizableError){var u=t.state,l=u.width,c=u.height,f=l-(i+a),p=c-(o+s),d=rD(f)>3,g=rD(p)>3;if(d&&(r.startWidth+=f,r.startOffsetWidth+=f,r.prevWidth+=f),g&&(r.startHeight+=p,r.startOffsetHeight+=p,r.prevHeight+=p),d||g)return this.dragControl(t,e)}},dragControlEnd:function(t,e){var r=e.datas,n=e.parentEvent;if(r.isResize){r.isResize=!1;var i=e7(t,e,{});return n||rt(t,"onResizeEnd",i),i}},dragGroupControlCondition:ea,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,b(b({},e),{isGroup:!0}));if(!n)return!1;var i=tx(t,"resizable",e),o=r.startOffsetWidth,a=r.startOffsetHeight;function s(){var t=r.minSize;i.forEach(function(e){var r=e.datas,n=r.minSize,i=r.startOffsetWidth,s=r.startOffsetHeight,u=o*(i?n[0]/i:0),l=a*(s?n[1]/s:0);t[0]=Math.max(t[0],u),t[1]=Math.max(t[1],l)})}function u(){var t=r.maxSize;i.forEach(function(e){var r=e.datas,n=r.maxSize,i=r.startOffsetWidth,s=r.startOffsetHeight,u=o*(i?n[0]/i:0),l=a*(s?n[1]/s:0);t[0]=Math.min(t[0],u),t[1]=Math.min(t[1],l)})}var l=ty(t,this,"dragControlStart",e,function(e,n){return tE(t,e,r,n)});s(),u();var c=function(e){n.setFixedDirection(e),l.forEach(function(n,o){n.setFixedDirection(e),tE(t,n.moveable,r,i[o])})};r.setFixedDirection=c;var f=b(b({},n),{targets:t.props.targets,events:l.map(function(t){return b(b({},t),{setMin:function(e){t.setMin(e),s()},setMax:function(e){t.setMax(e),u()}})}),setFixedDirection:c,setMin:function(t){n.setMin(t),s()},setMax:function(t){n.setMax(t),u()}});return r.isResize=!1!==rt(t,"onResizeGroupStart",f),!!r.isResize&&n},dragGroupControl:function(t,e){var r=e.datas;if(r.isResize){var n=ej(t.props,"resizable");e9(t,"onBeforeResize",function(r){rt(t,"onBeforeResizeGroup",e6(t,e,b(b({},r),{targets:n.targets}),!0))});var i=this.dragControl(t,b(b({},e),{isGroup:!0}));if(i){var o=i.boundingWidth,s=i.boundingHeight,u=i.dist,l=n.keepRatio,c=[o/(o-u[0]),s/(s-u[1])],f=r.fixedPosition,p=ty(t,this,"dragControl",e,function(e,r){var n=x((0,a.Di)((0,a.XI)(t.rotation/180*Math.PI,3),[r.datas.originalX*c[0],r.datas.originalY*c[1],1],3),2),i=n[0],o=n[1];return b(b({},r),{parentDist:null,parentScale:c,dragClient:(0,a.tY)(f,[i,o]),parentKeepRatio:l})}),d=b({targets:n.targets,events:p},i);return rt(t,"onResizeGroup",d),d}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isResize){this.dragControlEnd(t,e);var n=ty(t,this,"dragControlEnd",e),i=e7(t,e,{targets:t.props.targets,events:n});return rt(t,"onResizeGroupEnd",i),r}},request:function(t){var e={},r=0,n=0,i=!1,o=t.getRect();return{isControl:!0,requestStart:function(t){var r;return i=t.useSnap,{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null===(r=null==t?void 0:t.horizontal)||void 0===r||r,useSnap:i}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-o.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?n=t.offsetHeight-o.offsetHeight:"deltaHeight"in t&&(n+=t.deltaHeight),{datas:e,parentDist:[r,n],parentKeepRatio:t.keepRatio,useSnap:i}},requestEnd:function(){return{datas:e,isDrag:!0,useSnap:i}}}},unset:function(t){t.state.gestos.resizable=null}};function eu(t,e,r,n,i){var s=t.props.groupable,u=t.state,l=u.is3d?4:3,c=e.origin,f=eN(t.state.rootMatrix,(0,a.Rd)([c[0],c[1]],s?[0,0]:[u.left,u.top]),l),p=(0,a.tY)([i.left,i.top],f);e.startAbsoluteOrigin=p,e.prevDeg=(0,o.Mu)(p,[r,n])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=(0,o.l$)(p,[r,n])}function el(t,e,r){var n=r.defaultDeg,i=r.prevDeg,o=i%360,a=Math.floor(i/360);o<0&&(o+=360),o>t&&o>270&&t<90?++a:o<t&&o<90&&t>270&&--a;var s=e*(360*a+t-n);return r.prevDeg=n+s,s}function ec(t,e,r,n){return el((0,o.Mu)(n.startAbsoluteOrigin,[t,e])/Math.PI*180,r,n)}function ef(t,e,r,n,i,s){var u=t.props.throttleRotate,l=r.prevSnapDeg,c=0,f=!1;if(s){var p=function(t,e,r,n){var i,s=t.props,u=null!==(i=s[tW])&&void 0!==i?i:5,l=s[tH];if(tN(t,"rotatable")){var c=e.pos1,f=e.pos2,p=e.pos3,d=e.pos4,g=e.origin,h=r*Math.PI/180,v=[c,f,p,d].map(function(t){return(0,a.Rd)(t,g)}),m=v.map(function(t){return(0,a.e$)(t,h)}),b=S(S([],x(function(t,e,r,n,i){if(!t.props.bounds)return[];var a=i*Math.PI/180,s=tw(t),u=s.left,l=s.top,c=s.right,f=s.bottom,p=u-n[0],d=c-n[0],g=l-n[1],h=f-n[1],v={left:p,top:g,right:d,bottom:h};if(!tP(r,v,0))return[];var m=[];return[[p,0],[d,0],[g,1],[h,1]].forEach(function(t){var n=x(t,2),i=n[0],s=n[1];r.forEach(function(t){var r,n,u=(0,o.Mu)([0,0],t);m.push.apply(m,S([],x([n=Math.sqrt((r=eW(t))*r-i*i)||0,-n].sort(function(e,r){return rD(e-t[+!s])-rD(r-t[+!s])}).map(function(t){return(0,o.Mu)([0,0],s?[t,i]:[i,t])}).map(function(t){return a+t-u}).filter(function(t){return!tP(e,v,t)}).map(function(t){return(0,o.nF)(180*t/Math.PI,1e-7)})),!1))})}),m}(t,v,m,g,r)),!1),x(function(t,e,r,n,i){var a=t.props.innerBounds,s=i*Math.PI/180;if(!a)return[];var u=a.left,l=a.top,c=a.width,f=a.height,p=u-n[0],d=u+c-n[0],g=l-n[1],h=l+f-n[1],v=[[p,g],[d,g],[p,h],[d,h]],m=tt(r,[0,0]);if(!t6(r,v,m,0))return[];var b=[],y=v.map(function(t){return[eW(t),(0,o.Mu)([0,0],t)]});return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach(function(t){var r=(0,o.Mu)([0,0],function(t){var e=x(t,2),r=e[0],n=e[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return[r[0],0];if(!o)return[0,r[1]];var a=o/i,s=-a*r[0]+r[1];return[-s/(a+1/a),s/(a*a+1)]}(t)),n=function(t){var e=x(t,2),r=e[0],n=e[1],i=n[0]-r[0],o=n[1]-r[1];if(!i)return rD(r[0]);if(!o)return rD(r[1]);var a=o/i;return rD((-a*r[0]+r[1])/Math.sqrt(Math.pow(a,2)+1))}(t);b.push.apply(b,S([],x(y.filter(function(t){var e=x(t,1)[0];return e&&n<=e}).map(function(t){var e=x(t,2),i=e[0],o=e[1],a=Math.acos(i?n/i:0);return[s+(o+a)-r,s+(o-a)-r]}).reduce(function(t,e){return t.push.apply(t,S([],x(e),!1)),t},[]).filter(function(t){return!t6(e,v,m,t)}).map(function(t){return(0,o.nF)(180*t/Math.PI,1e-7)})),!1))}),b}(t,v,m,g,r)),!1);b.sort(function(t,e){return rD(t-r)-rD(e-r)});var y=b.length>0;if(y)return{isSnap:y,dist:y?b[0]:r}}if((null==l?void 0:l.length)&&u){var E,D,R,C,M=l.slice().sort(function(t,e){return eC(t,n)-eC(e,n)})[0];if(eC(M,n)<=u)return{isSnap:!0,dist:r+(E=eR(E=M),R=360*(D=Math.floor(n/360))+360-E,C=360*D+E,rD(n-R)<rD(n-C)?R:C)-n}}return{isSnap:!1,dist:r}}(t,e,n,i+n);f=p.isSnap,c=i+p.dist}f||(c=(0,o.nF)(i+n,void 0===u?0:u));var d=c-i;return r.prevSnapDeg=d,[d-l,d,c]}function ep(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var r=e.inputEvent.target;if((0,o.nB)(r,eT("rotation-control"))||t.props.rotateAroundControls&&(0,o.nB)(r,eT("around-control"))||(0,o.nB)(r,eT("control"))&&(0,o.nB)(r,eT("rotatable")))return!0;var n=t.props.rotationTarget;return!!n&&rv(n,!0).some(function(t){return!!t&&(r===t||r.contains(t))})}function ed(t,e){var r,n,i,a,s,u,l,c,f,p;return i=(r=b(b({},t),{classNames:S([eT("line","guideline",t.direction)],x(t.classNames),!1).filter(function(t){return t}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(t){return"".concat((0,o.nF)(t,.1),"px")})})).direction,a=r.classNames,s=r.size,u=r.pos,l=r.zoom,c=r.key,p=(f="horizontal"===i)?"Y":"X",e.createElement("div",{key:c,className:a.join(" "),style:((n={})[f?"width":"height"]="".concat(s),n.transform="translate(".concat(u[0],", ").concat(u[1],") translate").concat(p,"(-50%) scale").concat(p,"(").concat(l,")"),n)})}function eg(t,e,r,n,i,o,a,s){var u=t.props.zoom;return r.map(function(t,r){var l=t.type,c=t.pos,f=[0,0];return f[a]=n,f[+!a]=-i+c,ed({key:"".concat(e,"TargetGuideline").concat(r),classNames:[eT("target","bold",l)],posValue:f,sizeValue:o,zoom:u,direction:e},s)})}function eh(t,e,r,n,i,o){var a=t.props,s=a.zoom,u=a.isDisplayInnerSnapDigit,l="horizontal"===e?t_:tF,c=i[l.start],f=i[l.end];return r.filter(function(t){var e=t.hide,r=t.elementRect;if(e)return!1;if(u&&r){var n=r.rect;if(n[l.start]<=c&&f<=n[l.end])return!1}return!0}).map(function(t,r){var i=t.pos,a=t.size,u=t.element,l=t.className,c=[-n[0]+i[0],-n[1]+i[1]];return ed({key:"".concat(e,"-default-guideline-").concat(r),classNames:u?[eT("bold"),l]:[eT("normal"),l],direction:e,posValue:c,sizeValue:a,zoom:s},o)})}function ev(t,e,r,n,i,o,a,s){var u,l=t.props,c=l.snapDigit,f=l.isDisplaySnapDigit,p=l.snapDistFormat,d=l.zoom,g="horizontal"===e?"X":"Y",h="vertical"===e?"height":"width",v=Math.abs(i),m=void 0===f||f?parseFloat(v.toFixed(void 0===c?0:c)):0;return s.createElement("div",{key:"".concat(e,"-").concat(r,"-guideline-").concat(n),className:eT("guideline-group",e),style:((u={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")})[h]="".concat(v,"px"),u)},ed({direction:e,classNames:[eT(r),a],size:"100%",posValue:[0,0],sizeValue:v,zoom:d},s),s.createElement("div",{className:eT("size-value","gap"),style:{transform:"translate".concat(g,"(-50%) scale(").concat(d,")")}},m>0?(void 0===p?function(t,e){return t}:p)(m,e):""))}function em(t){var e,r,n,i,a,s,l,c,f,p,d,g,h=t.state,v=h.containerClientRect,m=h.hasFixed,y=v.overflow,E=v.scrollHeight,D=v.scrollWidth,R=v.clientHeight,C=v.clientWidth,M=v.clientLeft,z=v.clientTop,O=t.props,T=O.snapGap,w=O.verticalGuidelines,G=O.horizontalGuidelines,P=O.snapThreshold,B=void 0===P?5:P,k=O.maxSnapElementGuidelineDistance,I=void 0===k?1/0:k,_=O.isDisplayGridGuidelines,F=eY(e2(t.state)),A=F.top,N=F.left,q=F.bottom,Y=F.right,W={top:A,left:N,bottom:q,right:Y,center:(N+Y)/2,middle:(A+q)/2},H=S([],x(function(t){var e=t.state,r=t.props.elementGuidelines,n=void 0===r?[]:r;if(!n.length)return e.elementRects=[],[];var i=(e.elementRects||[]).filter(function(t){return!t.refresh}),a=n.map(function(t){return(0,o.Gv)(t)&&"element"in t?b(b({},t),{element:rh(t.element,!0)}):{element:rh(t,!0)}}).filter(function(t){return t.element}),s=(0,u.U)(i.map(function(t){return t.element}),a.map(function(t){return t.element})),l=s.maintained,c=s.added,f=[];l.forEach(function(t){var e=x(t,2),r=e[0];f[e[1]]=i[r]}),(function(t,e){if(!e.length)return[];var r,n=t.props.groupable,i=t.state,o=i.containerClientRect,a=i.rootMatrix,s=i.is3d,u=i.offsetDelta,l=s?4:3,c=x((r=eN(a,[o.clientLeft,o.clientTop],l),[o.left+r[0],o.top+r[1]]),2),f=c[0],p=c[1],d=n?0:u[0],g=n?0:u[1];return e.map(function(t){var e=t.element.getBoundingClientRect(),r=e.left-f-d,n=e.top-p-g,i=n+e.height,o=r+e.width,s=x(ru(a,[r,n],l),2),u=s[0],c=s[1],h=x(ru(a,[o,i],l),2),v=h[0],m=h[1];return b(b({},t),{rect:{left:u,right:v,top:c,bottom:m,center:(u+v)/2,middle:(c+m)/2}})})})(t,c.map(function(t){return a[t]})).map(function(t,e){f[c[e]]=t}),e.elementRects=f;var p=tq(t.props.elementSnapDirections),d=[];return f.forEach(function(t){var e=t.element,r=t.top,n=void 0===r?p.top:r,i=t.left,a=void 0===i?p.left:i,s=t.right,u=void 0===s?p.right:s,l=t.bottom,c=void 0===l?p.bottom:l,f=t.center,g=void 0===f?p.center:f,h=t.middle,v=void 0===h?p.middle:h,m=t.className,b=t.rect,x=tY({top:n,right:u,left:a,bottom:c,center:g,middle:v},b),S=x.horizontal,y=x.vertical,E=x.horizontalNames,D=x.verticalNames,R=b.top,C=b.left,M=b.right-C,z=b.bottom-R,O=[M,z];y.forEach(function(r,n){d.push({type:"vertical",element:e,pos:[(0,o.nF)(r,.1),R],size:z,sizes:O,className:m,elementRect:t,elementDirection:tI[D[n]]||D[n],direction:""})}),S.forEach(function(r,n){d.push({type:"horizontal",element:e,pos:[C,(0,o.nF)(r,.1)],size:M,sizes:O,className:m,elementRect:t,elementDirection:tI[E[n]]||E[n],direction:""})})}),d}(t)),!1),X=(null!==(g=null===(d=h.snapThresholdInfo)||void 0===d?void 0:d.multiples)&&void 0!==g?g:[1,1]).map(function(t){return t*B});(void 0===T||T)&&H.push.apply(H,S([],x((e=t,r=W,n=X,s=void 0===(a=(i=e.props).maxSnapElementGuidelineDistance)?1/0:a,c=void 0===(l=i.maxSnapElementGapDistance)?1/0:l,f=e.state.elementRects,p=[],[["vertical",t_,tF],["horizontal",tF,t_]].forEach(function(t){var e=x(t,3),i=e[0],o=e[1],a=e[2],u=r[o.start],l=r[o.end],d=r[o.center],g=r[a.start],h=r[a.end],v={left:n[0],top:n[1]};function m(t){var e=t.rect,r=v[o.start];return e[o.end]<u+r?u-e[o.end]:l-r<e[o.start]?e[o.start]-l:-1}var b=f.filter(function(t){var e=t.rect;return!(e[a.start]>h)&&!(e[a.end]<g)&&m(t)>0}).sort(function(t,e){return m(t)-m(e)}),S=[];b.forEach(function(t){b.forEach(function(e){if(t!==e){var r=t.rect,n=e.rect,i=r[a.start],o=r[a.end],s=n[a.start];!(i>n[a.end])&&!(s>o)&&S.push([t,e])}})}),S.forEach(function(t){var e=x(t,2),n=e[0],a=e[1],f=n.rect,g=a.rect,h=f[o.start],m=f[o.end],b=g[o.start],S=g[o.end],y=v[o.start],E=0,D=0,R=!1,C=!1,M=!1;if(m<=u&&l<=b){if(C=!0,E=(b-m-(l-u))/2,rD((D=m+E+(l-u)/2)-d)>y)return}else if(m<b&&S<u+y){if(R=!0,rD((D=S+(E=b-m))-u)>y)return}else if(!(m<b)||!(l-y<h))return;else if(M=!0,rD((D=h-(E=b-m))-l)>y)return;E&&eb(r,g,i,s)&&!(E>c)&&p.push({type:i,pos:"vertical"===i?[D,0]:[0,D],element:a.element,size:0,className:a.className,isStart:R,isCenter:C,isEnd:M,gap:E,hide:!0,gapRects:[n,a],direction:"",elementDirection:""})})}),p)),!1));var L=b({},h.snapOffset||{left:0,top:0,bottom:0,right:0});if(H.push.apply(H,S([],x(function(t,e,r,n,i,a,s){void 0===n&&(n=0),void 0===i&&(i=0);var u=t.props,l=t.state,c=u.snapGridWidth,f=void 0===c?0:c,p=u.snapGridHeight,d=void 0===p?0:p,g=[],h=a.left,v=a.top,m=[0,0];!function(t,e,r,n){var i,a,s=t.props,u=t.state,l=s.snapGridAll,c=s.snapGridWidth,f=void 0===c?0:c,p=s.snapGridHeight,d=void 0===p?0:p,g=u.snapRenderInfo,h=g&&((null===(i=g.direction)||void 0===i?void 0:i[0])||(null===(a=g.direction)||void 0===a?void 0:a[1])),v=t.moveables;if(l&&v&&h&&(f||d)){if(u.snapThresholdInfo)return;u.snapThresholdInfo={multiples:[1,1],offset:[0,0]};var m=t.getRect(),b=m.children,x=g.direction;if(b){var S=x.map(function(t,i){var a=0===i?{snapSize:f,posName:"left",sizeName:"width",clientOffset:n.left-e}:{snapSize:d,posName:"top",sizeName:"height",clientOffset:n.top-r},s=a.snapSize,u=a.posName,l=a.sizeName,c=a.clientOffset;if(!s)return{dir:t,multiple:1,snapSize:s,snapOffset:0};var p=m[l],g=m[u],h=(0,o.Ct)(b.map(function(t){return[t[u]-g,t[l],p-t[l]-t[u]+g]})).filter(function(t){return t}).sort(function(t,e){return t-e}),v=h[0],x=h.map(function(t){return(0,o.nF)(t/v,.1)*s}),S=1,y=(0,o.nF)(p/v,.1);for(S=1;S<=10&&!x.every(function(t){return t*S%1==0});++S);var E=(-t+1)/2,D=(0,o.Om)(g-c,g-c+p,E,1-E);return{multiple:y*S,dir:t,snapSize:s,snapOffset:Math.round(D/s)}}),y=S.map(function(t){return t.multiple||1});u.snapThresholdInfo.multiples=y,u.snapThresholdInfo.offset=S.map(function(t){return t.snapOffset}),S.forEach(function(t,e){t.snapSize})}}else u.snapThresholdInfo=null}(t,n,i,a);var b=l.snapThresholdInfo,x=f,S=d;if(b&&(f*=b.multiples[0]||1,d*=b.multiples[1]||1,m=b.offset),d){for(var y=function(t){g.push({type:"horizontal",pos:[h,(0,o.nF)(m[1]*S+t-i+v,.1)],className:eT("grid-guideline"),size:e,hide:!s,direction:"",grid:!0})},E=0;E<=2*r;E+=d)y(E);for(var E=-d;E>=-r;E-=d)y(E)}if(f){for(var y=function(t){g.push({type:"vertical",pos:[(0,o.nF)(m[0]*x+t-n+h,.1),v],className:eT("grid-guideline"),size:r,hide:!s,direction:"",grid:!0})},E=0;E<=2*e;E+=f)y(E);for(var E=-f;E>=-e;E-=f)y(E)}return g}(t,y?D:C,y?E:R,M,z,L,_)),!1)),m){var j=v.left,V=v.top;L.left+=j,L.top+=V,L.right+=j,L.bottom+=V}return H.push.apply(H,S([],x(eS(G||!1,w||!1,y?D:C,y?E:R,M,z,L)),!1)),H=H.filter(function(t){var e=t.element,r=t.elementRect,n=t.type;return!e||!r||eb(W,r.rect,n,I)})}function eb(t,e,r,n){return"horizontal"===r?rD(t.right-e.left)<=n||rD(t.left-e.right)<=n||t.left<=e.right&&e.left<=t.right:"vertical"!==r||rD(t.bottom-e.top)<=n||rD(t.top-e.bottom)<=n||t.top<=e.bottom&&e.top<=t.bottom}function ex(t,e){return t?t.map(function(t){var r=(0,o.Gv)(t)?t:{pos:t},n=r.pos;return(0,o.Et)(n)?r:b(b({},r),{pos:(0,o.jc)(n,e)})}):[]}function eS(t,e,r,n,i,a,s){void 0===i&&(i=0),void 0===a&&(a=0),void 0===s&&(s={left:0,top:0,right:0,bottom:0});var u=[],l=s.left,c=s.top,f=s.bottom,p=r+s.right-l,d=n+f-c;return ex(t,d).forEach(function(t){u.push({type:"horizontal",pos:[l,(0,o.nF)(t.pos-a+c,.1)],size:p,className:t.className,direction:""})}),ex(e,p).forEach(function(t){u.push({type:"vertical",pos:[(0,o.nF)(t.pos-i+l,.1),c],size:d,className:t.className,direction:""})}),u}function ey(t){var e=t.state,r=e.container,n=t.props.snapContainer||r;if(e.snapContainer===n&&e.guidelines&&e.guidelines.length)return!1;var i=e.containerClientRect,a={left:0,top:0,bottom:0,right:0};if(r!==n){var s=rh(n,!0);if(s){var u=eQ(s),l=rm(e,[u.left-i.left,u.top-i.top]),c=rm(e,[u.right-i.right,u.bottom-i.bottom]);a.left=(0,o.nF)(l[0],1e-5),a.top=(0,o.nF)(l[1],1e-5),a.right=(0,o.nF)(c[0],1e-5),a.bottom=(0,o.nF)(c[1],1e-5)}}return e.snapContainer=n,e.snapOffset=a,e.guidelines=em(t),e.enableSnap=!0,!0}function eE(t,e,r,n,i,o){var s=eq(t,e,r,o?4:3),u=tt(s,n);return e1(s,(0,a.Rd)(i,u))}function eD(t,e,r,n,i,s,u,l){for(var c=e2(t.state),f=t.props.keepRatio,p=0,d=0,g=0;g<2;++g){var h=function(t,e,r,n,i,s){var u=function(t,e,r){var n=[];if(r)1!==rD(e[0])||1!==rD(e[1])?n.push([e,[-1,-1]],[e,[-1,1]],[e,[1,-1]],[e,[1,1]]):n.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n.push([e,t]);else if(t[0]&&t[1]||!t[0]&&!t[1]){var i=t[0]?t:[1,1];[1,-1].forEach(function(t){[1,-1].forEach(function(r){var o=[t*i[0],r*i[1]];(e[0]!==o[0]||e[1]!==o[1])&&n.push([e,o])})})}else if(t[0]){var o=1===rD(e[0])?[1]:[1,-1];o.forEach(function(r){n.push([[e[0],-1],[r*t[0],-1]],[[e[0],0],[r*t[0],0]],[[e[0],1],[r*t[0],1]])})}else if(t[1]){var o=1===rD(e[1])?[1]:[1,-1];o.forEach(function(r){n.push([[-1,e[1]],[-1,r*t[1]]],[[0,e[1]],[0,r*t[1]]],[[1,e[1]],[1,r*t[1]]])})}return n}(r,s.fixedDirection,n),l=t8(t,e,r,n),c=S(S([],x(u.map(function(r){var u,l,c,f,p,d,g,h,v,m,b,S,y=x(r,2),E=y[0],D=y[1],R=tt(e,E),C=tt(e,D),M=n?function(t,e,r,n){var i=function(t,e,r){var n=tw(t),i=n.left,o=n.top,s=n.right,u=n.bottom,l=x(r,2),c=l[0],f=l[1],p=x((0,a.Rd)(r,e),2),d=p[0],g=p[1];1e-7>rD(d)&&(d=0),1e-7>rD(g)&&(g=0);var h=g>0,v=d>0,m={isBound:!1,offset:0,pos:0},b={isBound:!1,offset:0,pos:0};if(0===d&&0===g);else if(0===d)h?u<f&&(b.pos=u,b.offset=f-u):o>f&&(b.pos=o,b.offset=f-o);else if(0===g)v?s<c&&(m.pos=s,m.offset=c-s):i>c&&(m.pos=i,m.offset=c-i);else{var S=g/d,y=r[1]-S*c,E=0,D=0,R=!1;v&&s<=c?(E=S*s+y,D=s,R=!0):!v&&c<=i&&(E=S*i+y,D=i,R=!0),R&&(E<o||E>u)&&(R=!1),R||(h&&u<=f?(D=((E=u)-y)/S,R=!0):h||!(f<=o)||(D=((E=o)-y)/S,R=!0)),R&&(m.isBound=!0,m.pos=D,m.offset=c-D,b.isBound=!0,b.pos=E,b.offset=f-E)}return{vertical:m,horizontal:b}}(t,e,r),o=i.horizontal,s=i.vertical,u=n?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,r){var n=x(r,2),i=n[0],o=n[1],s=x(e,2),u=s[0],l=s[1],c=x((0,a.Rd)(r,e),2),f=c[0],p=c[1],d=p>0,g=f>0;f=rp(f),p=rp(p);var h={isSnap:!1,offset:0,pos:0},v={isSnap:!1,offset:0,pos:0};if(0===f&&0===p)return{vertical:h,horizontal:v};var m=tj(t,f?[i]:[],p?[o]:[],[],[],void 0,void 0),b=m.vertical,S=m.horizontal;b.posInfos.filter(function(t){var e=t.pos;return g?e>=u:e<=u}),S.posInfos.filter(function(t){var e=t.pos;return d?e>=l:e<=l}),b.isSnap=b.posInfos.length>0,S.isSnap=S.posInfos.length>0;var y=tZ(b),E=y.isSnap,D=y.guideline,R=tZ(S),C=R.isSnap,M=R.guideline,z=C?M.pos[1]:0,O=E?D.pos[0]:0;if(0===f)C&&(v.isSnap=!0,v.pos=M.pos[1],v.offset=o-v.pos);else if(0===p)E&&(h.isSnap=!0,h.pos=O,h.offset=i-O);else{var T=p/f,w=r[1]-T*i,G=0,P=0,B=!1;E?(G=T*(P=O)+w,B=!0):C&&(P=((G=z)-w)/T,B=!0),B&&(h.isSnap=!0,h.pos=P,h.offset=i-P,v.isSnap=!0,v.pos=G,v.offset=o-G)}return{vertical:h,horizontal:v}}(t,e,r),l=u.horizontal,c=u.vertical,f=er(o,l),p=er(s,c),d=rD(f),g=rD(p);return{horizontal:{isBound:o.isBound,isSnap:l.isSnap,offset:f,dist:d},vertical:{isBound:s.isBound,isSnap:c.isSnap,offset:p,dist:g}}}(t,R,C,i):et(t,i,{vertical:[C[0]],horizontal:[C[1]]}),z=M.horizontal,O=z.offset,T=z.isBound,w=z.isSnap,G=M.vertical,P=G.offset,B=G.isBound,k=G.isSnap,I=(0,a.Rd)(D,E);if(!P&&!O)return{isBound:B||T,isSnap:k||w,sign:I,offset:[0,0]};var _=(u=(0,o.Mu)(R,C)/Math.PI*180,c=(l=M.vertical).isBound,f=l.isSnap,p=l.dist,g=(d=M.horizontal).isBound,h=d.isSnap,v=d.dist,b=(m=u%180)<3||m>177,S=m>87&&m<93,v<p&&(c||f&&!S&&(!n||!b))?"vertical":!g&&(!h||b||n&&S)?"":"horizontal");if(!_)return{sign:I,isBound:!1,isSnap:!1,offset:[0,0]};var F="vertical"===_,A=[0,0];return A=(A=n||1!==rD(D[0])||1!==rD(D[1])||E[0]===D[0]||E[1]===D[1]?t7(R,C,-(F?P:O),F,s).offset:$({datas:s,distX:-P,distY:-O})).map(function(t,e){return t*(I[e]?2/I[e]:0)}),{sign:I,isBound:F?B:T,isSnap:F?k:w,offset:A}})),!1),x(t5(t,l,s)),!1),f=tJ(c,0),p=tJ(c,1);return{width:{isBound:f.isBound,offset:f.offset[0]},height:{isBound:p.isBound,offset:p.offset[1]}}}(t,e(p,d),i,f,u,l),v=h.width,m=h.height,b=v.isBound,y=m.isBound,E=v.offset,D=m.offset;if(1!==g||(b||(E=0),y||(D=0)),0===g&&u&&!b&&!y)return[0,0];if(f){var R=rD(E)*(r?1/r:1),C=rD(D)*(n?1/n:1);(b&&y?R<C:y||!b&&R<C)?E=r*D/n:D=n*E/r}p+=E,d+=D}if(!f&&i[0]&&i[1]){var M=function(t,e,r,n,i){var a=[-r[0],-r[1]],s=t.state,u=s.width,l=s.height,c=t.props.bounds,f=1/0,p=1/0;if(c){var d=[[r[0],-r[1]],[-r[0],r[1]]],g=c.left,h=void 0===g?-1/0:g,v=c.top,m=void 0===v?-1/0:v,b=c.right,S=void 0===b?1/0:b,y=c.bottom,E=void 0===y?1/0:y;d.forEach(function(t){var r=t[0]!==a[0],s=t[1]!==a[1],c=tt(e,t),d=360*(0,o.Mu)(n,c)/Math.PI;if(s){var g=c.slice();(2>rD(d-360)||2>rD(d-180))&&(g[1]=n[1]);var v=t7(n,g,(n[1]<c[1]?E:m)-c[1],!1,i),b=x(v.offset,2)[1],y=v.isOutside;isNaN(b)||(p=l+(y?1:-1)*rD(b))}if(r){var g=c.slice();(2>rD(d-90)||2>rD(d-270))&&(g[0]=n[0]);var D=t7(n,g,(n[0]<c[0]?S:h)-c[0],!0,i),R=x(D.offset,1)[0],C=D.isOutside;isNaN(R)||(f=u+(C?1:-1)*rD(R))}})}return{maxWidth:f,maxHeight:p}}(t,c,i,s,l),z=M.maxWidth,O=M.maxHeight,T=x(function(t,e,r,n,i,a,s,u,l){var c=tt(e,s),f=et(t,u,{vertical:[c[0]],horizontal:[c[1]]}),p=f.horizontal.offset,d=f.vertical.offset;if((0,o.nF)(d,1e-4)||(0,o.nF)(p,1e-4)){var g=x($({datas:l,distX:-d,distY:-p}),2),h=g[0],v=g[1];return[Math.min(i||1/0,r+s[0]*h)-r,Math.min(a||1/0,n+s[1]*v)-n]}return[0,0]}(t,e(p,d).map(function(t){return t.map(function(t){return(0,o.nF)(t,1e-4)})}),r+p,n+d,z,O,i,u,l),2),E=T[0],D=T[1];p+=E,d+=D}return[p,d]}function eR(t){return t<0&&(t=t%360+360),t%=360}function eC(t,e){t=eR(t),e=eR(e);var r=eR(t-e);return Math.min(r,360-r)}function eM(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(r){var n=r.guideline;!(0,o.I6)(e,function(t){return t.guideline===n})&&(n.direction="",e.push({guideline:n,posInfo:t}))})}),e.map(function(t){var e=t.guideline,r=t.posInfo;return b(b({},e),{direction:r.direction})})}function ez(t,e,r,n,i,a){var s=tT(tw(t,a),e,r),u=s.vertical,l=s.horizontal,c=tA();u.forEach(function(t){t.isBound&&("start"===t.direction&&(c.left=!0),"end"===t.direction&&(c.right=!0),n.push({type:"bounds",pos:t.pos}))}),l.forEach(function(t){t.isBound&&("start"===t.direction&&(c.top=!0),"end"===t.direction&&(c.bottom=!0),i.push({type:"bounds",pos:t.pos}))});var f=function(t){var e=t.props.innerBounds,r=tA();if(!e)return{boundMap:r,vertical:[],horizontal:[]};var n=t.getRect(),i=[n.pos1,n.pos2,n.pos3,n.pos4],o=tt(i,[0,0]),a=e.left,s=e.top,u=e.width,l=e.height,c=[[a,s],[a,s+l]],f=[[a,s],[a+u,s]],p=[[a+u,s],[a+u,s+l]],d=[[a,s+l],[a+u,s+l]],g=t8(t,i,[0,0],!1),h=[],v=[];return g.forEach(function(t){var e=t.line,n=t.lineConstants,i=t0(o,e),g=i.horizontal,m=i.vertical,b=t4(e,n,f,m,1,!0),x=t4(e,n,d,m,1,!0),S=t4(e,n,c,g,1,!0),y=t4(e,n,p,g,1,!0);b.isBound&&!r.top&&(h.push(s),r.top=!0),x.isBound&&!r.bottom&&(h.push(s+l),r.bottom=!0),S.isBound&&!r.left&&(v.push(a),r.left=!0),y.isBound&&!r.right&&(v.push(a+u),r.right=!0)}),{boundMap:r,horizontal:h,vertical:v}}(t),p=f.boundMap,d=f.vertical,g=f.horizontal;return d.forEach(function(t){!((0,o.SL)(n,function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t})>=0)&&n.push({type:"bounds",pos:t})}),g.forEach(function(t){!((0,o.SL)(i,function(e){var r=e.type,n=e.pos;return"bounds"===r&&n===t})>=0)&&i.push({type:"bounds",pos:t})}),{boundMap:c,innerBoundMap:p}}var eO=rg("",["resizable","scalable"]);function eT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.T6.apply(void 0,S([k],x(t),!1))}function ew(t){t()}function eG(t,e,r){return(0,a.B4)(e,(0,a.GD)(r,e),t,(0,a.GD)(r.map(function(t){return-t}),e))}function eP(t){return t?t.split(" "):["0","0"]}function eB(t){var e=tb(t)("transform");if(e&&"none"!==e)return e;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var n=r.length;if(!n)return"";for(var i=[],o=0;o<n;++o)!function(t){var e=r[t].matrix;i.push("matrix(".concat(["a","b","c","d","e","f"].map(function(t){return e[t]}).join(", "),")"))}(o);return i.join(" ")}return""}function ek(t,e,r,n,i){var a,s,u,l,c=(0,o.ep)(t)||(0,o.uD)(t),f=!1;if(!t||r)u=t;else{var p=null===(a=null==t?void 0:t.assignedSlot)||void 0===a?void 0:a.parentElement,d=t.parentElement;p?(f=!0,l=d,u=p):u=d}for(var g=!1,h=t===e||u===e,v="relative",m=1,b=parseFloat(null==i?void 0:i("zoom"))||1,x=null==i?void 0:i("position");u&&u!==c;){e===u&&(h=!0);var S=tb(u),y=u.tagName.toLowerCase(),E=eB(u),D=S("willChange"),R=parseFloat(S("zoom"))||1;if(v=S("position"),n&&1!==R){m=R;break}if(!r&&n&&1!==b&&x&&"absolute"!==x||"svg"===y||"foreignobject"===y||"static"!==v||E&&"none"!==E||"transform"===D)break;var C=null===(s=null==t?void 0:t.assignedSlot)||void 0===s?void 0:s.parentNode,M=u.parentNode;if(C&&(f=!0,l=M),M&&11===M.nodeType){u=M.host,g=!0,v=tb(u)("position");break}u=M,v="relative"}return{offsetZoom:m,hasSlot:f,parentSlotElement:l,isCustomElement:g,isStatic:"static"===v,isEnd:h||!u||u===c,offsetParent:u||c}}function eI(t,e){var r=tb(t),n=tb((0,o.uD)(t)),i=n("position");if(!e&&(!i||"static"===i))return[0,0];var a=parseInt(n("marginLeft"),10),s=parseInt(n("marginTop"),10);return"absolute"===r("position")&&(("auto"!==r("top")||"auto"!==r("bottom"))&&(s=0),("auto"!==r("left")||"auto"!==r("right"))&&(a=0)),[a,s]}function e_(t){t.forEach(function(t){var e=t.matrix;e&&(t.matrix=(0,a._C)(e,3,4))})}function eF(t,e){return void 0===e&&(e=t.length>9),"".concat(e?"matrix3d":"matrix","(").concat((0,a.ZB)(t,!e).join(","),")")}function eA(t){var e=t.clientWidth,r=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:r};var n=t.viewBox,i=n&&n.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||e,height:i.height||r,clientWidth:e,clientHeight:r}}function eN(t,e,r){return(0,a.Di)(t,(0,a.ez)(e,r),r)}function eq(t,e,r,n){return[[0,0],[e,0],[0,r],[e,r]].map(function(e){return eN(t,e,n)})}function eY(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){return t[1]}),n=Math.min.apply(Math,S([],x(e),!1)),i=Math.min.apply(Math,S([],x(r),!1)),o=Math.max.apply(Math,S([],x(e),!1)),a=Math.max.apply(Math,S([],x(r),!1));return{left:n,top:i,right:o,bottom:a,width:o-n,height:a-i}}function eW(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function eH(t,e){return eW([e[0]-t[0],e[1]-t[1]])}function eX(t,e,r,n){void 0===r&&(r=1),void 0===n&&(n=(0,o.Mu)(t,e));var i=eH(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(n,"rad) scaleY(").concat(r,")"),width:"".concat(i,"px")}}function eL(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.length,o=r.reduce(function(t,e){return t+e[0]},0)/i,a=r.reduce(function(t,e){return t+e[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(a,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function ej(t,e){var r=t[e];return(0,o.Gv)(r)?b(b({},t),r):t}function eV(t){var e=t&&!(0,o.b0)(t.offsetWidth),r=0,n=0,i=0,a=0,s=0,u=0,l=0,c=0,f=0,p=0,d=0,g=0,h=1/0,v=1/0,m=1/0,b=1/0,x=0,S=0,y=!1;if(t){if(!e&&t.ownerSVGElement){var E=t.getBBox();y=!0,r=E.width,n=E.height,s=r,u=n,l=r,c=n,i=r,a=n}else{var D=tb(t),R=t.style,C="border-box"===D("boxSizing"),M=parseFloat(D("borderLeftWidth"))||0,z=parseFloat(D("borderRightWidth"))||0,O=parseFloat(D("borderTopWidth"))||0,T=parseFloat(D("borderBottomWidth"))||0,w=parseFloat(D("paddingLeft"))||0,G=parseFloat(D("paddingRight"))||0,P=parseFloat(D("paddingTop"))||0,B=parseFloat(D("paddingBottom"))||0,k=w+G,I=P+B,_=k+(M+z),F=I+(O+T),A=D("position"),N=0,q=0;if("clientLeft"in t){var Y=null;if(Y="absolute"===A?ek(t,(0,o.uD)(t)).offsetParent:t.parentElement){var W=tb(Y);N=parseFloat(W("width")),q=parseFloat(W("height"))}}f=Math.max(k,(0,o.jc)(D("minWidth"),N)||0),p=Math.max(I,(0,o.jc)(D("minHeight"),q)||0),h=(0,o.jc)(D("maxWidth"),N),v=(0,o.jc)(D("maxHeight"),q),isNaN(h)&&(h=1/0),isNaN(v)&&(v=1/0),x=(0,o.jc)(R.width,0)||0,S=(0,o.jc)(R.height,0)||0,s=parseFloat(D("width"))||0,u=parseFloat(D("height"))||0,l=1>rD(s-x)?(0,o.Tq)(f,x||s,h):s,c=1>rD(u-S)?(0,o.Tq)(p,S||u,v):u,r=l,n=c,i=l,a=c,C?(m=h,b=v,d=f,g=p,l=r-_,c=n-F):(m=h+_,b=v+F,d=f+_,g=p+F,r=l+_,n=c+F),i=l+k,a=c+I}}return{svg:y,offsetWidth:r,offsetHeight:n,clientWidth:i,clientHeight:a,contentWidth:l,contentHeight:c,inlineCSSWidth:x,inlineCSSHeight:S,cssWidth:s,cssHeight:u,minWidth:f,minHeight:p,maxWidth:h,maxHeight:v,minOffsetWidth:d,minOffsetHeight:g,maxOffsetWidth:m,maxOffsetHeight:b}}function eU(t,e){return(0,o.Mu)(e>0?t[0]:t[1],e>0?t[1]:t[0])}function eK(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function eZ(t,e){var r=t===(0,o.uD)(t)||t===(0,o.ep)(t),n={clientLeft:t.clientLeft,clientTop:t.clientTop,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight,overflow:!1};return r&&(n.clientHeight=Math.max(e.height,n.clientHeight),n.scrollHeight=Math.max(e.height,n.scrollHeight)),n.overflow="visible"!==tb(t)("overflow"),b(b({},e),n)}function e$(t,e,r,n){var i=t.left,o=t.right,a=t.top,s=t.bottom,u=e.top,l=e.left,c={left:l+i,top:u+a,right:l+o,bottom:u+s,width:o-i,height:s-a};return r&&n?eZ(r,c):c}function eQ(t,e){var r=0,n=0,i=0,o=0;if(t){var a=t.getBoundingClientRect();r=a.left,n=a.top,i=a.width,o=a.height}var s={left:r,top:n,width:i,height:o,right:r+i,bottom:n+o};return t&&e?eZ(t,s):s}function eJ(t,e,r,n){var i;return t||(e?[0,0]:e0(r.target,n))}function e0(t,e){if(t){var r=t.getAttribute("data-rotation")||"",n=t.getAttribute("data-direction");if(e.deg=r,n){var i=[0,0];return n.indexOf("w")>-1&&(i[0]=-1),n.indexOf("e")>-1&&(i[0]=1),n.indexOf("n")>-1&&(i[1]=-1),n.indexOf("s")>-1&&(i[1]=1),i}}}function e1(t,e){return[(0,a.tY)(e,t[0]),(0,a.tY)(e,t[1]),(0,a.tY)(e,t[2]),(0,a.tY)(e,t[3])]}function e2(t){var e=t.left,r=t.top;return e1([t.pos1,t.pos2,t.pos3,t.pos4],[e,r])}function e3(t,e){t[e?"controlAbles":"targetAbles"].forEach(function(e){e.unset&&e.unset(t)})}function e4(t,e){var r=e?"controlGesto":"targetGesto",n=t[r];(null==n?void 0:n.isIdle())===!1&&e3(t,e),null==n||n.unset(),t[r]=null}function e5(t,e){if(e){var r=ta(e);r.nextStyle=b(b({},r.nextStyle),t)}return{style:t,cssText:(0,o.xD)(t).map(function(e){return"".concat((0,o.aj)(e,"-"),": ").concat(t[e],";")}).join("")}}function e8(t,e,r){var n=e.afterTransform||e.transform;return b(b({},e5(b(b(b({},t.style),e.style),{transform:n}),r)),{afterTransform:n,transform:t.transform})}function e6(t,e,r,n){var i=e.datas;i.datas||(i.datas={});var o=b(b({},r),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas,isRequest:e.isRequest,isRequestChild:e.isRequestChild,isFirstDrag:!!e.isFirstDrag,isTrusted:!1!==e.isTrusted,stopAble:function(){i.isEventStart=!1},stopDrag:function(){var t;null===(t=e.stop)||void 0===t||t.call(e)}});return i.isStartEvent?n||(i.lastEvent=o):i.isStartEvent=!0,o}function e7(t,e,r){var n=e.datas,i="isDrag"in r?r.isDrag:e.isDrag;return n.datas||(n.datas={}),b(b({isDrag:i},r),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:n.lastEvent,isDouble:e.isDouble,datas:n.datas,isFirstDrag:!!e.isFirstDrag})}function e9(t,e,r){t._emitter.on(e,r)}function rt(t,e,r,n,i){return t.triggerEvent(e,r,n,i)}function re(t,e){return(0,o.zk)(t).getComputedStyle(t,e)}function rr(t,e,r){var n={},i={};return t.filter(function(t){var o=t.name;if(n[o]||!e.some(function(e){return t[e]}))return!1;if(!r&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return n[o]=!0,!0})}function rn(t,e){return t===e||null==t&&null==e}function ri(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.length-1,n=0;n<r;++n){var i=t[n];if(!(0,o.b0)(i))return i}return t[r]}function ro(t,e){var r=[],n=[];return t.forEach(function(i,o){var a=e(i,o,t),s=n.indexOf(a),u=r[s]||[];-1===s&&(n.push(a),r.push(u)),u.push(i)}),r}function ra(t){return t.reduce(function(t,e){return t.concat(e)},[])}function rs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return rD(e)-rD(t)}),t[0]}function ru(t,e,r){return(0,a.Di)((0,a.B8)(t,r),(0,a.ez)(e,r),r)}function rl(t,e){var r,n=t.is3d;return r=x(ru(t.rootMatrix,[e.distX,e.distY],n?4:3),2),e.distX=r[0],e.distY=r[1],e}function rc(t,e,r,n){if(!r[0]&&!r[1])return e;var i,o,s=eN(t,[(i=r[0]||1)/rD(i),0],n),u=eN(t,[0,(o=r[1]||1)/rD(o)],n),l=eN(t,[r[0]/eW(s),r[1]/eW(u)],n);return(0,a.tY)(e,l)}function rf(t,e,r){return r?"".concat(t/e*100,"%"):"".concat(t,"px")}function rp(t){return 1e-7>=rD(t)?0:t}function rd(t){return function(e){if(!e.isDragging(t))return"";var r,n,i,o=(n=e.targetGesto,i=e.controlGesto,(null==n?void 0:n.isFlag())&&(r=n.getEventData()[t]),!r&&(null==i?void 0:i.isFlag())&&(r=i.getEventData()[t]),r||{}).deg;return o?eT("view-control-rotation".concat(o)):""}}function rg(t,e){return void 0===e&&(e=[t]),function(r,n){if(n.isRequest)return!!e.some(function(t){return n.requestAble===t})&&n.parentDirection;var i=n.inputEvent.target;return(0,o.nB)(i,eT("direction"))&&(!t||(0,o.nB)(i,eT(t)))}}function rh(t,e){return t?(0,o.Ll)(t)?t:(0,o.Kg)(t)?e?document.querySelector(t):t:(0,o.Tn)(t)?t():(0,o.l6)(t)?t:"current"in t?t.current:t:null}function rv(t,e){return t?(!(!t||!(0,o.Gv)(t)||(0,o.Ll)(t))&&((0,o.cy)(t)||"length"in t)?[].slice.call(t):[t]).reduce(function(t,r){return(0,o.Kg)(r)&&e?S(S([],x(t),!1),x([].slice.call(document.querySelectorAll(r))),!1):((0,o.cy)(r)?t.push(rv(r,e)):t.push(rh(r,e)),t)},[]):[]}function rm(t,e){var r=t.rootMatrix,n=t.is3d,i=(0,a.B8)(r,n?4:3);return n||(i=(0,a._C)(i,3,4)),i[12]=0,i[13]=0,i[14]=0,(0,s.c4)(i,e)}function rb(t,e,r,n,i){var a=x(t,2),s=a[0],u=a[1],l=0,c=0;if(i&&s&&u){var f=Math.cos((0,o.Mu)([0,0],e)-(0,o.Mu)([0,0],n))*eW(e);if(n[0]){if(n[1]){var p=n[0]*s,d=n[1]*u,g=Math.atan2(p+e[0],d+e[1]),h=Math.atan2(p,d);g<0&&(g+=2*Math.PI),h<0&&(h+=2*Math.PI);var v=0;rD(g-h)<Math.PI/2||rD(g-h)>Math.PI/2*3||(h+=Math.PI),(v=g-h)>2*Math.PI?v-=2*Math.PI:v>Math.PI?v=2*Math.PI-v:v<-Math.PI&&(v=-2*Math.PI-v);var m=eW([p+e[0],d+e[1]])*Math.cos(v);l=m*Math.sin(h)-p,c=m*Math.cos(h)-d,n[0]<0&&(l*=-1),n[1]<0&&(c*=-1)}else c=(l=f)/r}else l=(c=f)*r}else l=n[0]*e[0],c=n[1]*e[1];return[l,c]}function rx(t,e,r,n){var i,a=r.ratio,s=r.startOffsetWidth,u=r.startOffsetHeight,l=0,c=0,f=n.distX,p=n.distY,d=n.pinchScale,g=n.parentDistance,h=n.parentDist,v=n.parentScale,m=r.fixedDirection,b=[0,1].map(function(e){return rD(t[e]-m[e])}),S=[0,1].map(function(t){var e=b[t];return 0!==e&&(e=2/e),e});if(h)l=h[0],c=h[1],e&&(l?c||(c=l/a):l=c*a);else if((0,o.Et)(d))l=(d-1)*s,c=(d-1)*u;else if(v)l=(v[0]-1)*s,c=(v[1]-1)*u;else if(g){var y=s*b[0],E=u*b[1],D=eW([y,E]);l=g/D*y*S[0],c=g/D*E*S[1]}else{var R=$({datas:r,distX:f,distY:p});l=(i=x(rb([s,u],R=S.map(function(t,e){return R[e]*t}),a,t,e),2))[0],c=i[1]}return{distWidth:l,distHeight:c}}function rS(t,e,r){var n=function t(e,r){if(r){if("left"===e)return{x:"0%",y:"50%"};if("top"===e)return{x:"50%",y:"50%"};if("center"===e)return{x:"50%",y:"50%"};else if("right"===e)return{x:"100%",y:"50%"};else if("bottom"===e)return{x:"50%",y:"100%"};var n=x(e.split(" "),2),i=n[0],o=n[1],a=t(i||""),s=t(o||""),u=b(b({},a),s),l={x:"50%",y:"50%"};return u.x&&(l.x=u.x),u.y&&(l.y=u.y),u.value&&(u.x&&!u.y&&(l.y=u.value),!u.x&&u.y&&(l.x=u.value)),l}return"left"===e?{x:"0%"}:"right"===e?{x:"100%"}:"top"===e?{y:"0%"}:"bottom"===e?{y:"100%"}:e?"center"===e?{value:"50%"}:{value:e}:{}}(t,!0),i=n.x,a=n.y;return[(0,o.jc)(i,e)||0,(0,o.jc)(a,r)||0]}function ry(t,e,r,n,i){var o=t._store,a=o[e];if(!(e in o)){if(null==i)return o[e]=r,r;o[e]=i,a=i}return a===r||n(a)===n(r)?a:(o[e]=r,r)}function rE(t){return t>=0?1:-1}function rD(t){return Math.abs(t)}function rR(t,e){return(0,o.hJ)(t).map(function(t){return e(t)})}function rC(t){return(0,o.Et)(t)?{top:t,left:t,right:t,bottom:t}:{left:t.left||0,top:t.top||0,right:t.right||0,bottom:t.bottom||0}}var rM=y("pinchable",{props:["pinchable"],events:["pinchStart","pinch","pinchEnd","pinchGroupStart","pinchGroup","pinchGroupEnd"],dragStart:function(){return!0},pinchStart:function(t,e){var r=e.datas,n=e.targets,i=e.angle,o=e.originalDatas,a=t.props,s=a.pinchable,u=a.ables;if(!s)return!1;var l="drag".concat(n?"Group":"","ControlStart"),c=(!0===s?t.controlAbles:u.filter(function(t){return s.indexOf(t.name)>-1})).filter(function(t){return t.canPinch&&t[l]}),f=e6(t,e,{});n&&(f.targets=n),r.isPinch=!1!==rt(t,"onPinch".concat(n?"Group":"","Start"),f),r.ables=c;var p=r.isPinch;return!!p&&(c.forEach(function(r){if(o[r.name]=o[r.name]||{},r[l]){var n=b(b({},e),{datas:o[r.name],parentRotate:i,isPinch:!0});r[l](t,n)}}),t.state.snapRenderInfo={request:e.isRequest,direction:[0,0]},p)},pinch:function(t,e){var r=e.datas,n=e.scale,i=e.distance,o=e.originalDatas,a=e.inputEvent,s=e.targets,u=e.angle;if(r.isPinch){var l=i*(1-1/n),c=e6(t,e,{});s&&(c.targets=s),rt(t,"onPinch".concat(s?"Group":""),c);var f=r.ables,p="drag".concat(s?"Group":"","Control");return f.forEach(function(r){r[p]&&r[p](t,b(b({},e),{datas:o[r.name],inputEvent:a,resolveMatrix:!0,pinchScale:n,parentDistance:l,parentRotate:u,isPinch:!0}))}),c}},pinchEnd:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,o=e.targets,a=e.originalDatas;if(r.isPinch){var s=e7(t,e,{isDrag:n});o&&(s.targets=o),rt(t,"onPinch".concat(o?"Group":"","End"),s);var u=r.ables,l="drag".concat(o?"Group":"","ControlEnd");return u.forEach(function(r){r[l]&&r[l](t,b(b({},e),{isDrag:n,datas:a[r.name],inputEvent:i,isPinch:!0}))}),n}},pinchGroupStart:function(t,e){return this.pinchStart(t,b(b({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,b(b({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,b(b({},e),{targets:t.props.targets}))}}),rz=rg("scalable"),rO={name:"scalable",ableGroup:"size",canPinch:!0,props:["scalable","throttleScale","renderDirections","keepRatio","edge","displayAroundControls"],events:["scaleStart","beforeScale","scale","scaleEnd","scaleGroupStart","beforeScaleGroup","scaleGroup","scaleGroupEnd"],render:tz("scalable"),dragControlCondition:rz,viewClassName:rd("scalable"),dragControlStart:function(t,e){var r=e.datas,n=e.isPinch,i=e.inputEvent,a=eJ(e.parentDirection,n,i,r),s=t.state,u=s.width,l=s.height,c=s.targetTransform,f=s.target,p=s.pos1,d=s.pos2,g=s.pos4;if(!a||!f)return!1;n||j(t,e),r.datas={},r.transform=c,r.prevDist=[1,1],r.direction=a,r.startOffsetWidth=u,r.startOffsetHeight=l,r.startValue=[1,1];var h=!a[0]&&!a[1]||a[0]||!a[1];function v(t){r.ratio=t&&isFinite(t)?t:0}function m(t){var e=ei(r.startPositions,t);r.fixedDirection=e.fixedDirection,r.fixedPosition=e.fixedPosition,r.fixedOffset=e.fixedOffset}tn(t,e,"scale"),r.isWidth=h,r.startPositions=e2(t.state),r.setFixedDirection=m,v((0,o.l$)(p,d)/(0,o.l$)(d,g)),m([-a[0],-a[1]]);var x=function(t){r.minScaleSize=t},S=function(t){r.maxScaleSize=t};x([-1/0,-1/0]),S([1/0,1/0]);var y=e6(t,e,b(b({direction:a,set:function(t){r.startValue=t},setRatio:v,setFixedDirection:m,setMinScaleSize:x,setMaxScaleSize:S},tr(t,e)),{dragStart:en.dragStart(t,new H().dragStart([0,0],e))})),E=rt(t,"onScaleStart",y);return r.startFixedDirection=r.fixedDirection,!1!==E&&(r.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:a}),!!r.isScale&&y},dragControl:function(t,e){V(t,e,"scale");var r,n,i,s,u=e.datas,l=e.parentKeepRatio,c=e.parentFlag,f=e.isPinch,p=e.dragClient,d=e.isRequest,g=e.useSnap,h=e.resolveMatrix,v=u.prevDist,m=u.direction,x=u.startOffsetWidth,S=u.startOffsetHeight,y=u.isScale,E=u.startValue,D=u.isWidth,R=u.ratio;if(!y)return!1;var C=t.props,M=C.throttleScale,z=C.parentMoveable,O=m;m[0]||m[1]||(O=[1,1]);var T=R&&(null!=l?l:C.keepRatio)||!1,w=t.state,G=[E[0],E[1]];function P(){var t=rx(O,T,u,e),r=t.distWidth,n=t.distHeight,i=x?(x+r)/x:1,o=S?(S+n)/S:1;E[0]||(G[0]=r/x),E[1]||(G[1]=n/S);var a=(O[0]||T?i:1)*G[0],s=(O[1]||T?o:1)*G[1];return 0===a&&(a=1e-9*rE(v[0])),0===s&&(s=1e-9*rE(v[1])),[a,s]}var B=P();if(!f&&t.props.groupable){var k=(w.snapRenderInfo||{}).direction;(0,o.cy)(k)&&(k[0]||k[1])&&(w.snapRenderInfo={direction:m,request:e.isRequest})}rt(t,"onBeforeScale",e6(t,e,{scale:B,setFixedDirection:function(t){return u.setFixedDirection(t),B=P()},startFixedDirection:u.startFixedDirection,setScale:function(t){B=t}},!0));var I=[B[0]/G[0],B[1]/G[1]],_=p,F=[0,0],A=rE(I[0]*I[1]),N=!p&&!c&&f;if(N||h?_=tf(t,u.targetAllTransform,[0,0],[0,0],u):p||(_=u.fixedPosition),f||(F=function(t,e,r,n,i){if(!tN(t,"scalable"))return[0,0];var o=i.startOffsetWidth,s=i.startOffsetHeight,u=i.fixedPosition,l=i.fixedDirection,c=i.is3d,f=eD(t,function(t,r){var n,f,p,d,g,h,v;return eE((n=(0,a.tY)(e,[t/o,r/s]),f=i.transformOrigin,p=i.offsetMatrix,d=i.is3d,g=i.targetMatrix,h=i.targetAllTransform,v=d?4:3,te(p,(0,a.lw)(h||g,(0,a.kb)(n,v),v),f,v)),o,s,l,u,c)},o,s,r,u,n,i);return[f[0]/o,f[1]/s]}(t,I,m,!g&&d,u)),T){O[0]&&O[1]&&F[0]&&F[1]&&(Math.abs(F[0]*x)>Math.abs(F[1]*S)?F[1]=0:F[0]=0);var q=!F[0]&&!F[1];if(q&&(D?I[0]=(0,o.nF)(I[0]*G[0],M)/G[0]:I[1]=(0,o.nF)(I[1]*G[1],M)/G[1]),O[0]&&!O[1]||F[0]&&!F[1]||q&&D){I[0]+=F[0];var Y=x*I[0]*G[0]/R;I[1]=rE(A*I[0])*rD(Y/S/G[1])}else if(!O[0]&&O[1]||!F[0]&&F[1]||q&&!D){I[1]+=F[1];var W=S*I[1]*G[1]*R;I[0]=rE(A*I[1])*rD(W/x/G[0])}}else I[0]+=F[0],I[1]+=F[1],F[0]||(I[0]=(0,o.nF)(I[0]*G[0],M)/G[0]),F[1]||(I[1]=(0,o.nF)(I[1]*G[1],M)/G[1]);0===I[0]&&(I[0]=1e-9*rE(v[0])),0===I[1]&&(I[1]=1e-9*rE(v[1])),r=I,n=[G[0],G[1]];var H=[x,S],X=[x*(B=[r[0]*n[0],r[1]*n[1]])[0],S*B[1]];X=(0,o.u0)(X,u.minScaleSize,u.maxScaleSize,!!T&&R),B=rR(2,function(t){return H[t]?X[t]/H[t]:X[t]}),I=rR(2,function(t){return B[t]/G[t]});var L=rR(2,function(t){return v[t]?I[t]/v[t]:I[t]}),j="scale(".concat(I.join(", "),")"),K="scale(".concat(B.join(", "),")"),Z=U(u,K,j),$=!E[0]||!E[1],Q=(i=$?K:j,s=u.fixedDirection,tp(t,i,s,_,u.fixedOffset,u,$)),J=N?Q:(0,a.Rd)(Q,u.prevInverseDist||[0,0]);if(u.prevDist=I,u.prevInverseDist=Q,B[0]===v[0]&&B[1]===v[1]&&J.every(function(t){return!t})&&!z&&!N)return!1;var tt=e6(t,e,b({offsetWidth:x,offsetHeight:S,direction:m,scale:B,dist:I,delta:L,isPinch:!!f},tc(t,Z,J,f,e)));return rt(t,"onScale",tt),tt},dragControlEnd:function(t,e){var r=e.datas;if(!r.isScale)return!1;r.isScale=!1;var n=e7(t,e,{});return rt(t,"onScaleEnd",n),n},dragGroupControlCondition:rz,dragGroupControlStart:function(t,e){var r=e.datas,n=this.dragControlStart(t,e);if(!n)return!1;var i=tx(t,"resizable",e);r.moveableScale=t.scale;var o=ty(t,this,"dragControlStart",e,function(e,n){return tE(t,e,r,n)}),a=function(e){n.setFixedDirection(e),o.forEach(function(n,o){n.setFixedDirection(e),tE(t,n.moveable,r,i[o])})};r.setFixedDirection=a;var s=b(b({},n),{targets:t.props.targets,events:o,setFixedDirection:a});return r.isScale=!1!==rt(t,"onScaleGroupStart",s),!!r.isScale&&s},dragGroupControl:function(t,e){var r=e.datas;if(r.isScale){e9(t,"onBeforeScale",function(r){rt(t,"onBeforeScaleGroup",e6(t,e,b(b({},r),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var i=n.dist,o=r.moveableScale;t.scale=[i[0]*o[0],i[1]*o[1]];var s=t.props.keepRatio,u=r.fixedPosition,l=ty(t,this,"dragControl",e,function(e,r){var n=x((0,a.Di)((0,a.XI)(t.rotation/180*Math.PI,3),[r.datas.originalX*i[0],r.datas.originalY*i[1],1],3),2),o=n[0],l=n[1];return b(b({},r),{parentDist:null,parentScale:i,parentKeepRatio:s,dragClient:(0,a.tY)(u,[o,l])})}),c=b({targets:t.props.targets,events:l},n);return rt(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isScale){this.dragControlEnd(t,e);var n=ty(t,this,"dragControlEnd",e),i=e7(t,e,{targets:t.props.targets,events:n});return rt(t,"onScaleGroupEnd",i),r}},request:function(){var t={},e=0,r=0,n=!1;return{isControl:!0,requestStart:function(e){return n=e.useSnap,{datas:t,parentDirection:e.direction||[1,1],useSnap:n}},request:function(i){return e+=i.deltaWidth,r+=i.deltaHeight,{datas:t,parentDist:[e,r],parentKeepRatio:i.keepRatio,useSnap:n}},requestEnd:function(){return{datas:t,isDrag:!0,useSnap:n}}}}};function rT(t,e){return t.map(function(t,r){return(0,o.Om)(t,e[r],1,2)})}function rw(t,e,r){var n=(0,o.Mu)(t,e),i=(0,o.Mu)(t,r)-n;return i>=0?i:i+2*Math.PI}var rG={name:"warpable",ableGroup:"size",props:["warpable","renderDirections","edge","displayAroundControls"],events:["warpStart","warp","warpEnd"],viewClassName:rd("warpable"),render:function(t,e){var r=t.props,n=r.resizable,i=r.scalable,o=r.warpable,a=r.zoom;if(n||i||!o)return[];var s=t.state,u=s.pos1,l=s.pos2,c=s.pos3,f=s.pos4,p=rT(u,l),d=rT(l,u),g=rT(u,c),h=rT(c,u),v=rT(c,f),m=rT(f,c),b=rT(l,f),y=rT(f,l);return S([e.createElement("div",{className:eT("line"),key:"middeLine1",style:eX(p,v,a)}),e.createElement("div",{className:eT("line"),key:"middeLine2",style:eX(d,m,a)}),e.createElement("div",{className:eT("line"),key:"middeLine3",style:eX(g,b,a)}),e.createElement("div",{className:eT("line"),key:"middeLine4",style:eX(h,y,a)})],x(tR(t,D,"warpable",e)),!1)},dragControlCondition:function(t,e){if(e.isRequest)return!1;var r=e.inputEvent.target;return(0,o.nB)(r,eT("direction"))&&(0,o.nB)(r,eT("warpable"))},dragControlStart:function(t,e){var r=e.datas,n=e.inputEvent,i=t.props.target,o=e0(n.target,r);if(!o||!i)return!1;var s=t.state,u=s.transformOrigin,l=s.is3d,c=s.targetTransform,f=s.targetMatrix,p=s.width,d=s.height,g=s.left,h=s.top;r.datas={},r.targetTransform=c,r.warpTargetMatrix=l?f:(0,a._C)(f,3,4),r.targetInverseMatrix=(0,a.bn)((0,a.B8)(r.warpTargetMatrix,4),3,4),r.direction=o,r.left=g,r.top=h,r.poses=[[0,0],[p,0],[0,d],[p,d]].map(function(t){return(0,a.Rd)(t,u)}),r.nextPoses=r.poses.map(function(t){var e=x(t,2),n=e[0],i=e[1];return(0,a.Di)(r.warpTargetMatrix,[n,i,0,1],4)}),r.startValue=(0,a.k8)(4),r.prevMatrix=(0,a.k8)(4),r.absolutePoses=e2(s),r.posIndexes=Q(o),j(t,e),tn(t,e,"matrix3d"),s.snapRenderInfo={request:e.isRequest,direction:o};var v=e6(t,e,b({set:function(t){r.startValue=t}},tr(t,e)));return!1!==rt(t,"onWarpStart",v)&&(r.isWarp=!0),r.isWarp},dragControl:function(t,e){var r=e.datas,n=e.isRequest,i=e.distX,o=e.distY,s=r.targetInverseMatrix,u=r.prevMatrix,l=r.isWarp,c=r.startValue,f=r.poses,p=r.posIndexes,d=r.absolutePoses;if(!l)return!1;if(V(t,e,"matrix3d"),tN(t,"warpable")){var g=p.map(function(t){return d[t]});g.length>1&&g.push([(g[0][0]+g[1][0])/2,(g[0][1]+g[1][1])/2]);var h=et(t,n,{horizontal:g.map(function(t){return t[1]+o}),vertical:g.map(function(t){return t[0]+i})}),v=h.horizontal,m=h.vertical;o-=v.offset,i-=m.offset}var x=$({datas:r,distX:i,distY:o},!0),S=r.nextPoses.slice();if(p.forEach(function(t){S[t]=(0,a.tY)(S[t],x)}),!F.every(function(t){var e,r,n,i,o;return e=t.map(function(t){return f[t]}),r=t.map(function(t){return S[t]}),n=rw(e[0],e[1],e[2]),i=rw(r[0],r[1],r[2]),(!(n>=(o=Math.PI))||!(i<=o))&&(!(n<=o)||!(i>=o))}))return!1;var y=(0,a.qL)(f[0],f[2],f[1],f[3],S[0],S[2],S[1],S[3]);if(!y.length)return!1;var E=K(r,(0,a.lw)(s,y,4),!0),D=(0,a.lw)((0,a.B8)(u,4),E,4);r.prevMatrix=E;var R=(0,a.lw)(c,E,4),C=U(r,"matrix3d(".concat(R.join(", "),")"),"matrix3d(".concat(E.join(", "),")"));return to(e,C),rt(t,"onWarp",e6(t,e,b({delta:D,matrix:R,dist:E,multiply:a.lw,transform:C},e5({transform:C},e)))),!0},dragControlEnd:function(t,e){var r=e.datas,n=e.isDrag;return!!r.isWarp&&(r.isWarp=!1,rt(t,"onWarpEnd",e7(t,e,{})),n)}},rP=eT("area-pieces"),rB=eT("area-piece"),rk=eT("avoid"),rI=eT("view-dragging");function r_(t){var e=t.areaElement;if(e){var r=t.state,n=r.width,i=r.height;(0,o.vy)(e,rk),e.style.cssText+="left: 0px; top: 0px; width: ".concat(n,"px; height: ").concat(i,"px")}}function rF(t){return t.createElement("div",{key:"area_pieces",className:rP},t.createElement("div",{className:rB}),t.createElement("div",{className:rB}),t.createElement("div",{className:rB}),t.createElement("div",{className:rB}))}var rA={name:"dragArea",props:["dragArea","passDragArea"],events:["click","clickGroup"],render:function(t,e){var r=t.props,n=r.target,o=r.dragArea,s=r.groupable,u=r.passDragArea,l=t.getState(),c=l.width,f=l.height,p=l.renderPoses,d=u?eT("area","pass"):eT("area");if(s)return[e.createElement("div",{key:"area",ref:(0,i.KR)(t,"areaElement"),className:d}),rF(e)];if(!n||!o)return[];var g=(0,a.qL)([0,0],[c,0],[0,f],[c,f],p[0],p[1],p[2],p[3]),h=g.length?eF(g,!0):"none";return[e.createElement("div",{key:"area",ref:(0,i.KR)(t,"areaElement"),className:d,style:{top:"0px",left:"0px",width:"".concat(c,"px"),height:"".concat(f,"px"),transformOrigin:"0 0",transform:h}}),rF(e)]},dragStart:function(t,e){var r=e.datas,n=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;r.isDragArea=!1;var a=t.areaElement,s=t.state,u=s.moveableClientRect,l=s.renderPoses,c=s.rootMatrix,f=s.is3d,p=u.left,d=u.top,g=eY(l),h=g.left,v=g.top,m=g.width,b=g.height,S=x(ru(c,[n-p,i-d],f?4:3),2),y=S[0],E=S[1];y-=h,E-=v;var D=[{left:h,top:v,width:m,height:E-10},{left:h,top:v,width:y-10,height:b},{left:h,top:v+E+10,width:m,height:b-E-10},{left:h+y+10,top:v,width:m-y-10,height:b}],R=[].slice.call(a.nextElementSibling.children);D.forEach(function(t,e){R[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")}),(0,o.iQ)(a,rk),s.disableNativeEvent=!0},drag:function(t,e){var r=e.datas,n=e.inputEvent;if(this.enableNativeEvent(t),!n)return!1;r.isDragArea||(r.isDragArea=!0,r_(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var r=e.inputEvent,n=e.datas;if(!r)return!1;n.isDragArea||r_(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){r_(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&(0,o.xi)(function(){e.disableNativeEvent=!1})}},rN=y("origin",{props:["origin","svgOrigin"],render:function(t,e){var r,n=t.props,i=n.zoom,o=n.svgOrigin,s=n.groupable,u=t.getState(),l=u.beforeOrigin,c=u.rotation,f=u.svg,p=u.allMatrix,d=u.is3d,g=u.left,h=u.top,v=u.offsetWidth,m=u.offsetHeight;if(!s&&f&&o){var b=x(rS(o,v,m),2),S=eN(p,[b[0],b[1]],d?4:3);r=eL(c,i,(0,a.Rd)(S,[g,h]))}else r=eL(c,i,l);return[e.createElement("div",{className:eT("control","origin"),style:r,key:"beforeOrigin"})]}});function rq(t){var e=t.scrollContainer;return[e.scrollLeft,e.scrollTop]}var rY={name:"",props:["target","dragTargetSelf","dragTarget","dragContainer","container","warpSelf","rootContainer","useResizeObserver","useMutationObserver","zoom","dragFocusedInput","transformOrigin","ables","className","pinchThreshold","pinchOutside","triggerAblesSimultaneously","checkInput","cspNonce","translateZ","hideDefaultLines","props","flushSync","stopPropagation","preventClickEventOnDrag","preventClickDefault","viewContainer","persistData","useAccuratePosition","firstRenderState","linePadding","controlPadding","preventDefault","preventRightClick","preventWheelClick","requestStyles"],events:["changeTargets"]},rW=y("padding",{props:["padding"],render:function(t,e){var r=t.props;if(r.dragArea)return[];var n=rC(r.padding||{}),i=n.left,o=n.top,s=n.right,u=n.bottom,l=t.getState(),c=l.renderPoses,f=[l.pos1,l.pos2,l.pos3,l.pos4],p=[];return i>0&&p.push([0,2]),o>0&&p.push([0,1]),s>0&&p.push([1,3]),u>0&&p.push([2,3]),p.map(function(t,r){var n=x(t,2),i=n[0],o=n[1],s=f[i],u=f[o],l=c[i],p=c[o],d=(0,a.qL)([0,0],[100,0],[0,100],[100,100],s,u,l,p);if(d.length)return e.createElement("div",{key:"padding".concat(r),className:eT("padding"),style:{transform:eF(d,!0)}})})}}),rH=["nw","ne","se","sw"];function rX(t,e){var r=t[0]+t[1],n=r>e?e/r:1;return t[0]*=n,t[1]=e-t[1]*n,t}var rL=[1,2,5,6],rj=[0,3,4,7],rV=[1,-1,-1,1],rU=[1,1,-1,-1];function rK(t,e,r,n,i,o,a,s){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=r),void 0===s&&(s=n);var u=[],l=!1,c=t.filter(function(t){return!t.virtual}),f=c.map(function(t){var c=t.horizontal,f=t.vertical,p=t.pos;if(f&&!l&&(l=!0,u.push("/")),l){var d=Math.max(0,1===f?p[1]-o:s-p[1]);return u.push(rf(d,n,e)),d}var d=Math.max(0,1===c?p[0]-i:a-p[0]);return u.push(rf(d,r,e)),d});return{radiusPoses:c,styles:u,raws:f}}function rZ(t){for(var e=[0,0],r=[0,0],n=t.length,i=0;i<n;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,r[0]=i+1),o.vertical&&(0===r[1]&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:e,verticalRange:r}}function r$(t,e,r,n,i,a,s){void 0===a&&(a=[0,0]),void 0===s&&(s=!1);var u,l,c,f,p=t.indexOf("/"),d=(p>-1?t.slice(0,p):t).length,g=t.slice(0,d),h=t.slice(d+1),v=g.length,m=h.length,b=m>0,y=x(g,4),E=y[0],D=void 0===E?"0px":E,R=y[1],C=void 0===R?D:R,M=y[2],z=void 0===M?D:M,O=y[3],T=void 0===O?C:O,w=x(h,4),G=w[0],P=void 0===G?D:G,B=w[1],k=void 0===B?b?P:C:B,I=w[2],_=void 0===I?b?P:z:I,F=w[3],A=void 0===F?b?k:T:F,N=[D,C,z,T].map(function(t){return(0,o.jc)(t,e)}),q=[P,k,_,A].map(function(t){return(0,o.jc)(t,r)}),Y=N.slice(),W=q.slice();u=x(rX([Y[0],Y[1]],e),2),Y[0]=u[0],Y[1]=u[1],l=x(rX([Y[3],Y[2]],e),2),Y[3]=l[0],Y[2]=l[1],c=x(rX([W[0],W[3]],r),2),W[0]=c[0],W[3]=c[1],f=x(rX([W[1],W[2]],r),2),W[1]=f[0],W[2]=f[1];var H=s?Y:Y.slice(0,Math.max(a[0],v)),X=s?W:W.slice(0,Math.max(a[1],m));return S(S([],x(H.map(function(t,e){var o=rH[e];return{virtual:e>=v,horizontal:rV[e],vertical:0,pos:[n+t,i+(-1===rU[e]?r:0)],sub:!0,raw:N[e],direction:o}})),!1),x(X.map(function(t,r){var o=rH[r];return{virtual:r>=m,horizontal:0,vertical:rU[r],pos:[n+(-1===rV[r]?e:0),i+t],sub:!0,raw:q[r],direction:o}})),!1)}var rQ=[[0,-1,"n"],[1,0,"e"]],rJ=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function r0(t,e,r){var n=t.props.clipRelative,i=t.state,o=i.width,s=i.height,u=e.type,l=e.poses,c="rect"===u,f="circle"===u;if("polygon"===u)return r.map(function(t){return"".concat(rf(t[0],o,n)," ").concat(rf(t[1],s,n))});if(c||"inset"===u){var p=r[1][1],d=r[3][0],g=r[7][0],h=r[5][1];if(c)return[p,d,h,g].map(function(t){return"".concat(t,"px")});var v=[p,o-d,s-h,g].map(function(t,e){return rf(t,e%2?o:s,n)});if(r.length>8){var m=x((0,a.Rd)(r[4],r[0]),2),y=m[0],E=m[1];v.push.apply(v,S(["round"],x(rK(l.slice(8).map(function(t,e){return b(b({},t),{pos:r[e]})}),n,y,E,g,p,d,h).styles),!1))}return v}if(f||"ellipse"===u){var D=r[0],R=rf(rD(r[1][1]-D[1]),f?Math.sqrt((o*o+s*s)/2):s,n),v=f?[R]:[rf(rD(r[2][0]-D[0]),o,n),R];return v.push("at",rf(D[0],o,n),rf(D[1],s,n)),v}}function r1(t,e,r,n){var i=[n,(n+e)/2,e],o=[t,(t+r)/2,r];return rJ.map(function(t){var e=x(t,3),r=e[0],n=e[1],a=e[2],s=i[r+1],u=o[n+1];return{vertical:rD(n),horizontal:rD(r),direction:a,pos:[s,u]}})}function r2(t){var e=[1/0,-1/0],r=[1/0,-1/0];return t.forEach(function(t){var n=t.pos;e[0]=Math.min(e[0],n[0]),e[1]=Math.max(e[1],n[0]),r[0]=Math.min(r[0],n[1]),r[1]=Math.max(r[1],n[1])}),[rD(e[1]-e[0]),rD(r[1]-r[0])]}function r3(t,e,r,n,i){if(t){var a,s,u,l,f,p,d,g,h,v=i;if(!v){var m=tb(t),b=m("clipPath");v="none"!==b?b:m("clip")}if(v&&"none"!==v&&"auto"!==v||(v=n)){var y=(0,o.ft)(v),E=y.prefix,D=void 0===E?v:E,R=y.value,C=void 0===R?"":R,M="circle"===D,z=" ";if("polygon"===D){var O=(0,o.cM)(C||"0% 0%, 100% 0%, 100% 100%, 0% 100%");z=",";var T=O.map(function(t){var n=x(t.split(" "),2),i=n[0],a=n[1];return{vertical:1,horizontal:1,pos:[(0,o.jc)(i,e),(0,o.jc)(a,r)]}}),w=(0,c.Qk)(T.map(function(t){return t.pos}));return{type:D,clipText:v,poses:T,splitter:z,left:w.minX,right:w.maxX,top:w.minY,bottom:w.maxY}}if(M||"ellipse"===D){var G="",P="",B=0,k=0,O=(0,o.Z3)(C);if(M){var I="";I=void 0===(s=(a=x(O,4))[0])?"50%":s,G=void 0===(u=a[2])?"50%":u,P=void 0===(l=a[3])?"50%":l,k=B=(0,o.jc)(I,Math.sqrt((e*e+r*r)/2))}else{var _="",F="";_=void 0===(p=(f=x(O,5))[0])?"50%":p,F=void 0===(d=f[1])?"50%":d,G=void 0===(g=f[3])?"50%":g,P=void 0===(h=f[4])?"50%":h,B=(0,o.jc)(_,e),k=(0,o.jc)(F,r)}var A=[(0,o.jc)(G,e),(0,o.jc)(P,r)],T=S([{vertical:1,horizontal:1,pos:A,direction:"nesw"}],x(rQ.slice(0,M?1:2).map(function(t){return{vertical:rD(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[A[0]+t[0]*B,A[1]+t[1]*k]}})),!1);return{type:D,clipText:v,radiusX:B,radiusY:k,left:A[0]-B,top:A[1]-k,right:A[0]+B,bottom:A[1]+k,poses:T,splitter:z}}if("inset"===D){var O=(0,o.Z3)(C||"0 0 0 0"),N=O.indexOf("round"),q=(N>-1?O.slice(0,N):O).length,Y=O.slice(q+1),W=x(O.slice(0,q),4),H=W[0],X=W[1],L=void 0===X?H:X,j=W[2],V=void 0===j?H:j,U=W[3],K=void 0===U?L:U,Z=x([H,V].map(function(t){return(0,o.jc)(t,r)}),2),$=Z[0],Q=Z[1],J=x([K,L].map(function(t){return(0,o.jc)(t,e)}),2),tt=J[0],te=J[1],tr=e-te,tn=r-Q,ti=r$(Y,tr-tt,tn-$,tt,$),T=S(S([],x(r1($,tr,tn,tt)),!1),x(ti),!1);return{type:"inset",clipText:v,poses:T,top:$,left:tt,right:tr,bottom:tn,radius:Y,splitter:z}}if("rect"===D){var O=(0,o.cM)(C||"0px, ".concat(e,"px, ").concat(r,"px, 0px"));z=",";var to=x(O.map(function(t){return(0,o.hg)(t).value}),4),ta=to[0],te=to[1],Q=to[2],tt=to[3],T=r1(ta,te,Q,tt);return{type:"rect",clipText:v,poses:T,top:ta,right:te,bottom:Q,left:tt,values:O,splitter:z}}}}}function r4(t,e,r,n,i){void 0===n&&(n=[0,0]);var a=[];return r$(t&&"0px"!==t?(0,o.Z3)(t):[],e,r,0,0,n,i)}function r5(t,e,r,n,i){var o,a,s=t.state,u=s.width,l=s.height,c=rK(i,t.props.roundRelative,u,l),f=c.raws,p=c.styles,d=(o=c.radiusPoses,void 0===(a=f)&&(a=o.map(function(t){return t.raw})),{horizontals:o.map(function(t,e){return t.horizontal?a[e]:null}).filter(function(t){return null!=t}),verticals:o.map(function(t,e){return t.vertical?a[e]:null}).filter(function(t){return null!=t})}),g=d.horizontals,h=d.verticals,v=p.join(" ");s.borderRadiusState=v;var m=e6(t,e,b({horizontals:g,verticals:h,borderRadius:v,width:u,height:l,delta:n,dist:r},e5({borderRadius:v},e)));return rt(t,"onRound",m),m}function r8(t){var e,r,n=t.getState().style,i=n.borderRadius||"";if(!i&&t.props.groupable){var o=t.moveables[0],a=t.getTargets()[0];a&&((null==o?void 0:o.props.target)===a?n.borderRadius=i=null!==(r=null===(e=t.moveables[0])||void 0===e?void 0:e.state.style.borderRadius)&&void 0!==r?r:"":n.borderRadius=i=re(a).borderRadius)}return i}var r6={isPinch:!0,name:"beforeRenderable",props:[],events:["beforeRenderStart","beforeRender","beforeRenderEnd","beforeRenderGroupStart","beforeRenderGroup","beforeRenderGroupEnd"],dragRelation:"weak",setTransform:function(t,e){var r,n=t.state,i=n.is3d,s=n.targetMatrix,u=n.inlineTransform,l=i?"matrix3d(".concat(s.join(","),")"):"matrix(".concat((0,a.ZB)(s,!0),")"),c=u&&"none"!==u?u:l;r=(0,a.k8)(i?4:3),e.datas.startTransforms=c==="matrix".concat(i?"3d":"","(").concat(r.join(","),")")||"matrix(1,0,0,1,0,0)"===c?[]:(0,o.Z3)(c)},resetStyle:function(t){var e=t.datas;e.nextStyle={},e.nextTransforms=t.datas.startTransforms,e.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return e6(t,e,{setTransform:function(t){e.datas.startTransforms=(0,o.cy)(t)?t:(0,o.Z3)(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return e6(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),this.resetStyle(e),rt(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){e.datas.startTransforms||this.setTransform(t,e),this.resetStyle(e),rt(t,"onBeforeRender",e6(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){e.datas.startTransforms||(this.setTransform(t,e),this.resetStyle(e)),rt(t,"onBeforeRenderEnd",e6(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var r=this;this.dragStart(t,e);var n=tx(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.setTransform(n,t),r.resetStyle(t),r.fillDragStartParams(n,t)});rt(t,"onBeforeRenderGroupStart",e6(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:o}))},dragGroup:function(t,e){var r=this;this.drag(t,e);var n=tx(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.resetStyle(t),r.fillDragParams(n,t)});rt(t,"onBeforeRenderGroup",e6(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:o}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),rt(t,"onBeforeRenderGroupEnd",e6(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},r7={name:"renderable",props:[],events:["renderStart","render","renderEnd","renderGroupStart","renderGroup","renderGroupEnd"],dragRelation:"weak",dragStart:function(t,e){rt(t,"onRenderStart",e6(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){rt(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){return this.drag(t,e)},dragEnd:function(t,e){rt(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){rt(t,"onRenderGroupStart",e6(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var r=this,n=tx(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.fillDragParams(n,t)});rt(t,"onRenderGroup",e6(t,e,b(b({isPinch:!!e.isPinch,targets:t.props.targets,transform:tu(e),transformObject:{}},e5(tl(e))),{events:o})))},dragGroupEnd:function(t,e){var r=this,n=tx(t,"beforeRenderable",e),i=t.moveables,o=n.map(function(t,e){var n=i[e];return r.fillDragEndParams(n,t)});rt(t,"onRenderGroupEnd",e6(t,e,b({isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:o,transformObject:{},transform:tu(e)},e5(tl(e)))))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){var r={};return(0,s.qg)(ts(e)||[]).forEach(function(t){r[t.name]=t.functionValue}),e6(t,e,b({isPinch:!!e.isPinch,transformObject:r,transform:tu(e)},e5(tl(e))))},fillDragEndParams:function(t,e){var r={};return(0,s.qg)(ts(e)||[]).forEach(function(t){r[t.name]=t.functionValue}),e6(t,e,b({isPinch:!!e.isPinch,isDrag:e.isDrag,transformObject:r,transform:tu(e)},e5(tl(e))))}};function r9(t,e,r,n,i,o,a){o.clientDistX=o.distX,o.clientDistY=o.distY;var s,u="Start"===i,l="End"===i,c="After"===i,f=t.state.target,p=o.isRequest,d=n.indexOf("Control")>-1;if(!f||u&&d&&!p&&t.areaElement===o.inputEvent.target)return!1;var g=S([],x(e),!1);if(p){var h=o.requestAble;g.some(function(t){return t.name===h})||g.push.apply(g,S([],x(t.props.ables.filter(function(t){return t.name===h})),!1))}if(!g.length||g.every(function(t){return t.dragRelation}))return!1;var v=o.inputEvent;l&&v&&(s=document.elementFromPoint(o.clientX,o.clientY)||v.target);var m=!1,y=function(){var t;m=!0,null===(t=o.stop)||void 0===t||t.call(o)},E=u&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());E&&t.updateRect(i,!0,!1);var D=o.datas,R=d?"controlGesto":"targetGesto",C=t[R],M=function(e,r,n){if(!(r in e)||C!==t[R])return!1;var i=e.name,a=D[i]||(D[i]={});if(u&&(a.isEventStart=!n||!e[n]||e[n](t,o)),!a.isEventStart)return!1;var l=e[r](t,b(b({},o),{stop:y,datas:a,originalDatas:D,inputTarget:s}));return t._emitter.off(),u&&!1===l&&(a.isEventStart=!1),l};E&&g.forEach(function(e){e.unset&&e.unset(t)}),M(r6,"drag".concat(n).concat(i));var z=0,O=0;r.forEach(function(e){if(m)return!1;var r="".concat(e).concat(n).concat(i),a="".concat(e).concat(n,"Condition");""!==i||p||rl(t.state,o);var s=g.filter(function(t){return t[r]}),l=(s=s.filter(function(t,e){return t.name&&s.indexOf(t)===e})).filter(function(t){return M(t,r,a)}).length;m&&++z,l&&++O,!m&&u&&s.length&&!l&&(z+=+!!s.filter(function(t){return!!D[t.name].isEventStart&&"strong"!==t.dragRelation}).length)}),(!c||O)&&M(r7,"drag".concat(n).concat(i));var T=C!==t[R]||z===r.length;return(l||m||T)&&(t.state.gestos={},t.moveables&&t.moveables.forEach(function(t){t.state.gestos={}}),g.forEach(function(e){e.unset&&e.unset(t)})),u&&!T&&!p&&O&&t.props.preventDefault&&(null==o||o.preventDefault()),!t.isUnmounted&&!T&&((!u&&O&&!a||l)&&(t.props.flushSync||ew)(function(){t.updateRect(l?i:"",!0,!1),t.forceUpdate()}),u||l||c||!O||a||r9(t,e,r,n,i+"After",o),!0)}function nt(t,e){return function(r,n){void 0===n&&(n=r.inputEvent.target);var i,a=n,s=t.areaElement,u=t._dragTarget;return!(!u||!e&&(null===(i=t.controlGesto)||void 0===i?void 0:i.isFlag()))&&(a===u||u.contains(a)||a===s||!t.isMoveableElement(a)&&!t.controlBox.contains(a)||(0,o.nB)(a,"moveable-area")||(0,o.nB)(a,"moveable-padding")||(0,o.nB)(a,"moveable-edgeDraggable"))}}function ne(t,e,r){var n=t.controlBox,i=[],o=t.props,a=o.dragArea,s=t.state.target,u=o.dragTarget;i.push(n),(!a||u)&&i.push(e),!a&&u&&s&&e!==s&&o.dragTargetSelf&&i.push(s);var l=nt(t);return nn(t,i,"targetAbles",r,{dragStart:l,pinchStart:l})}function nr(t,e){var r=t.controlBox,n=[];n.push(r);var i=nt(t,!0),o=function(t,e){return void 0===e&&(e=t.inputEvent.target),e===r||!i(t,e)};return nn(t,n,"controlAbles",e,{dragStart:o,pinchStart:o})}function nn(t,e,r,n,i){void 0===i&&(i={});var a="targetAbles"===r,s=t.props,u=s.pinchOutside,l=s.pinchThreshold,c=s.preventClickEventOnDrag,f=s.preventClickDefault,d=s.checkInput,g=s.dragFocusedInput,h=s.preventDefault,v=s.preventRightClick,m=s.preventWheelClick,b={preventDefault:void 0===h||h,preventRightClick:void 0===v||v,preventWheelClick:void 0===m||m,container:rh(s.dragContainer,!0)||(0,o.zk)(t.getControlBoxElement()),pinchThreshold:l,pinchOutside:u,preventClickEventOnDrag:!!a&&c,preventClickEventOnDragStart:!!a&&f,preventClickEventByCondition:a?null:function(e){return t.controlBox.contains(e.target)},checkInput:!!a&&d,dragFocusedInput:g},y=new p.A(e,b),E="Control"===n;return["drag","pinch"].forEach(function(e){["Start","","End"].forEach(function(o){y.on("".concat(e).concat(o),function(a){var s,u=a.eventType,l="drag"===e&&a.isPinch;if(i[u]&&!i[u](a)){a.stop();return}if(!l){var c=S([],x(t[r]),!1);r9(t,c,"drag"===e?[e]:["drag",e],n,o,a)?(t.props.stopPropagation||"Start"===o&&E)&&(null===(s=null==a?void 0:a.inputEvent)||void 0===s||s.stopPropagation()):a.stop()}})})}),y}var ni=function(){function t(t,e,r){var n=this;this.target=t,this.moveable=e,this.eventName=r,this.ables=[],this._onEvent=function(t){var e=n.eventName,r=n.moveable;!r.state.disableNativeEvent&&n.ables.forEach(function(n){n[e](r,{inputEvent:t})})},t.addEventListener(r.toLowerCase(),this._onEvent)}return t.prototype.setAbles=function(t){this.ables=t},t.prototype.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function no(t,e,r,n,i,s){void 0===s&&(s=[]);var u=1,l=[0,0],c=eK(),f=eK(),p=eK(),d=eK(),g=[0,0],h={},v=function(t,e,r,n){void 0===r&&(r=e);var i=0,s=0,u=0,l={},c=eV(t);if(t&&(i=c.offsetWidth,s=c.offsetHeight),t){var f,p,d,g,h,v,m,y,E,D,R,C,M,z,O,T,w,G,P,B,k,I,_,F,A,N,q,Y,W,H,L,j,V=(void 0===(f=r)&&(f=e),g=(d=td(t,e)).matrixes,h=d.is3d,v=d.targetMatrix,m=d.transformOrigin,y=d.targetOrigin,E=d.offsetContainer,D=d.hasFixed,R=d.zoom,M=(C=function(t,e){if(tv){var r=(0,o.I6)(tv,function(r){return r[0][0]==t&&r[0][1]==e});if(r)return r[1]}var n=td(t,e,!0);return tv&&tv.push([[t,e],n]),n}(E,f)).matrixes,z=C.is3d,O=C.offsetContainer,T=C.zoom,G=(w=n||z||h)?4:3,P="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,B=v,k=(0,a.k8)(G),I=(0,a.k8)(G),_=(0,a.k8)(G),F=(0,a.k8)(G),A=g.length,N=M.map(function(t){return b(b({},t),{matrix:t.matrix?S([],x(t.matrix),!1):void 0})}).reverse(),g.reverse(),!h&&w&&(B=(0,a._C)(B,3,4),e_(g)),!z&&w&&e_(N),N.forEach(function(t){I=(0,a.lw)(I,t.matrix,G)}),q=f||(0,o.uD)(t),Y=(null===(p=N[0])||void 0===p?void 0:p.target)||ek(q,q,!0).offsetParent,W=N.slice(1).reduce(function(t,e){return(0,a.lw)(t,e.matrix,G)},(0,a.k8)(G)),g.forEach(function(t,e){if(A-2===e&&(_=k.slice()),A-1===e&&(F=k.slice()),!t.matrix){var r=function(t,e,r,n,i){var s,u=t.target,l=t.origin,c=e.matrix,f=eV(u),p=f.offsetWidth,d=f.offsetHeight,g=r.getBoundingClientRect(),h=[0,0];r===(0,o.uD)(r)&&(h=eI(u,!0));for(var v=u.getBoundingClientRect(),m=v.left-g.left+r.scrollLeft-(r.clientLeft||0)+h[0],b=v.top-g.top+r.scrollTop-(r.clientTop||0)+h[1],S=v.width,y=v.height,E=(0,a.B4)(n,i,c),D=eY(eq(E,p,d,n)),R=D.left,C=D.top,M=D.width,z=D.height,O=eN(E,l,n),T=(0,a.Rd)(O,[R,C]),w=[m+T[0]*S/M,b+T[1]*y/z],G=[0,0],P=0;++P<10;){var B=(0,a.B8)(i,n);s=x((0,a.Rd)(eN(B,w,n),eN(B,O,n)),2),G[0]=s[0],G[1]=s[1];var k=eY(eq((0,a.B4)(n,i,(0,a.GD)(G,n),c),p,d,n)),I=k.left,_=k.top,F=I-m,A=_-b;if(2>rD(F)&&2>rD(A))break;w[0]-=F,w[1]-=A}return G.map(function(t){return Math.round(t)})}(t,g[e+1],Y,G,(0,a.lw)(W,k,G));t.matrix=(0,a.GD)(r,G)}k=(0,a.lw)(k,t.matrix,G)}),H=!P&&h,B||(B=(0,a.k8)(H?4:3)),L=eF(P&&16===B.length?(0,a._C)(B,4,3):B,H),j=I,{hasZoom:1!==R||1!==T,hasFixed:D,matrixes:g,rootMatrix:I=(0,a.bn)(I,G,G),originalRootMatrix:j,beforeMatrix:_,offsetMatrix:F,allMatrix:k,targetMatrix:B,targetTransform:L,inlineTransform:t.style.transform,transformOrigin:m,targetOrigin:y,is3d:w,offsetContainer:E,offsetRootContainer:O}),U=X(V.allMatrix,V.transformOrigin,i,s);l=b(b({},V),U);var K=X(V.allMatrix,[50,50],100,100);u=eU([K.pos1,K.pos2],K.direction)}var Z=n?4:3;return b(b(b({hasZoom:!1,width:i,height:s,rotation:u},c),{originalRootMatrix:(0,a.k8)(Z),rootMatrix:(0,a.k8)(Z),beforeMatrix:(0,a.k8)(Z),offsetMatrix:(0,a.k8)(Z),allMatrix:(0,a.k8)(Z),targetMatrix:(0,a.k8)(Z),targetTransform:"",inlineTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!n,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null,matrixes:[]}),l)}(e,r,i,!0);if(e){var m=tb(e);s.forEach(function(t){h[t]=m(t)});var y=v.is3d?4:3,E=X(v.offsetMatrix,(0,a.tY)(v.transformOrigin,(0,a.$z)(v.targetMatrix,y)),v.width,v.height);u=E.direction,l=(0,a.tY)(E.origin,[E.left-v.left,E.top-v.top]),d=eQ(v.offsetRootContainer);var D=ek(n,n,!0).offsetParent||v.offsetRootContainer;if(v.hasZoom){var R=X((0,a.lw)(v.originalRootMatrix,v.allMatrix),v.transformOrigin,v.width,v.height),C=X(v.originalRootMatrix,eP(tb(D)("transformOrigin")).map(function(t){return parseFloat(t)}),D.offsetWidth,D.offsetHeight);if(c=e$(R,d),p=e$(C,d,D,!0),t){var M=R.left,z=R.top;f=e$({left:M,top:z,bottom:z,right:z},d)}}else{c=eQ(e),p=function(t){var e=null==th?void 0:th.get(t);if(e)return e;var r=eQ(t,!0);return th&&th.set(t,r),r}(D),t&&(f=eQ(t));var O=p.left,T=p.top,w=p.clientLeft,G=p.clientTop,P=[c.left-O,c.top-T];g=(0,a.Rd)(ru(v.rootMatrix,P,4),[w+v.left,G+v.top])}}return b({targetClientRect:c,containerClientRect:p,moveableClientRect:f,rootContainerClientRect:d,beforeDirection:u,beforeOrigin:l,originalBeforeOrigin:l,target:e,style:h,offsetDelta:g},v)}function na(t){var e=t.pos1,r=t.pos2,n=t.pos3,i=t.pos4;if(!e||!r||!n||!i)return null;var o=(0,c.Qk)([e,r,n,i]),s=[o.minX,o.minY],u=(0,a.Rd)(t.origin,s);return e=(0,a.Rd)(e,s),r=(0,a.Rd)(r,s),n=(0,a.Rd)(n,s),i=(0,a.Rd)(i,s),b(b({},t),{left:t.left,top:t.top,posDelta:s,pos1:e,pos2:r,pos3:n,pos4:i,origin:u,beforeOrigin:u,isPersisted:!0})}var ns=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=b({container:null,gestos:{},renderLines:[[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]],[[0,0],[0,0]]],renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1,posDelta:[0,0]},no(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isMoveableMounted=!1,e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new g.A,e._prevOriginalDragTarget=null,e._originalDragTarget=null,e._prevDragTarget=null,e._dragTarget=null,e._prevPropTarget=null,e._propTarget=null,e._prevDragArea=!1,e._isPropTargetChanged=!1,e._hasFirstTarget=!1,e._reiszeObserver=null,e._observerId=0,e._mutationObserver=null,e._rootContainer=null,e._viewContainer=null,e._viewClassNames=[],e._store={},e.checkUpdateRect=function(){if(!e.isDragging()){var t=e.props.parentMoveable;if(t){t.checkUpdateRect();return}(0,o.uU)(e._observerId),e._observerId=(0,o.xi)(function(){!e.isDragging()&&e.updateRect()})}},e._onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e}return m(e,t),e.prototype.render=function(){var t=this.props,e=this.getState(),r=t.parentPosition,n=t.className,o=t.target,a=t.zoom,s=t.cspNonce,u=t.translateZ,l=t.cssStyled,c=t.groupable,p=t.linePadding,d=t.controlPadding;this._checkUpdateRootContainer(),this.checkUpdate(),this.updateRenderPoses();var g=x(r||[0,0],2),h=g[0],v=g[1],m=e.left,S=e.top,y=e.target,E=e.direction,D=e.hasFixed,R=e.offsetDelta,C=t.targets,M=this.isDragging(),z={};this.getEnabledAbles().forEach(function(t){z["data-able-".concat(t.name.toLowerCase())]=!0});var O=this._getAbleClassName(),T=C&&C.length&&(y||c)||o||!this._hasFirstTarget&&this.state.isPersisted,w=this.controlBox||this.props.firstRenderState||this.props.persistData,G=[m-h,S-v];!c&&t.useAccuratePosition&&(G[0]+=R[0],G[1]+=R[1]);var P={position:D?"fixed":"absolute",display:T?"block":"none",visibility:w?"visible":"hidden",transform:"translate3d(".concat(G[0],"px, ").concat(G[1],"px, ").concat(u,")"),"--zoom":a,"--zoompx":"".concat(a,"px")};return p&&(P["--moveable-line-padding"]=p),d&&(P["--moveable-control-padding"]=d),f.createElement(l,b({cspNonce:s,ref:(0,i.KR)(this,"controlBox"),className:"".concat(eT("control-box",-1===E?"reverse":"",M?"dragging":"")," ").concat(O," ").concat(n)},z,{onClick:this._onPreventClick,style:P}),this.renderAbles(),this._renderLines())},e.prototype.componentDidMount=function(){this.isMoveableMounted=!0,this.isUnmounted=!1;var t=this.props,e=t.parentMoveable,r=t.container;this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(this.props),r||e||this.state.isPersisted||(this.updateRect("",!1,!1),this.forceUpdate())},e.prototype.componentDidUpdate=function(t){this._checkUpdateRootContainer(),this._checkUpdateViewContainer(),this._updateNativeEvents(),this._updateTargets(),this._updateEvents(),this.updateCheckInput(),this._updateObserver(t)},e.prototype.componentWillUnmount=function(){this.isMoveableMounted=!1,this.isUnmounted=!0,this._emitter.off(),null===(t=this._reiszeObserver)||void 0===t||t.disconnect(),null===(e=this._mutationObserver)||void 0===e||e.disconnect(),this._viewContainer&&this._changeAbleViewClassNames([]),e4(this,!1),e4(this,!0);var t,e,r=this.events;for(var n in r){var i=r[n];i&&i.destroy()}},e.prototype.getTargets=function(){var t=this.props.target;return t?[t]:[]},e.prototype.getAble=function(t){var e=this.props.ables||[];return(0,o.I6)(e,function(e){return e.name===t})},e.prototype.getContainer=function(){var t=this.props,e=t.parentMoveable,r=t.wrapperMoveable;return t.container||r&&r.getContainer()||e&&e.getContainer()||this.controlBox.parentElement},e.prototype.getControlBoxElement=function(){return this.controlBox},e.prototype.getDragElement=function(){return this._dragTarget},e.prototype.isMoveableElement=function(t){var e;return t&&((null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"class"))||"").indexOf(k)>-1},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var r=this.targetGesto,n=this.controlGesto;return r&&nt(this)({inputEvent:t},e)?r.isFlag()||r.triggerDragStart(t):n&&this.isMoveableElement(e)&&!n.isFlag()&&n.triggerDragStart(t),this},e.prototype.hitTest=function(t){var e,r=this.state,n=r.target,i=r.pos1,a=r.pos2,s=r.pos3,u=r.pos4,l=r.targetClientRect;if(!n)return 0;if((0,o.Ll)(t)){var f=t.getBoundingClientRect();e={left:f.left,top:f.top,width:f.width,height:f.height}}else e=b({width:0,height:0},t);var p=e.left,d=e.top,g=e.width,h=e.height,v=(0,c.FV)([i,a,u,s],l),m=(0,c.tT)(v,[[p,d],[p+g,d],[p+g,d+h],[p,d+h]]),x=(0,c.B9)(v);return m&&x?Math.min(100,m/x*100):0},e.prototype.isInside=function(t,e){var r=this.state,n=r.target,i=r.pos1,o=r.pos2,a=r.pos3,s=r.pos4,u=r.targetClientRect;return!!n&&(0,c.FK)([t,e],(0,c.FV)([i,o,s,a],u))},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0);var n=this.props,i=!n.parentPosition&&!n.wrapperMoveable;i&&tm(!0);var o=n.parentMoveable,a=this.state.target||n.target,s=this.getContainer(),u=o?o._rootContainer:this._rootContainer,l=no(this.controlBox,a,s,s,u||s,this._getRequestStyles());if(!a&&this._hasFirstTarget&&n.persistData){var c=na(n.persistData);for(var f in c)l[f]=c[f]}i&&tm(),this.updateState(l,!o&&r)},e.prototype.isDragging=function(t){var e,r,n=this.targetGesto,i=this.controlGesto;if(null==n?void 0:n.isFlag()){if(!t)return!0;var o=n.getEventData();return!!(null===(e=o[t])||void 0===e?void 0:e.isEventStart)}if(null==i?void 0:i.isFlag()){if(!t)return!0;var o=i.getEventData();return!!(null===(r=o[t])||void 0===r?void 0:r.isEventStart)}return!1},e.prototype.updateTarget=function(t){this.updateRect(t,!0)},e.prototype.getRect=function(){var t=this.state,e=e2(this.state),r=x(e,4),n=r[0],i=r[1],o=r[2],s=r[3],u=eY(e),l=t.width,c=t.height,f=u.width,p=u.height,d=u.left,g=u.top,h=[t.left,t.top],v=(0,a.tY)(h,t.origin);return{width:f,height:p,left:d,top:g,pos1:n,pos2:i,pos3:o,pos4:s,offsetWidth:l,offsetHeight:c,beforeOrigin:(0,a.tY)(h,t.beforeOrigin),origin:v,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},e.prototype.getManager=function(){return this},e.prototype.stopDrag=function(t){if(!t||"target"===t){var e=this.targetGesto;(null==e?void 0:e.isIdle())===!1&&e3(this,!1),null==e||e.stop()}if(!t||"control"===t){var e=this.controlGesto;(null==e?void 0:e.isIdle())===!1&&e3(this,!0),null==e||e.stop()}},e.prototype.getRotation=function(){var t,e=this.state,r=e.pos1,n=e.pos2,i=e.direction;return t=(0,o.Mu)(r,n)/Math.PI*180,t=(t=i>=0?t:180-t)>=0?t:360+t},e.prototype.request=function(t,e,r){void 0===e&&(e={});var n=this,i=n.props,a=i.parentMoveable||i.wrapperMoveable||n,s=a.props.ables,u=i.groupable,l=(0,o.I6)(s,function(e){return e.name===t});if(this.isDragging()||!l||!l.request)return{request:function(){return this},requestEnd:function(){return this}};var c=l.request(n),f=r||e.isInstant,p=c.isControl?"controlAbles":"targetAbles",d="".concat(u?"Group":"").concat(c.isControl?"Control":""),g=S([],x(a[p]),!1),h={request:function(e){return r9(n,g,["drag"],d,"",b(b({},c.request(e)),{requestAble:t,isRequest:!0}),f),h},requestEnd:function(){return r9(n,g,["drag"],d,"End",b(b({},c.requestEnd()),{requestAble:t,isRequest:!0}),f),h}};return r9(n,g,["drag"],d,"Start",b(b({},c.requestStart(e)),{requestAble:t,isRequest:!0}),f),f?h.request(e).requestEnd():h},e.prototype.getMoveables=function(){return[this]},e.prototype.destroy=function(){this.componentWillUnmount()},e.prototype.updateRenderPoses=function(){var t=this.getState(),e=this.props,r=e.padding,n=t.originalBeforeOrigin,i=t.transformOrigin,o=t.allMatrix,s=t.is3d,u=t.pos1,l=t.pos2,c=t.pos3,f=t.pos4,p=t.left,d=t.top,g=t.isPersisted,h=e.zoom||1;if(!r&&h<=1){t.renderPoses=[u,l,c,f],t.renderLines=[[u,l],[l,f],[f,c],[c,u]];return}var v=rC(r||{}),m=v.left,b=v.top,x=v.bottom,S=v.right,y=s?4:3,E=[];E=g?i:this.controlBox&&e.groupable?n:(0,a.tY)(n,[p,d]);var D=(0,a.B4)(y,(0,a.GD)(E.map(function(t){return-t}),y),o,(0,a.GD)(i,y)),R=rc(D,u,[-m,-b],y),C=rc(D,l,[S,-b],y),M=rc(D,c,[-m,x],y),z=rc(D,f,[S,x],y);if(t.renderPoses=[R,C,M,z],t.renderLines=[[R,C],[C,z],[z,M],[M,R]],h){var O=h/2;t.renderLines=[[rc(D,u,[-m-O,-b],y),rc(D,l,[S+O,-b],y)],[rc(D,l,[S,-b-O],y),rc(D,f,[S,x+O],y)],[rc(D,f,[S+O,x],y),rc(D,c,[-m-O,x],y)],[rc(D,c,[-m,x+O],y),rc(D,u,[-m,-b-O],y)]]}},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1;var t=this.props,e=t.target,r=t.container,n=t.parentMoveable,i=this.state,o=i.target,a=i.container;if(o||e){this.updateAbles();var s=!rn(o,e);if(s||!rn(a,r)){var u=r||this.controlBox;u&&this.unsetAbles(),this.updateState({target:e,container:r}),!n&&u&&this.updateRect("End",!1,!1),this._isPropTargetChanged=s}}},e.prototype.waitToChangeTarget=function(){return new Promise(function(){})},e.prototype.triggerEvent=function(t,e){var r=this.props;if(this._emitter.trigger(t,e),r.parentMoveable&&e.isRequest&&!e.isRequestChild)return r.parentMoveable.triggerEvent(t,e,!0);var n=r[t];return n&&n(e)},e.prototype.useCSS=function(t,e){var r=this.props.customStyledMap,n=t+e;return r[n]||(r[n]=(0,d.I4)(t,e)),r[n]},e.prototype.getState=function(){var t,e=this.props;(e.target||(null===(t=e.targets)||void 0===t?void 0:t.length))&&(this._hasFirstTarget=!0);var r=this.controlBox,n=e.persistData,i=e.firstRenderState;if(i&&!r)return i;if(!this._hasFirstTarget&&n){var o=na(n);if(o)return this.updateState(o,!1),this.state}return this.state.isPersisted=!1,this.state},e.prototype.updateSelectors=function(){},e.prototype.unsetAbles=function(){var t=this;this.targetAbles.forEach(function(e){e.unset&&e.unset(t)})},e.prototype.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var r=this.props.triggerAblesSimultaneously,n=this.getEnabledAbles(t),i="drag".concat(e,"Start"),o="pinch".concat(e,"Start"),a="drag".concat(e,"ControlStart"),s=rr(n,[i,o],r),u=rr(n,[a],r);this.enabledAbles=n,this.targetAbles=s,this.controlAbles=u},e.prototype.updateState=function(t,e){if(e)!this.isUnmounted&&this.setState(t);else{var r=this.state;for(var n in t)r[n]=t[n]}},e.prototype.getEnabledAbles=function(t){void 0===t&&(t=this.props.ables);var e=this.props;return t.filter(function(t){return t&&(t.always&&!1!==e[t.name]||e[t.name])})},e.prototype.renderAbles=function(){var t,e,r,n=this,i=this.props.triggerAblesSimultaneously,o={createElement:f.createElement};return this.renderState={},(t=ra(rr(this.getEnabledAbles(),["render"],i).map(function(t){return(0,t.render)(n,o)||[]})).filter(function(t){return t}),e=[],r={},t.forEach(function(t,n){var i=t.key,o=r[i];o||(o=[],r[i]=o,e.push(o)),o.push(t)}),e).map(function(t){return t[0]})},e.prototype.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},e.prototype._getRequestStyles=function(){return this.getEnabledAbles().reduce(function(t,e){var r,n,i=null!==(n=null===(r=e.requestStyle)||void 0===r?void 0:r.call(e))&&void 0!==n?n:[];return S(S([],x(t),!1),x(i),!1)},S([],x(this.props.requestStyles||[]),!1))},e.prototype._updateObserver=function(t){this._updateResizeObserver(t),this._updateMutationObserver(t)},e.prototype._updateEvents=function(){var t=this.targetAbles.length,e=this.controlAbles.length,r=this._dragTarget;(!t&&this.targetGesto||this._isTargetChanged(!0))&&(e4(this,!1),this.updateState({gestos:{}})),e||e4(this,!0),r&&t&&!this.targetGesto&&(this.targetGesto=ne(this,r,"")),!this.controlGesto&&e&&(this.controlGesto=nr(this,"Control"))},e.prototype._updateTargets=function(){var t=this.props;this._prevPropTarget=this._propTarget,this._prevDragTarget=this._dragTarget,this._prevOriginalDragTarget=this._originalDragTarget,this._prevDragArea=t.dragArea,this._propTarget=t.target,this._originalDragTarget=t.dragTarget||t.target,this._dragTarget=rh(this._originalDragTarget,!0)},e.prototype._renderLines=function(){var t=this.props,e=t.zoom,r=t.hideDefaultLines,n=t.hideChildMoveableDefaultLines,i=t.parentMoveable;if(r||i&&n)return[];var o=this.getState(),a={createElement:f.createElement};return o.renderLines.map(function(t,r){return tC(a,"",t[0],t[1],e,"render-line-".concat(r))})},e.prototype._isTargetChanged=function(t){var e=this.props,r=e.dragTarget||e.target,n=this._prevOriginalDragTarget,i=this._prevDragArea,o=e.dragArea;return!o&&n!==r||(t||o)&&i!==o||this._prevPropTarget!=this._propTarget},e.prototype._updateNativeEvents=function(){var t=this,e=this.props.dragArea?this.areaElement:this.state.target,r=this.events,n=(0,o.xD)(r);if(this._isTargetChanged())for(var i in r){var a=r[i];a&&a.destroy(),r[i]=null}if(e){var s=this.enabledAbles;n.forEach(function(n){var i=rr(s,[n]),o=i.length>0,a=r[n];if(!o){a&&(a.destroy(),r[n]=null);return}a||(a=new ni(e,t,n),r[n]=a),a.setAbles(i)})}},e.prototype._checkUpdateRootContainer=function(){var t=this.props.rootContainer;!this._rootContainer&&t&&(this._rootContainer=rh(t,!0))},e.prototype._checkUpdateViewContainer=function(){var t=this.props.viewContainer;!this._viewContainer&&t&&(this._viewContainer=rh(t,!0)),this._viewContainer&&this._changeAbleViewClassNames(S(S([],x(this._getAbleViewClassNames()),!1),[this.isDragging()?rI:""],!1))},e.prototype._changeAbleViewClassNames=function(t){var e=this._viewContainer,r=ro(t.filter(Boolean),function(t){return t}).map(function(t){return x(t,1)[0]}),n=this._viewClassNames,i=(0,h.U)(n,r),a=i.removed,s=i.added;a.forEach(function(t){(0,o.vy)(e,n[t])}),s.forEach(function(t){(0,o.iQ)(e,r[t])}),this._viewClassNames=r},e.prototype._getAbleViewClassNames=function(){var t=this;return(this.getEnabledAbles().map(function(e){var r;return(null===(r=e.viewClassName)||void 0===r?void 0:r.call(e,t))||""}).join(" ")+" ".concat(this._getAbleClassName("-view"))).split(/\s+/g)},e.prototype._getAbleClassName=function(t){var e=this;void 0===t&&(t="");var r=this.getEnabledAbles(),n=this.targetGesto,i=this.controlGesto,o=(null==n?void 0:n.isFlag())?n.getEventData():{},a=(null==i?void 0:i.isFlag())?i.getEventData():{};return r.map(function(r){var n,i,s,u=r.name,l=(null===(n=r.className)||void 0===n?void 0:n.call(r,e))||"";return((null===(i=o[u])||void 0===i?void 0:i.isEventStart)||(null===(s=a[u])||void 0===s?void 0:s.isEventStart))&&(l+=" ".concat(eT("".concat(u).concat(t,"-dragging")))),l.trim()}).filter(Boolean).join(" ")},e.prototype._updateResizeObserver=function(t){var e,r=this.props,n=r.target,i=(0,o.zk)(this.getControlBoxElement());if(!i.ResizeObserver||!n||!r.useResizeObserver){null===(e=this._reiszeObserver)||void 0===e||e.disconnect();return}if(t.target!==n||!this._reiszeObserver){var a=new i.ResizeObserver(this.checkUpdateRect);a.observe(n,{box:"border-box"}),this._reiszeObserver=a}},e.prototype._updateMutationObserver=function(t){var e,r=this,n=this.props,i=n.target,a=(0,o.zk)(this.getControlBoxElement());if(!a.MutationObserver||!i||!n.useMutationObserver){null===(e=this._mutationObserver)||void 0===e||e.disconnect();return}if(t.target!==i||!this._mutationObserver){var s=new a.MutationObserver(function(t){var e,n;try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),o=i.next();!o.done;o=i.next()){var a=o.value;"attributes"===a.type&&"style"===a.attributeName&&r.checkUpdateRect()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}});s.observe(i,{attributes:!0}),this._mutationObserver=s}},e.defaultProps={dragTargetSelf:!1,target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,isWrapperMounted:!1,parentPosition:null,warpSelf:!1,svgOrigin:"",dragContainer:null,useResizeObserver:!1,useMutationObserver:!1,preventDefault:!0,preventRightClick:!0,preventWheelClick:!0,linePadding:0,controlPadding:0,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,dragFocusedInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},stopPropagation:!1,preventClickDefault:!1,preventClickEventOnDrag:!0,flushSync:ew,firstRenderState:null,persistData:null,viewContainer:null,requestStyles:[],useAccuratePosition:!1},e}(f.PureComponent),nu={name:"groupable",props:["defaultGroupRotate","useDefaultGroupRotate","defaultGroupOrigin","groupable","groupableProps","targetGroups","hideChildMoveableDefaultLines"],events:[],render:function(t,e){var r,n=t.props,o=n.targets||[],s=t.getState(),u=s.left,l=s.top,c=s.isPersisted,f=n.zoom||1,p=t.renderGroupRects,d=(null===(r=n.persistData)||void 0===r?void 0:r.children)||[];c?o=d.map(function(){return null}):d=[];var g=ry(t,"parentPosition",[u,l],function(t){return t.join(",")}),h=ry(t,"requestStyles",t.getRequestChildStyles(),function(t){return t.join(",")});return t.moveables=t.moveables.slice(0,o.length),S(S([],x(o.map(function(r,o){return e.createElement(ns,{key:"moveable"+o,ref:(0,i.DY)(t,"moveables",o),target:r,origin:!1,requestStyles:h,cssStyled:n.cssStyled,customStyledMap:n.customStyledMap,useResizeObserver:n.useResizeObserver,useMutationObserver:n.useMutationObserver,hideChildMoveableDefaultLines:n.hideChildMoveableDefaultLines,parentMoveable:t,parentPosition:[u,l],persistData:d[o],zoom:f})})),!1),x(ra(p.map(function(t,r){var n=[t.pos1,t.pos2,t.pos3,t.pos4];return[[0,1],[1,3],[3,2],[2,0]].map(function(t,i){var o=x(t,2),s=o[0],u=o[1];return tC(e,"",(0,a.Rd)(n[s],g),(0,a.Rd)(n[u],g),f,"group-rect-".concat(r,"-").concat(i))})}))),!1)}},nl=y("clickable",{props:["clickable"],events:["click","clickGroup"],always:!0,dragRelation:"weak",dragStart:function(){},dragControlStart:function(){},dragGroupStart:function(t,e){e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){var r=t.props.target,n=e.inputEvent,i=e.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.contains(i);if(!(!n||!i||e.isDrag||t.isMoveableElement(i))&&!o){var a=r.contains(i);rt(t,"onClick",e6(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:r===i,moveableTarget:t.props.target,containsTarget:a}))}},dragGroupEnd:function(t,e){var r=e.inputEvent,n=e.inputTarget;if(!(!r||!n||e.isDrag||t.isMoveableElement(n))&&e.datas.inputTarget!==n){var i=t.props.targets,a=i.indexOf(n),s=a>-1,u=!1;-1===a&&(u=(a=(0,o.SL)(i,function(t){return t.contains(n)}))>-1),rt(t,"onClickGroup",e6(t,e,{isDouble:e.isDouble,targets:i,inputTarget:n,targetIndex:a,isTarget:s,containsTarget:u,moveableTarget:i[a]}))}},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)}});function nc(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),b(b({},t),{datas:e})}var nf=y("edgeDraggable",{css:[".edge.edgeDraggable.line {\ncursor: move;\n}"],render:function(t,e){var r=t.props,n=r.edgeDraggable;return n?tM(e,"edgeDraggable",n,t.getState().renderPoses,r.zoom):[]},dragCondition:function(t,e){var r,n=t.props,i=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!!n.edgeDraggable&&!!i&&!n.draggable&&(0,o.nB)(i,eT("direction"))&&(0,o.nB)(i,eT("edge"))&&(0,o.nB)(i,eT("edgeDraggable"))},dragStart:function(t,e){return en.dragStart(t,nc(e))},drag:function(t,e){return en.drag(t,nc(e))},dragEnd:function(t,e){return en.dragEnd(t,nc(e))},dragGroupCondition:function(t,e){var r,n=t.props,i=null===(r=e.inputEvent)||void 0===r?void 0:r.target;return!!n.edgeDraggable&&!!i&&!n.draggable&&(0,o.nB)(i,eT("direction"))&&(0,o.nB)(i,eT("line"))},dragGroupStart:function(t,e){return en.dragGroupStart(t,nc(e))},dragGroup:function(t,e){return en.dragGroup(t,nc(e))},dragGroupEnd:function(t,e){return en.dragGroupEnd(t,nc(e))},unset:function(t){return en.unset(t)}}),np={name:"individualGroupable",props:["individualGroupable","individualGroupableProps"],events:[]},nd=[r6,rY,{name:"snappable",dragRelation:"strong",props:["snappable","snapContainer","snapDirections","elementSnapDirections","snapGap","snapGridWidth","snapGridHeight","isDisplaySnapDigit","isDisplayInnerSnapDigit","isDisplayGridGuidelines","snapDigit","snapThreshold","snapRenderThreshold","snapGridAll",tW,tH,tX,tL,"horizontalGuidelines","verticalGuidelines","elementGuidelines","bounds","innerBounds","snapDistFormat","maxSnapElementGuidelineDistance","maxSnapElementGapDistance"],events:["snap","bound"],css:[":host {\n--bounds-color: #d66;\n}\n.guideline {\npointer-events: none;\nz-index: 2;\n}\n.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}\n.guideline-group {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.guideline-group .size-value {\nposition: absolute;\ncolor: #f55;\nfont-size: 12px;\nfont-size: calc(12px * var(--zoom));\nfont-weight: bold;\n}\n.guideline-group.horizontal .size-value {\ntransform-origin: 50% 100%;\ntransform: translateX(-50%);\nleft: 50%;\nbottom: 5px;\nbottom: calc(2px + 3px * var(--zoom));\n}\n.guideline-group.vertical .size-value {\ntransform-origin: 0% 50%;\ntop: 50%;\ntransform: translateY(-50%);\nleft: 5px;\nleft: calc(2px + 3px * var(--zoom));\n}\n.guideline.gap {\nbackground: #f55;\n}\n.size-value.gap {\ncolor: #f55;\n}\n"],render:function(t,e){var r,n,i,o,a,s=t.state,u=s.top,l=s.left,c=s.pos1,f=s.pos2,p=s.pos3,d=s.pos4,g=s.snapRenderInfo,h=t.props.snapRenderThreshold,v=void 0===h?1:h;if(!g||!g.render||!tN(t,""))return ry(t,"boundMap",tA(),function(t){return JSON.stringify(t)}),ry(t,"innerBoundMap",tA(),function(t){return JSON.stringify(t)}),[];s.guidelines=em(t);var m=Math.min(c[0],f[0],p[0],d[0]),y=Math.min(c[1],f[1],p[1],d[1]),E=g.externalPoses||[],D=e2(t.state),R=[],C=[],M=[],z=[],O=[],T=eY(D),w=T.width,G=T.height,P=T.top,B=T.left,k=T.bottom,I=T.right,_={left:B,right:I,top:P,bottom:k,center:(B+I)/2,middle:(P+k)/2},F=E.length>0,A=F?eY(E):{};if(!g.request){if(g.direction&&O.push((N=t,q=D,Y=g.direction,W=v,H=v,L=[],Y[0]&&Y[1]?L=[Y,[-Y[0],Y[1]],[Y[0],-Y[1]]]:Y[0]||Y[1]?N.props.keepRatio?L.push([-1,-1],[-1,1],[1,-1],[1,1],Y):(L.push.apply(L,S([],x((X=[[-1,-1],[1,-1],[-1,-1],[1,1]],Q(Y).map(function(t){return X[t]}))),!1)),L.length>1&&L.push([(L[0][0]+L[1][0])/2,(L[0][1]+L[1][1])/2])):[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(function(t,e,r){var n=r[e+1]||r[0];L.push(t),L.push([(t[0]+n[0])/2,(t[1]+n[1])/2])}),V=tj(N,(j=L.map(function(t){return tt(q,t)})).map(function(t){return t[0]}),j.map(function(t){return t[1]}),L.map(function(t){return tU(t[0])}),L.map(function(t){return tU(t[1])}),W,H),U=tU(L.map(function(t){return t[0]})[V.vertical.index]),K=tU(L.map(function(t){return t[1]})[V.horizontal.index]),{vertical:b(b({},V.vertical),{direction:U}),horizontal:b(b({},V.horizontal),{direction:K})})),g.snap){var N,q,Y,W,H,X,L,j,V,U,K,Z=eY(D);g.center&&(Z.middle=(Z.top+Z.bottom)/2,Z.center=(Z.left+Z.right)/2),O.push(tK(t,Z,v,v))}F&&(g.center&&(A.middle=(A.top+A.bottom)/2,A.center=(A.left+A.right)/2),O.push(tK(t,A,v,v))),O.forEach(function(t){var e=t.vertical.posInfos,r=t.horizontal.posInfos;R.push.apply(R,S([],x(e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),!1)),C.push.apply(C,S([],x(r.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),!1)),M.push.apply(M,S([],x(eM(e)),!1)),z.push.apply(z,S([],x(eM(r)),!1))})}var $=ez(t,[B,I],[P,k],R,C),J=$.boundMap,te=$.innerBoundMap;F&&ez(t,[A.left,A.right],[A.top,A.bottom],R,C,g.externalBounds);var tr=S(S([],x(M),!1),x(z),!1),tn=tr.filter(function(t){return t.element&&!t.gapRects}),ti=tr.filter(function(t){return t.gapRects}).sort(function(t,e){return t.gap-e.gap});rt(t,"onSnap",{guidelines:tr.filter(function(t){return!t.element}),elements:tn,gaps:ti},!0);var to=ry(t,"boundMap",J,function(t){return JSON.stringify(t)},tA()),ta=ry(t,"innerBoundMap",te,function(t){return JSON.stringify(t)},tA());return(J===to||te===ta)&&rt(t,"onBound",{bounds:J,innerBounds:te},!0),S(S(S(S(S(S([],x((r=[m,y],n=t.props.isDisplayInnerSnapDigit,i=[],["vertical","horizontal"].forEach(function(o){var a,s,u,l,c,f=tn.filter(function(t){return t.type===o}),p=+("vertical"===o),d=+!p,g=(a=+("vertical"!==o),s=+("vertical"===o),l=_[(u=a?t_:tF).start],c=_[u.end],ro(f,function(t){return t.pos[a]}).map(function(t){var e=[],r=[];return t.forEach(function(t){var i,f,p=t.element,d=t.elementRect.rect;if(d[u.end]<l)e.push(t);else if(c<d[u.start])r.push(t);else if(d[u.start]<=l&&c<=d[u.end]&&n){var g=t.pos,h={element:p,rect:b(b({},d),((i={})[u.end]=d[u.start],i))},v={element:p,rect:b(b({},d),((f={})[u.start]=d[u.end],f))},m=[0,0],x=[0,0];m[a]=g[a],m[s]=g[s],x[a]=g[a],x[s]=g[s]+t.size,e.push({type:o,pos:m,size:0,elementRect:h,direction:"",elementDirection:"end"}),r.push({type:o,pos:x,size:0,elementRect:v,direction:"",elementDirection:"start"})}}),e.sort(function(t,e){return e.pos[s]-t.pos[s]}),r.sort(function(t,e){return t.pos[s]-e.pos[s]}),{total:t,start:e,end:r,inner:[]}})),h=p?tF:t_,v=p?t_:tF,m=_[h.start],x=_[h.end];g.forEach(function(n){var a=n.total,s=n.start,u=n.end,l=n.inner,c=r[d]+a[0].pos[d]-_[v.start],f=_;s.forEach(function(n){var a=n.elementRect.rect,s=f[h.start]-a[h.end];if(s>0){var u=[0,0];u[p]=r[p]+f[h.start]-m-s,u[d]=c,i.push(ev(t,o,"dashed",i.length,s,u,n.className,e))}f=a}),f=_,u.forEach(function(n){var a=n.elementRect.rect,s=a[h.start]-f[h.end];if(s>0){var u=[0,0];u[p]=r[p]+f[h.end]-m,u[d]=c,i.push(ev(t,o,"dashed",i.length,s,u,n.className,e))}f=a}),l.forEach(function(n){var a=n.elementRect.rect,s=m-a[h.start],u=a[h.end]-x,l=[0,0],f=[0,0];l[p]=r[p]-s,l[d]=c,f[p]=r[p]+x-m,f[d]=c,i.push(ev(t,o,"dashed",i.length,s,l,n.className,e)),i.push(ev(t,o,"dashed",i.length,u,f,n.className,e))})})}),i)),!1),x((o=[m,y],a=[],["horizontal","vertical"].forEach(function(r){var n=ti.filter(function(t){return t.type===r}).slice(0,1),i=+("vertical"!==r),s=+!i,u=i?tF:t_,l=i?t_:tF,c=_[u.start],f=_[u.end],p=_[l.start],d=_[l.end];n.forEach(function(r){var n=r.gap,g=r.gapRects,h=Math.max.apply(Math,S([p],x(g.map(function(t){return t.rect[l.start]})),!1)),v=Math.min.apply(Math,S([d],x(g.map(function(t){return t.rect[l.end]})),!1)),m=(h+v)/2;h!==v&&m!==(p+d)/2&&g.forEach(function(r){var l=r.rect,d=r.className,g=[o[0],o[1]];if(l[u.end]<c)g[i]+=l[u.end]-c;else{if(!(f<l[u.start]))return;g[i]+=l[u.start]-c-n}g[s]+=m-p,a.push(ev(t,i?"vertical":"horizontal","gap",a.length,n,g,d,e))})})}),a)),!1),x(eh(t,"horizontal",z,[l,u],_,e)),!1),x(eh(t,"vertical",M,[l,u],_,e)),!1),x(eg(t,"horizontal",C,m,u,w,0,e)),!1),x(eg(t,"vertical",R,y,l,G,1,e)),!1)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},ey(t)},drag:function(t){var e=t.state;ey(t)||(e.guidelines=em(t)),e.snapRenderInfo&&(e.snapRenderInfo.render=!0)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!!(eO(t,e)||ep(t,e))||(!e.isRequest&&e.inputEvent?(0,o.nB)(e.inputEvent.target,eT("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,ey(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ey(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var e=t.state;e.enableSnap=!1,e.guidelines=[],e.snapRenderInfo=null,e.elementRects=[]}},rM,en,nf,es,rO,rG,{name:"rotatable",canPinch:!0,props:["rotatable","rotationPosition","throttleRotate","renderDirections","rotationTarget","rotateAroundControls","edge","resolveAblesWithRotatable","displayAroundControls"],events:["rotateStart","beforeRotate","rotate","rotateEnd","rotateGroupStart","beforeRotateGroup","rotateGroup","rotateGroupEnd"],css:[".rotation {\nposition: absolute;\nheight: 40px;\nwidth: 1px;\ntransform-origin: 50% 100%;\nheight: calc(40px * var(--zoom));\ntop: auto;\nleft: 0;\nbottom: 100%;\nwill-change: transform;\n}\n.rotation .rotation-line {\ndisplay: block;\nwidth: 100%;\nheight: 100%;\ntransform-origin: 50% 50%;\n}\n.rotation .rotation-control {\nborder-color: #4af;\nborder-color: var(--moveable-color);\nbackground:#fff;\ncursor: alias;\n}\n:global .view-rotation-dragging, .rotatable.direction.control {\ncursor: alias;\n}\n.rotatable.direction.control.move {\ncursor: move;\n}\n"],viewClassName:function(t){return t.isDragging("rotatable")?eT("view-rotation-dragging"):""},render:function(t,e){var r=ej(t.props,"rotatable"),n=r.rotatable,i=r.rotationPosition,a=r.zoom,s=r.renderDirections,u=r.rotateAroundControls,l=r.resolveAblesWithRotatable,c=t.getState(),f=c.renderPoses,p=c.direction;if(!n)return null;var d=function t(e,r,n){var i=x(r,4),a=i[0],s=i[1],u=i[2],l=i[3];if("none"===e)return[];if((0,o.cy)(e))return e.map(function(e){return t(e,[a,s,u,l],n)[0]});var c=x((e||"top").split("-"),2),f=c[0],p=c[1],d=[a,s];"left"===f?d=[u,a]:"right"===f?d=[s,l]:"bottom"===f&&(d=[l,u]);var g=[(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2],h=eU(d,n);if(p){var v="top"===p||"left"===p,m="bottom"===f||"left"===f;g=d[v&&!m||!v&&m?0:1]}return[[g,h]]}(i,f,p),g=[];if(d.forEach(function(t,r){var n=x(t,2),i=n[0],o=n[1];g.push(e.createElement("div",{key:"rotation".concat(r),className:eT("rotation"),style:{transform:"translate(-50%) translate(".concat(i[0],"px, ").concat(i[1],"px) rotate(").concat(o,"rad)")}},e.createElement("div",{className:eT("line rotation-line"),style:{transform:"scaleX(".concat(a,")")}}),e.createElement("div",{className:eT("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(a,")")}})))}),s){var h=(0,o.xD)(l||{}),v={};h.forEach(function(t){l[t].forEach(function(e){v[e]=t})});var m=[];(0,o.cy)(s)&&(m=s.map(function(t){var e=v[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}})),g.push.apply(g,S([],x(tD(t,"rotatable",m,e)),!1))}return u&&g.push.apply(g,S([],x(tO(t,e)),!1)),g},dragControlCondition:ep,dragControlStart:function(t,e){var r,n,i,s,u,l,c,f,p,d,g,h=e.datas,v=e.clientX,m=e.clientY,S=e.parentRotate,y=e.parentFlag,E=e.isPinch,D=e.isRequest,R=t.state,C=R.target,M=R.left,z=R.top,O=R.direction,T=R.beforeDirection,w=R.targetTransform,G=R.moveableClientRect,P=R.offsetMatrix,B=R.targetMatrix,k=R.allMatrix,I=R.width,_=R.height;if(!D&&!C)return!1;var F=t.getRect();h.rect=F,h.transform=w,h.left=M,h.top=z;var N=function(e){var r=eo(t.state,e);h.fixedDirection=r.fixedDirection,h.fixedOffset=r.fixedOffset,h.fixedPosition=r.fixedPosition,ta&&ta.setFixedPosition(e)},q=function(e){var r,n,i,o,a,s=(n=(r=t.state).allMatrix,i=r.is3d,o=r.width,a=r.height,{fixedPosition:eN(n,[o/2*(1+e[0]),a/2*(1+e[1])],i?4:3),fixedDirection:e,fixedOffset:[0,0]});h.fixedDirection=s.fixedDirection,h.fixedOffset=s.fixedOffset,h.fixedPosition=s.fixedPosition,ta&&ta.setFixedDirection(e)},Y=v,W=m;if(D||E||y){var X=S||0;h.beforeInfo={origin:F.beforeOrigin,prevDeg:X,defaultDeg:X,prevSnapDeg:0,startDist:0},h.afterInfo=b(b({},h.beforeInfo),{origin:F.origin}),h.absoluteInfo=b(b({},h.beforeInfo),{origin:F.origin,startValue:X})}else{var L=null===(g=e.inputEvent)||void 0===g?void 0:g.target;if(L){var j=A[L.getAttribute("data-direction")||""];if(j){h.isControl=!0,h.isAroundControl=(0,o.nB)(L,eT("around-control")),h.controlDirection=j;var V,U,K,Z,$,Q,J,te=L.getAttribute("data-resolve");te&&(h.resolveAble=te),Y=(d=x(tt((V=R.rootMatrix,U=R.renderPoses,K=G,Z=16===V.length?4:3,$=U.map(function(t){return eN(V,t,Z)}),Q=K.left,J=K.top,$.map(function(t){return[t[0]+Q,t[1]+J]})),j),2))[0],W=d[1]}}h.beforeInfo={origin:F.beforeOrigin},h.afterInfo={origin:F.origin},h.absoluteInfo={origin:F.origin,startValue:F.rotation};var ti=N;N=function(e){var r=R.is3d?4:3,n=x((0,a.tY)((0,a.$z)(B,r),e),2),i=n[0],o=n[1],s=(0,a.Di)(P,(0,a.ez)([i,o],r)),u=(0,a.Di)(k,(0,a.ez)([e[0],e[1]],r));ti(e);var l=R.posDelta;h.beforeInfo.origin=(0,a.Rd)(s,l),h.afterInfo.origin=(0,a.Rd)(u,l),h.absoluteInfo.origin=(0,a.Rd)(u,l),eu(t,h.beforeInfo,Y,W,G),eu(t,h.afterInfo,Y,W,G),eu(t,h.absoluteInfo,Y,W,G)},q=function(t){var e=tt([[0,0],[I,0],[0,_],[I,_]],t);N(e)}}h.startClientX=Y,h.startClientY=W,h.direction=O,h.beforeDirection=T,h.startValue=0,h.datas={},tn(t,e,"rotate");var to=!1,ta=!1;h.isControl&&h.resolveAble&&"resizable"===h.resolveAble&&(ta=es.dragControlStart(t,b(b({},new H("resizable").dragStart([0,0],e)),{parentPosition:h.controlPosition,parentFixedPosition:h.fixedPosition}))),ta||(to=en.dragStart(t,new H().dragStart([0,0],e))),N((i=(n=(r=t).props).groupable,s=n.svgOrigin,l=(u=r.getState()).offsetWidth,c=u.offsetHeight,f=u.svg,p=u.transformOrigin,!i&&f&&s?rS(s,l,c):p));var ts=e6(t,e,b(b({set:function(t){h.startValue=t*Math.PI/180},setFixedDirection:q,setFixedPosition:N},tr(t,e)),{dragStart:to,resizeStart:ta}));return h.isRotate=!1!==rt(t,"onRotateStart",ts),R.snapRenderInfo={request:e.isRequest},!!h.isRotate&&ts},dragControl:function(t,e){var r,n,i,s,u,l,c,f,p,d,g,h,v,m=e.datas,S=e.clientDistX,y=e.clientDistY,E=e.parentRotate,D=e.parentFlag,R=e.isPinch,C=e.groupDelta,M=e.resolveMatrix,z=m.beforeDirection,O=m.beforeInfo,T=m.afterInfo,w=m.absoluteInfo,G=m.isRotate,P=m.startValue,B=m.rect,k=m.startClientX,I=m.startClientY;if(G){V(t,e,"rotate");var _=z*X(e.datas.beforeTransform,[50,50],100,100).direction,F=t.props.parentMoveable,A=0,N=0,q=0,Y=180/Math.PI*P,H=w.startValue,L=!1,j=k+S,K=I+y;if(!D&&"parentDist"in e){var Z=e.parentDist;f=Z,d=Z,h=Z}else R||D?(f=el(E,z,O),d=el(E,_,T),h=el(E,_,w)):(f=ec(j,K,z,O),d=ec(j,K,_,T),h=ec(j,K,_,w),L=!0);if(rt(t,"onBeforeRotate",e6(t,e,{beforeRotation:p=Y+f,rotation:g=Y+d,absoluteRotation:v=H+h,setRotation:function(t){f=d=t-Y,h=d}},!0)),A=(u=x(ef(t,B,O,f,Y,L),3))[0],f=u[1],p=u[2],N=(l=x(ef(t,B,T,d,Y,L),3))[0],d=l[1],g=l[2],q=(c=x(ef(t,B,w,h,H,L),3))[0],h=c[1],v=c[2],q||N||A||F||M){var $=U(m,"rotate(".concat(g,"deg)"),"rotate(".concat(d,"deg)"));M&&(m.fixedPosition=tf(t,m.targetAllTransform,m.fixedDirection,m.fixedOffset,m));var Q=(r=d,n=m.fixedDirection,i=m.fixedPosition,s=m.fixedOffset,tp(t,"rotate(".concat(r,"deg)"),n,i,s,m)),J=(0,a.Rd)((0,a.tY)(C||[0,0],Q),m.prevInverseDist||[0,0]);m.prevInverseDist=Q,m.requestValue=null;var tt=tc(t,$,J,R,e),te=tt,tr=(0,o.l$)([j,K],w.startAbsoluteOrigin)-w.startDist,tn=void 0;if("resizable"===m.resolveAble){var ti=es.dragControl(t,b(b({},W(e,t.state,[e.deltaX,e.deltaY],!!R,!1,"resizable")),{resolveMatrix:!0,parentDistance:tr}));ti&&(tn=ti,te=e8(te,ti,e))}var to=e6(t,e,b(b({delta:N,dist:d,rotate:g,rotation:g,beforeDist:f,beforeDelta:A,beforeRotate:p,beforeRotation:p,absoluteDist:h,absoluteDelta:q,absoluteRotate:v,absoluteRotation:v,isPinch:!!R,resize:tn},tt),te));return rt(t,"onRotate",to),to}}},dragControlEnd:function(t,e){var r=e.datas;if(r.isRotate){r.isRotate=!1;var n=e7(t,e,{});return rt(t,"onRotateEnd",n),n}},dragGroupControlCondition:ep,dragGroupControlStart:function(t,e){var r=e.datas,n=t.state,i=n.left,o=n.top,s=n.beforeOrigin,u=this.dragControlStart(t,e);if(!u)return!1;u.set(r.beforeDirection*t.rotation);var l=ty(t,this,"dragControlStart",e,function(t,e){var r=t.state,n=r.left,u=r.top,l=r.beforeOrigin,c=(0,a.tY)((0,a.Rd)([n,u],[i,o]),(0,a.Rd)(l,s));return e.datas.startGroupClient=c,e.datas.groupClient=c,b(b({},e),{parentRotate:0})}),c=b(b({},u),{targets:t.props.targets,events:l});return r.isRotate=!1!==rt(t,"onRotateGroupStart",c),!!r.isRotate&&u},dragGroupControl:function(t,e){var r=e.datas;if(r.isRotate){e9(t,"onBeforeRotate",function(r){rt(t,"onBeforeRotateGroup",e6(t,e,b(b({},r),{targets:t.props.targets}),!0))});var n=this.dragControl(t,e);if(n){var i=r.beforeDirection,o=n.beforeDist,s=o/180*Math.PI,u=ty(t,this,"dragControl",e,function(t,e){var r=e.datas.startGroupClient,n=x(e.datas.groupClient,2),u=n[0],l=n[1],c=x((0,a.e$)(r,s*i),2),f=c[0],p=c[1];return e.datas.groupClient=[f,p],b(b({},e),{parentRotate:o,groupDelta:[f-u,p-l]})});t.rotation=i*n.beforeRotation;var l=b({targets:t.props.targets,events:u,set:function(e){t.rotation=e},setGroupRotation:function(e){t.rotation=e}},n);return rt(t,"onRotateGroup",l),l}}},dragGroupControlEnd:function(t,e){var r=e.isDrag;if(e.datas.isRotate){this.dragControlEnd(t,e);var n=ty(t,this,"dragControlEnd",e),i=e7(t,e,{targets:t.props.targets,events:n});return rt(t,"onRotateGroupEnd",i),r}},request:function(t){var e={},r=0,n=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-n),{datas:e,parentDist:r}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},{name:"scrollable",canPinch:!0,props:["scrollable","scrollContainer","scrollThreshold","scrollThrottleTime","getScrollPosition","scrollOptions"],events:["scroll","scrollGroup"],dragRelation:"strong",dragStart:function(t,e){var r=t.props,n=r.scrollContainer,i=void 0===n?t.getContainer():n,o=r.scrollOptions,a=new l.A,s=rh(i,!0);e.datas.dragScroll=a,t.state.dragScroll=a;var u=e.isControl?"controlGesto":"targetGesto",c=e.targets;a.on("scroll",function(r){var n=e6(t,e,{scrollContainer:r.container,direction:r.direction});c&&(n.targets=c),rt(t,c?"onScrollGroup":"onScroll",n)}).on("move",function(e){var r=e.offsetX,n=e.offsetY,i=e.inputEvent;t[u].scrollBy(r,n,i.inputEvent,!1)}).on("scrollDrag",function(e){(0,e.next)(t[u].getCurrentEvent())}),a.dragStart(e,b({container:s},o))},checkScroll:function(t,e){var r=e.datas.dragScroll;if(r){var n=t.props,i=n.scrollContainer,o=void 0===i?t.getContainer():i,a=n.scrollThreshold,s=n.scrollThrottleTime,u=n.getScrollPosition,l=void 0===u?rq:u,c=n.scrollOptions;return r.drag(e,b({container:o,threshold:void 0===a?0:a,throttleTime:void 0===s?0:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}},c)),!0}},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,b(b({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,b(b({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,b(b({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,b(b({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,b(b({},e),{targets:t.props.targets,isControl:!0}))},dragGroupControl:function(t,e){return this.drag(t,b(b({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,b(b({},e),{targets:t.props.targets}))},unset:function(t){var e,r=t.state;null===(e=r.dragScroll)||void 0===e||e.dragEnd(),r.dragScroll=null}},rW,rN,{name:"originDraggable",props:["originDraggable","originRelative"],events:["dragOriginStart","dragOrigin","dragOriginEnd"],css:[":host[data-able-origindraggable] .control.origin {\npointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:(0,o.nB)(e.inputEvent.target,eT("origin"))},dragControlStart:function(t,e){var r=e.datas;j(t,e);var n=e6(t,e,{dragStart:en.dragStart(t,new H().dragStart([0,0],e))}),i=rt(t,"onDragOriginStart",n);return(r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,!1===i)?(r.isDragOrigin=!1,!1):n},dragControl:function(t,e){var r=e.datas,n=e.isPinch,i=e.isRequest;if(!r.isDragOrigin)return!1;var o=x($(e),2),s=o[0],u=o[1],l=t.state,c=l.width,f=l.height,p=l.offsetMatrix,d=l.targetMatrix,g=l.is3d,h=t.props.originRelative,v=void 0===h||h,m=g?4:3,S=[s,u];if(i){var y=e.distOrigin;(y[0]||y[1])&&(S=y)}var E=(0,a.tY)(r.startOrigin,S),D=(0,a.tY)(r.startTargetOrigin,S),R=(0,a.Rd)(S,r.prevOrigin),C=te(p,d,E,m),M=t.getRect(),z=eY(eq(C,c,f,m)),O=[M.left-z.left,M.top-z.top];r.prevOrigin=S;var T=[rf(D[0],c,v),rf(D[1],f,v)].join(" "),w=en.drag(t,W(e,t.state,O,!!n,!1)),G=e6(t,e,b(b({width:c,height:f,origin:E,dist:S,delta:R,transformOrigin:T,drag:w},e5({transformOrigin:T,transform:w.transform},e)),{afterTransform:w.transform}));return rt(t,"onDragOrigin",G),G},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(rt(t,"onDragOriginEnd",e7(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){var r=this.dragControl(t,e);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var e={},r=t.getRect(),n=0,i=0,o=r.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?n=t.x-r.left:"deltaX"in t&&(n+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:n,distY:i,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},{name:"clippable",props:["clippable","defaultClipPath","customClipPath","keepRatio","clipRelative","clipArea","dragWithClip","clipTargetBounds","clipVerticalGuidelines","clipHorizontalGuidelines","clipSnapThreshold"],events:["clipStart","clip","clipEnd"],css:[".control.clip-control {\nbackground: #6d6;\ncursor: pointer;\n}\n.control.clip-control.clip-radius {\nbackground: #d66;\n}\n.line.clip-line {\nbackground: #6e6;\ncursor: move;\nz-index: 1;\n}\n.clip-area {\nposition: absolute;\ntop: 0;\nleft: 0;\n}\n.clip-ellipse {\nposition: absolute;\ncursor: move;\nborder: 1px solid #6d6;\nborder: var(--zoompx) solid #6d6;\nborder-radius: 50%;\ntransform-origin: 0px 0px;\n}",":host {\n--bounds-color: #d66;\n}",".guideline {\npointer-events: none;\nz-index: 2;\n}",".line.guideline.bounds {\nbackground: #d66;\nbackground: var(--bounds-color);\n}"],render:function(t,e){var r=t.props,n=r.customClipPath,i=r.defaultClipPath,s=r.clipArea,u=r.zoom,l=r.groupable,c=t.getState(),f=c.target,p=c.width,d=c.height,g=c.allMatrix,h=c.is3d,v=c.left,m=c.top,b=c.pos1,y=c.pos2,E=c.pos3,D=c.pos4,R=c.clipPathState,C=c.snapBoundInfos,M=c.rotation;if(!f||l)return[];var z=r3(f,p,d,i||"inset",R||n);if(!z)return[];var O=h?4:3,T=z.type,w=z.poses.map(function(t){var e=eN(g,t.pos,O);return[e[0]-v,e[1]-m]}),G=[],P=[],B="rect"===T,k="inset"===T,I="polygon"===T;if(B||k||I){var _=k?w.slice(0,8):w;P=_.map(function(t,r){var n=0===r?_[_.length-1]:_[r-1],i=(0,o.Mu)(n,t),a=eH(n,t);return e.createElement("div",{key:"clipLine".concat(r),className:eT("line","clip-line","snap-control"),"data-clip-index":r,style:{width:"".concat(a,"px"),transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(i,"rad) scaleY(").concat(u,")")}})})}if(G=w.map(function(t,r){return e.createElement("div",{key:"clipControl".concat(r),className:eT("control","clip-control","snap-control"),"data-clip-index":r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(M,"rad) scale(").concat(u,")")}})}),k&&G.push.apply(G,S([],x(w.slice(8).map(function(t,r){return e.createElement("div",{key:"clipRadiusControl".concat(r),className:eT("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+r,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(M,"rad) scale(").concat(u,")")}})})),!1)),"circle"===T||"ellipse"===T){var F=z.left,A=z.top,N=z.radiusX,q=z.radiusY,Y=x((0,a.Rd)(eN(g,[F,A],O),eN(g,[0,0],O)),2),W=Y[0],H=Y[1],X="none";if(!s){for(var L=Math.max(10,N/5,q/5),j=[],V=0;V<=L;++V){var U=2*Math.PI/L*V;j.push([N+(N-u)*Math.cos(U),q+(q-u)*Math.sin(U)])}j.push([N,-2]),j.push([-2,-2]),j.push([-2,2*q+2]),j.push([2*N+2,2*q+2]),j.push([2*N+2,-2]),j.push([N,-2]),X="polygon(".concat(j.map(function(t){return"".concat(t[0],"px ").concat(t[1],"px")}).join(", "),")")}G.push(e.createElement("div",{key:"clipEllipse",className:eT("clip-ellipse","snap-control"),style:{width:"".concat(2*N,"px"),height:"".concat(2*q,"px"),clipPath:X,transform:"translate(".concat(-v+W,"px, ").concat(-m+H,"px) ").concat(eF(g))}}))}if(s){var K=eY(S([b,y,E,D],x(w),!1)),Z=K.width,$=K.height,Q=K.left,J=K.top;if(I||B||k){var j=k?w.slice(0,8):w;G.push(e.createElement("div",{key:"clipArea",className:eT("clip-area","snap-control"),style:{width:"".concat(Z,"px"),height:"".concat($,"px"),transform:"translate(".concat(Q,"px, ").concat(J,"px)"),clipPath:"polygon(".concat(j.map(function(t){return"".concat(t[0]-Q,"px ").concat(t[1]-J,"px")}).join(", "),")")}}))}}return C&&["vertical","horizontal"].forEach(function(t){var r=C[t],n="horizontal"===t;r.isSnap&&P.push.apply(P,S([],x(r.snap.posInfos.map(function(r,i){var o=r.pos;return tC(e,"",(0,a.Rd)(eN(g,n?[0,o]:[o,0],O),[v,m]),(0,a.Rd)(eN(g,n?[p,o]:[o,d],O),[v,m]),u,"clip".concat(t,"snap").concat(i),"guideline")})),!1)),r.isBound&&P.push.apply(P,S([],x(r.bounds.map(function(r,i){var o=r.pos;return tC(e,"",(0,a.Rd)(eN(g,n?[0,o]:[o,0],O),[v,m]),(0,a.Rd)(eN(g,n?[p,o]:[o,d],O),[v,m]),u,"clip".concat(t,"bounds").concat(i),"guideline","bounds","bold")})),!1))}),S(S([],x(G),!1),x(P),!1)},dragControlCondition:function(t,e){return e.inputEvent&&(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,e){var r=t.props.dragWithClip;return void 0!==r&&!r&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,b(b({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var r=t.state,n=t.props,i=n.defaultClipPath,o=n.customClipPath,a=r.target,s=r.width,u=r.height,l=e.inputEvent?e.inputEvent.target:null,c=l&&l.getAttribute("class")||"",f=e.datas,p=r3(a,s,u,i||"inset",o);if(!p)return!1;var d=p.clipText;return!1===rt(t,"onClipStart",e6(t,e,{clipType:p.type,clipStyle:d,poses:p.poses.map(function(t){return t.pos})}))?(f.isClipStart=!1,!1):(f.isControl=c&&c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.clipIndex=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,r.clipPathState=d,j(t,e),!0)},dragControl:function(t,e){var r,n,i,s=e.datas,u=e.originalDatas,l=e.isDragTarget;if(!s.isClipStart)return!1;var c=s.isControl,f=s.isLine,p=s.isArea,d=s.clipIndex,g=s.clipPath;if(!g)return!1;var h=ej(t.props,"clippable"),v=h.keepRatio,m=0,y=0,E=u.draggable,D=$(e);l&&E?(m=(r=x(E.prevBeforeDist,2))[0],y=r[1]):(m=(n=x(D,2))[0],y=n[1]);var R=[m,y],C=t.state,M=C.width,z=C.height,O=g.type,T=g.poses,w=g.splitter,G=T.map(function(t){return t.pos});p||c||f||(m=-m,y=-y);var P=!c||"nesw"===T[d].direction,B="inset"===O||"rect"===O,k=T.map(function(){return[0,0]});if(c&&!P){var I=T[d],_=I.horizontal,F=I.vertical;k=function(t,e,r,n,i){var o=t[e],a=o.direction,s=o.sub,u=t.map(function(){return[0,0]}),l=a?a.split(""):[];if(n&&e<8){var c=l.filter(function(t){return"w"===t||"e"===t}),f=l.filter(function(t){return"n"===t||"s"===t}),p=c[0],d=f[0];u[e]=r;var g=x(r2(t),2),h=g[0],v=g[1],m=h&&v?h/v:0;if(m&&i){var b=t[(e+4)%8].pos,S=[0,0];a.indexOf("w")>-1?S[0]=-1:a.indexOf("e")>-1&&(S[0]=1),a.indexOf("n")>-1?S[1]=-1:a.indexOf("s")>-1&&(S[1]=1);var y=rb([h,v],r,m,S,!0),E=h+y[0],D=v+y[1],R=b[1],C=b[1],M=b[0],z=b[0];-1===S[0]?M=z-E:1===S[0]?z=M+E:(M-=E/2,z+=E/2),-1===S[1]?R=C-D:C=1===S[1]?R+D:(R=C-D/2)+D;var O=r1(R,z,C,M);t.forEach(function(t,e){u[e][0]=O[e].pos[0]-t.pos[0],u[e][1]=O[e].pos[1]-t.pos[1]})}else t.forEach(function(t,e){var n=t.direction;n&&(n.indexOf(p)>-1&&(u[e][0]=r[0]),n.indexOf(d)>-1&&(u[e][1]=r[1]))}),p&&(u[1][0]=r[0]/2,u[5][0]=r[0]/2),d&&(u[3][1]=r[1]/2,u[7][1]=r[1]/2)}else a&&!s?l.forEach(function(e){var n="n"===e||"s"===e;t.forEach(function(t,i){var o=t.direction,a=t.horizontal,s=t.vertical;o&&-1!==o.indexOf(e)&&(u[i]=[n||!a?0:r[0],n&&s?r[1]:0])})}):u[e]=r;return u}(T,d,[m*rD(_),y*rD(F)],B,v)}else P&&(k=G.map(function(){return[m,y]}));var A=G.map(function(t,e){return(0,a.tY)(t,k[e])}),N=S([],x(A),!1);C.snapBoundInfos=null;var q="circle"===g.type,Y="ellipse"===g.type;if(q||Y){var W=eY(A),H=rD(W.bottom-W.top),X=rD(Y?W.right-W.left:H),L=A[0][1]+H,j=A[0][0]-X,V=A[0][0]+X;q&&(N.push([V,W.bottom]),k.push([1,0])),N.push([W.left,L]),k.push([0,1]),N.push([j,W.bottom]),k.push([1,0])}var U=eS((h.clipHorizontalGuidelines||[]).map(function(t){return(0,o.jc)("".concat(t),z)}),(h.clipVerticalGuidelines||[]).map(function(t){return(0,o.jc)("".concat(t),M)}),M,z),K=[],Z=[];if(q||Y)K=[N[4][0],N[2][0]],Z=[N[1][1],N[3][1]];else if(B){var Q=[N[0],N[2],N[4],N[6]],J=[k[0],k[2],k[4],k[6]];K=Q.filter(function(t,e){return J[e][0]}).map(function(t){return t[0]}),Z=Q.filter(function(t,e){return J[e][1]}).map(function(t){return t[1]})}else K=N.filter(function(t,e){return k[e][0]}).map(function(t){return t[0]}),Z=N.filter(function(t,e){return k[e][1]}).map(function(t){return t[1]});var tt=[0,0],te=ee(U,h.clipTargetBounds&&{left:0,top:0,right:M,bottom:z},K,Z,5,5),tr=te.horizontal,tn=te.vertical,ti=tr.offset,to=tn.offset;if(tr.isBound&&(tt[1]+=ti),tn.isBound&&(tt[0]+=to),(Y||q)&&0===k[0][0]&&0===k[0][1]){var W=eY(A),ta=W.bottom-W.top,ts=Y?W.right-W.left:ta,tu=tn.isBound?rD(to):0===tn.snapIndex?-to:to,tl=tr.isBound?rD(ti):0===tr.snapIndex?-ti:ti;ts-=tu,ta-=tl,q&&(ts=ta=tQ(tn,tr)>0?ta:ts);var tc=N[0];N[1][1]=tc[1]-ta,N[2][0]=tc[0]+ts,N[3][1]=tc[1]+ta,N[4][0]=tc[0]-ts}else if(B&&v&&c){var tf=x(r2(T),2),tp=tf[0],td=tf[1],tg=tp&&td?tp/td:0,th=T[d].direction||"",tv=N[1][1],L=N[5][1],j=N[7][0],V=N[3][0];rD(ti)<=rD(to)?ti=rE(ti)*rD(to)/tg:to=rE(to)*rD(ti)*tg,th.indexOf("w")>-1?j-=to:th.indexOf("e")>-1?V-=to:(j+=to/2,V-=to/2),th.indexOf("n")>-1?tv-=ti:th.indexOf("s")>-1?L-=ti:(tv+=ti/2,L-=ti/2);var tm=r1(tv,V,L,j);N.forEach(function(t,e){var r;r=x(tm[e].pos,2),t[0]=r[0],t[1]=r[1]})}else N.forEach(function(t,e){var r=k[e];r[0]&&(t[0]-=to),r[1]&&(t[1]-=ti)});var tb=r0(t,g,A),tx="".concat(O,"(").concat(tb.join(w),")");if(C.clipPathState=tx,q||Y)K=[N[4][0],N[2][0]],Z=[N[1][1],N[3][1]];else if(B){var Q=[N[0],N[2],N[4],N[6]];K=Q.map(function(t){return t[0]}),Z=Q.map(function(t){return t[1]})}else K=N.map(function(t){return t[0]}),Z=N.map(function(t){return t[1]});if(C.snapBoundInfos=ee(U,h.clipTargetBounds&&{left:0,top:0,right:M,bottom:z},K,Z,1,1),E){var tS=C.is3d,ty=C.allMatrix,tE=tt;l&&(tE=[R[0]+tt[0]-D[0],R[1]+tt[1]-D[1]]),E.deltaOffset=(0,a.lw)(ty,[tE[0],tE[1],0,0],tS?4:3)}return rt(t,"onClip",e6(t,e,b({clipEventType:"changed",clipType:O,poses:A,clipStyle:tx,clipStyles:tb,distX:m,distY:y},e5(((i={})["rect"===O?"clip":"clipPath"]=tx,i),e)))),!0},dragControlEnd:function(t,e){this.unset(t);var r=e.isDrag,n=e.datas,i=e.isDouble,o=n.isLine,a=n.isClipStart,s=n.isControl;return!!a&&(rt(t,"onClipEnd",e7(t,e,{})),i&&(s?function(t,e){var r=e.datas,n=r.clipPath,i=r.clipIndex,o=n.type,a=n.poses,s=n.splitter,u=a.map(function(t){return t.pos}),l=u.length;if("polygon"===o)a.splice(i,1),u.splice(i,1);else if("inset"!==o||i<8||(function(t,e,r,n,i){void 0===i&&(i=e.length);var o=rZ(t.slice(8)),a=o.horizontalRange,s=o.verticalRange,u=r-8,l=0;if(0===u)l=i;else if(u>0&&u<a[1])l=a[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),e.splice(r,l)}(a,u,i,8,l),l===a.length))return;var c=r0(t,n,u),f="".concat(o,"(").concat(c.join(s),")");rt(t,"onClip",e6(t,e,b({clipEventType:"removed",clipType:o,poses:u,clipStyles:c,clipStyle:f,distX:0,distY:0},e5({clipPath:f},e))))}(t,e):o&&function(t,e){var r=x(L(t,e),2),n=r[0],i=r[1],o=e.datas,a=o.clipPath,s=o.clipIndex,u=a.type,l=a.poses,c=a.splitter,f=l.map(function(t){return t.pos});if("polygon"===u)f.splice(s,0,[n,i]);else{if("inset"!==u)return;var p=rL.indexOf(s),d=rj.indexOf(s),g=l.length;if(function(t,e,r,n,i,o,a,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=rZ(t.slice(8)),p=f.horizontalRange,d=f.verticalRange;if(n>-1)for(var g=1===rV[n]?o-l:s-o,h=p[1];h<=n;++h){var v=1===rU[h]?c:u,m=0;if(n===h?m=o:0===h?m=l+g:-1===rV[h]&&(m=s-(e[8][0]-l)),t.splice(r+h,0,{horizontal:rV[h],vertical:0,pos:[m,v]}),e.splice(r+h,0,[m,v]),0===h)break}else if(i>-1){var b=1===rU[i]?a-c:u-a;if(0===p[1]&&0===d[1]){var x=[l+b,c];t.push({horizontal:1,vertical:0,pos:x}),e.push(x)}for(var S=d[0],h=d[1];h<=i;++h){var m=1===rV[h]?l:s,v=0;if(i===h?v=a:0===h?v=c+b:1===rU[h]?v=e[r+S][1]:-1===rU[h]&&(v=u-(e[r+S][1]-c)),t.push({horizontal:0,vertical:rU[h],pos:[m,v]}),e.push([m,v]),0===h)break}}}(l,f,8,p,d,n,i,f[4][0],f[4][1],f[0][0],f[0][1]),g===l.length)return}var h=r0(t,a,f),v="".concat(u,"(").concat(h.join(c),")");rt(t,"onClip",e6(t,e,b({clipEventType:"added",clipType:u,poses:f,clipStyles:h,clipStyle:v,distX:0,distY:0},e5({clipPath:v},e))))}(t,e)),i||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},{name:"roundable",props:["roundable","roundRelative","minRoundControls","maxRoundControls","roundClickable","roundPadding","isDisplayShadowRoundControls"],events:["roundStart","round","roundEnd","roundGroupStart","roundGroup","roundGroupEnd"],css:[".control.border-radius {\nbackground: #d66;\ncursor: pointer;\nz-index: 3;\n}",".control.border-radius.vertical {\nbackground: #d6d;\nz-index: 2;\n}",".control.border-radius.virtual {\nopacity: 0.5;\nz-index: 1;\n}",":host.round-line-clickable .line.direction {\ncursor: pointer;\n}"],className:function(t){var e=t.props.roundClickable;return!0===e||"line"===e?eT("round-line-clickable"):""},requestStyle:function(){return["borderRadius"]},requestChildStyle:function(){return["borderRadius"]},render:function(t,e){var r=t.getState(),n=r.target,i=r.width,o=r.height,s=r.allMatrix,u=r.is3d,l=r.left,c=r.top,f=r.borderRadiusState,p=t.props,d=p.minRoundControls,g=p.maxRoundControls,h=void 0===g?[4,4]:g,v=p.zoom,m=p.roundPadding,b=void 0===m?0:m,y=p.isDisplayShadowRoundControls,E=p.groupable;if(!n)return null;var D=f||r8(t),R=u?4:3,C=r4(D,i,o,void 0===d?[0,0]:d,!0);if(!C)return null;var M=0,z=0,O=E?[0,0]:[l,c];return C.map(function(t,r){var n=t.horizontal,i=t.vertical,o=t.direction||"",u=S([],x(t.pos),!1);z+=Math.abs(n),M+=Math.abs(i),n&&o.indexOf("n")>-1&&(u[1]-=b),i&&o.indexOf("w")>-1&&(u[0]-=b),n&&o.indexOf("s")>-1&&(u[1]+=b),i&&o.indexOf("e")>-1&&(u[0]+=b);var l=(0,a.Rd)(eN(s,u,R),O),c=t.vertical?M<=h[1]&&(y&&"horizontal"!==y||!t.virtual):z<=h[0]&&(y||!t.virtual);return e.createElement("div",{key:"borderRadiusControl".concat(r),className:eT("control","border-radius",t.vertical?"vertical":"",t.virtual?"virtual":""),"data-radius-index":r,style:{display:c?"block":"none",transform:"translate(".concat(l[0],"px, ").concat(l[1],"px) scale(").concat(v,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;var r=e.inputEvent.target.getAttribute("class")||"";return r.indexOf("border-radius")>-1||r.indexOf("moveable-line")>-1&&r.indexOf("moveable-direction")>-1},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragControlStart:function(t,e){var r=e.inputEvent,n=e.datas,i=r.target,o=i.getAttribute("class")||"",a=o.indexOf("border-radius")>-1,s=o.indexOf("moveable-line")>-1&&o.indexOf("moveable-direction")>-1,u=a?parseInt(i.getAttribute("data-radius-index"),10):-1,l=-1;if(s){var c=i.getAttribute("data-line-key")||"";c&&isNaN(l=parseInt(c.replace(/render-line-/g,""),10))&&(l=-1)}if(!a&&!s)return!1;var f=e6(t,e,{});if(!1===rt(t,"onRoundStart",f))return!1;n.lineIndex=l,n.controlIndex=u,n.isControl=a,n.isLine=s,j(t,e);var p=t.props,d=p.roundRelative,g=p.minRoundControls,h=t.state,v=h.width,m=h.height;n.isRound=!0,n.prevDist=[0,0];var b=r4(r8(t)||"",v,m,void 0===g?[0,0]:g,!0)||[];return n.controlPoses=b,h.borderRadiusState=rK(b,d,v,m).styles.join(" "),f},dragControl:function(t,e){var r=e.datas,n=r.controlPoses;if(!r.isRound||!r.isControl||!n.length)return!1;var i=r.controlIndex,o=x($(e),2),s=o[0],u=o[1],l=[s,u],c=(0,a.Rd)(l,r.prevDist),f=t.props.maxRoundControls,p=void 0===f?[4,4]:f,d=t.state,g=d.width,h=d.height,v=n[i],m=v.vertical,S=v.horizontal,y=n.map(function(t){var e=t.horizontal,r=t.vertical,n=[e*S*l[0],r*m*l[1]];if(e){if(1===p[0]||p[0]<4&&e!==S)return n}else if(0===p[1])return n[1]=r*S*l[0]/g*h,n;else if(m&&(1===p[1]||p[1]<4&&r!==m))return n;return[0,0]});y[i]=l;var E=n.map(function(t,e){return b(b({},t),{pos:(0,a.tY)(t.pos,y[e])})});return i<4?E.slice(0,i+1).forEach(function(t){t.virtual=!1}):E.slice(4,i+1).forEach(function(t){t.virtual=!1}),r.prevDist=[s,u],r5(t,e,l,c,E)},dragControlEnd:function(t,e){var r=t.state;r.borderRadiusState="";var n=e.datas,i=e.isDouble;if(!n.isRound)return!1;var o=n.isControl,a=n.controlIndex,s=n.isLine,u=n.lineIndex,l=n.controlPoses,c=l.filter(function(t){return t.virtual}).length,f=t.props.roundClickable,p=void 0===f||f;if(i&&p){if(o&&(!0===p||"control"===p))a<4?l.slice(a,4).forEach(function(t){t.virtual=!0}):l.slice(a).forEach(function(t){t.virtual=!0});else if(s&&(!0===p||"line"===p)){var d=x(L(t,e),2);!function(t,e,r,n){var i=t.filter(function(t){var e=t.virtual;return t.horizontal&&!e}).length,o=t.filter(function(t){var e=t.virtual;return t.vertical&&!e}).length,a=-1;if(0===e&&(0===i?a=0:1===i&&(a=1)),2===e&&(i<=2?a=2:i<=3&&(a=3)),3===e&&(0===o?a=4:o<4&&(a=7)),1===e&&(o<=1?a=5:o<=2&&(a=6)),-1!==a&&t[a].virtual){var s,u,l=t[a];s=t,(u=a)<4?s.slice(0,u+1).forEach(function(t){t.virtual=!1}):(s[0].virtual&&(s[0].virtual=!1),s.slice(4,u+1).forEach(function(t){t.virtual=!1})),a<4?l.pos[0]=r:l.pos[1]=n}}(l,u,d[0],d[1])}c!==l.filter(function(t){return t.virtual}).length&&r5(t,e,[0,0],[0,0],l)}var g=e7(t,e,{});return rt(t,"onRoundEnd",g),r.borderRadiusState="",g},dragGroupControlStart:function(t,e){var r=this.dragControlStart(t,e);if(!r)return!1;var n=t.moveables,i=t.props.targets,o=tx(t,"roundable",e),a=b({targets:t.props.targets,events:o.map(function(t,e){return b(b({},t),{target:i[e],moveable:n[e],currentTarget:n[e]})})},r);return rt(t,"onRoundGroupStart",a),r},dragGroupControl:function(t,e){var r=this.dragControl(t,e);if(!r)return!1;var n=t.moveables,i=t.props.targets,o=tx(t,"roundable",e),a=b({targets:t.props.targets,events:o.map(function(t,e){return b(b(b({},t),{target:i[e],moveable:n[e],currentTarget:n[e]}),e5({borderRadius:r.borderRadius},t))})},r);return rt(t,"onRoundGroup",a),a},dragGroupControlEnd:function(t,e){var r=t.moveables,n=t.props.targets,i=tx(t,"roundable",e);e9(t,"onRound",function(e){var o=b({targets:t.props.targets,events:i.map(function(t,i){return b(b(b({},t),{target:n[i],moveable:r[i],currentTarget:r[i]}),e5({borderRadius:e.borderRadius},t))})},e);rt(t,"onRoundGroup",o)});var o=this.dragControlEnd(t,e);if(!o)return!1;var a=b({targets:t.props.targets,events:i.map(function(t,e){var i;return b(b({},t),{target:n[e],moveable:r[e],currentTarget:r[e],lastEvent:null===(i=t.datas)||void 0===i?void 0:i.lastEvent})})},o);return rt(t,"onRoundGroupEnd",a),a},unset:function(t){t.state.borderRadiusState=""}},nu,np,nl,rA,r7];function ng(t,e){var r=x(t,3),n=r[0],i=r[1],o=r[2];return(n*e[0]+i*e[1]+o)/Math.sqrt(n*n+i*i)}function nh(t,e){var r=x(t,2),n=r[0],i=r[1];return-n*e[0]-i*e[1]}function nv(t,e){return Math.max.apply(Math,S([],x(t.map(function(t){var r=x(t,4),n=r[0],i=r[1],o=r[2],a=r[3];return Math.max(n[e],i[e],o[e],a[e])})),!1))}function nm(t,e){return Math.min.apply(Math,S([],x(t.map(function(t){var r=x(t,4),n=r[0],i=r[1],o=r[2],a=r[3];return Math.min(n[e],i[e],o[e],a[e])})),!1))}var nb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.differ=new u.A,e.moveables=[],e.transformOrigin="50% 50%",e.renderGroupRects=[],e._targetGroups=[],e._hasFirstTargets=!1,e}return m(e,t),e.prototype.componentDidMount=function(){t.prototype.componentDidMount.call(this)},e.prototype.checkUpdate=function(){this._isPropTargetChanged=!1,this.updateAbles()},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0);var n,i,s,u,l,f,p=this.state;if(this.controlBox&&!p.isPersisted){tm(!0),this.moveables.forEach(function(e){e.updateRect(t,!1,!1)});var d=this.props,g=this.moveables,h=p.target||d.target,v=g.map(function(t){return{finded:!1,manager:t}}),m=this.props.targetGroups||[],y=function t(e,r){var n=r.map(function(r){if((0,o.cy)(r)){var n=t(e,r),i=n.length;return i>1?n:1===i?n[0]:null}var a=(0,o.I6)(e,function(t){return t.manager.props.target===r});return a?(a.finded=!0,a.manager):null}).filter(Boolean);return 1===n.length&&(0,o.cy)(n[0])?n[0]:n}(v,m),E=d.useDefaultGroupRotate;y.push.apply(y,S([],x(v.filter(function(t){return!t.finded}).map(function(t){return t.manager})),!1));var D=[],R=!e||""!==t&&d.updateGroup,C=d.defaultGroupRotate||0;if(!this._hasFirstTargets){var M=null===(f=d.persistData)||void 0===f?void 0:f.rotation;null!=M&&(C=M)}var z=function t(e,r,n){var i=e.map(function(e){if(!(0,o.cy)(e))return{poses:e2(e.state),rotation:e.getRotation()};var n=t(e,r),i=[n.pos1,n.pos2,n.pos3,n.pos4];return D.push(n),{poses:i,rotation:n.rotation}}),a=i.map(function(t){return t.rotation}),s=0,u=a[0],l=a.every(function(t){return .1>Math.abs(u-t)});return s=R?!E&&l?u:C:E||n||!l?r:u,function(t,e){var r,n,i,a=[0,0],s=[0,0],u=[0,0],l=[0,0],f=0,p=0;if(!t.length)return{pos1:a,pos2:s,pos3:u,pos4:l,minX:0,minY:0,maxX:0,maxY:0,width:f,height:p,rotation:e};var d=(0,o.nF)(e,1e-7);if(d%90){var g=Math.tan(d/180*Math.PI),h=-1/g,v=[1e10,-1e10],m=[[0,0],[0,0]],b=[1e10,-1e10],S=[[0,0],[0,0]];t.forEach(function(t){t.forEach(function(t){var e=ng([-g,1,0],t),r=ng([-h,1,0],t);v[0]>e&&(m[0]=t,v[0]=e),v[1]<e&&(m[1]=t,v[1]=e),b[0]>r&&(S[0]=t,b[0]=r),b[1]<r&&(S[1]=t,b[1]=r)})});var y=x(m,2),E=y[0],D=y[1],R=x(S,2),C=R[0],M=R[1],z=[-g,1,nh([-g,1],E)],O=[-g,1,nh([-g,1],D)],T=[-h,1,nh([-h,1],C)],w=[-h,1,nh([-h,1],M)];a=(r=x([[z,T],[z,w],[O,T],[O,w]].map(function(t){var e=x(t,2),r=e[0],n=e[1];return(0,c.VM)(r,n)[0]}),4))[0],s=r[1],u=r[2],l=r[3],f=b[1]-b[0],p=v[1]-v[0]}else{var G=nm(t,0),P=nm(t,1),B=nv(t,0),k=nv(t,1);if(a=[G,P],s=[B,P],u=[G,k],l=[B,k],f=B-G,p=k-P,d%180){var I=[u,a,l,s];a=(n=x(I,4))[0],s=n[1],u=n[2],l=n[3],f=k-P,p=B-G}}if(d%360>180){var I=[l,u,s,a];a=(i=x(I,4))[0],s=i[1],u=i[2],l=i[3]}var _=(0,c.Qk)([a,s,u,l]);return{pos1:a,pos2:s,pos3:u,pos4:l,width:f,height:p,minX:_.minX,minY:_.minY,maxX:_.maxX,maxY:_.maxY,rotation:e}}(i.map(function(t){return t.poses}),s)}(y,this.rotation,!0);R&&(this.rotation=z.rotation,this.transformOrigin=d.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),this._targetGroups=m,this.renderGroupRects=D;var O=this.transformOrigin,T=this.rotation,w=this.scale,G=z.width,P=z.height,B=z.minX,k=z.minY,I=(n=[[0,0],[G,0],[0,P],[G,P]],i=rS(O,G,P),s=this.rotation/180*Math.PI,l=(u=n.map(function(t){return(0,a.Rd)(t,i)})).map(function(t){return(0,a.e$)(t,s)}),{prev:u,next:l,result:l.map(function(t){return(0,a.tY)(t,i)})}),_=(0,c.Qk)(I.result),F=_.minX,A=_.minY,N=" rotate(".concat(T,"deg)")+" scale(".concat(rE(w[0]),", ").concat(rE(w[1]),")"),q="translate(".concat(-F,"px, ").concat(-A,"px)").concat(N);this.controlBox.style.transform="translate3d(".concat(B,"px, ").concat(k,"px, ").concat(this.props.translateZ||0,")"),h.style.cssText+="left:0px;top:0px;"+"transform-origin:".concat(O,";")+"width:".concat(G,"px;height:").concat(P,"px;")+"transform: ".concat(q),p.width=G,p.height=P;var Y=this.getContainer(),W=no(this.controlBox,h,this.controlBox,this.getContainer(),this._rootContainer||Y,[]),H=[W.left,W.top],X=x(e2(W),4),L=X[0],j=X[1],V=X[2],U=X[3],K=(0,c.Qk)([L,j,V,U]),Z=[K.minX,K.minY],$=rE(w[0]*w[1]);W.pos1=(0,a.Rd)(L,Z),W.pos2=(0,a.Rd)(j,Z),W.pos3=(0,a.Rd)(V,Z),W.pos4=(0,a.Rd)(U,Z),W.left=B-W.left+Z[0],W.top=k-W.top+Z[1],W.origin=(0,a.Rd)((0,a.tY)(H,W.origin),Z),W.beforeOrigin=(0,a.Rd)((0,a.tY)(H,W.beforeOrigin),Z),W.originalBeforeOrigin=(0,a.tY)(H,W.originalBeforeOrigin),W.transformOrigin=(0,a.Rd)((0,a.tY)(H,W.transformOrigin),Z),h.style.transform="translate(".concat(-F-Z[0],"px, ").concat(-A-Z[1],"px)")+N,tm(),this.updateState(b(b({},W),{posDelta:Z,direction:$,beforeDirection:$}),r)}},e.prototype.getRect=function(){return b(b({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.triggerEvent=function(e,r,n){if(n||e.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,e,r);this._emitter.trigger(e,r)},e.prototype.getRequestChildStyles=function(){return this.getEnabledAbles().reduce(function(t,e){var r,n,i=null!==(n=null===(r=e.requestChildStyle)||void 0===r?void 0:r.call(e))&&void 0!==n?n:[];return S(S([],x(t),!1),x(i),!1)},[])},e.prototype.getMoveables=function(){return S([],x(this.moveables),!1)},e.prototype.updateAbles=function(){t.prototype.updateAbles.call(this,S(S([],x(this.props.ables),!1),[nu],!1),"Group")},e.prototype._updateTargets=function(){t.prototype._updateTargets.call(this),this._originalDragTarget=this.props.dragTarget||this.areaElement,this._dragTarget=rh(this._originalDragTarget,!0)},e.prototype._updateEvents=function(){var t=this.state,e=this.props,r=this._prevDragTarget,n=e.dragTarget||this.areaElement,i=e.targets,a=this.differ.update(i),s=a.added,u=a.changed,l=a.removed,c=s.length||l.length;(c||this._prevOriginalDragTarget!==this._originalDragTarget)&&(e4(this,!1),e4(this,!0),this.updateState({gestos:{}})),r!==n&&(t.target=null),t.target||(t.target=this.areaElement,this.controlBox.style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=ne(this,this._dragTarget,"Group")),this.controlGesto||(this.controlGesto=nr(this,"GroupControl")));var f=!rn(t.container,e.container);f&&(t.container=e.container),(f||c||this.transformOrigin!==(e.defaultGroupOrigin||"50% 50%")||u.length||i.length&&!function t(e,r){return e.length===r.length&&e.every(function(e,n){var i=r[n],a=(0,o.cy)(e),s=(0,o.cy)(i);return a&&s?t(e,i):!a&&!s&&e===i})}(this._targetGroups,e.targetGroups||[]))&&(this.updateRect(),this._hasFirstTargets=!0),this._isPropTargetChanged=!!c},e.prototype._updateObserver=function(){},e.defaultProps=b(b({},ns.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),e}(ns),nx=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.moveables=[],e}return m(e,t),e.prototype.render=function(){var t,e=this,r=this.props,n=r.cspNonce,o=r.cssStyled,a=r.persistData,s=r.targets||[],u=s.length,l=this.isUnmounted||!u,c=null!==(t=null==a?void 0:a.children)&&void 0!==t?t:[];return l&&!u&&c.length?s=c.map(function(){return null}):l||(c=[]),f.createElement(o,{cspNonce:n,ref:(0,i.KR)(this,"controlBox"),className:eT("control-box")},s.map(function(t,n){var o,a,s=null!==(a=null===(o=r.individualGroupableProps)||void 0===o?void 0:o.call(r,t,n))&&void 0!==a?a:{};return f.createElement(ns,b({key:"moveable"+n,ref:(0,i.DY)(e,"moveables",n)},r,s,{target:t,wrapperMoveable:e,isWrapperMounted:e.isMoveableMounted,persistData:c[n]}))}))},e.prototype.componentDidMount=function(){},e.prototype.componentDidUpdate=function(){},e.prototype.getTargets=function(){return this.props.targets},e.prototype.updateRect=function(t,e,r){void 0===r&&(r=!0),tm(!0),this.moveables.forEach(function(n){n.updateRect(t,e,r)}),tm()},e.prototype.getRect=function(){return b(b({},t.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.prototype.request=function(t,e,r){void 0===e&&(e={});var n=this.moveables.map(function(r){return r.request(t,b(b({},e),{isInstant:!1}),!1)}),i=r||e.isInstant,o={request:function(t){return n.forEach(function(e){return e.request(t)}),this},requestEnd:function(){return n.forEach(function(t){return t.requestEnd()}),this}};return i?o.request(e).requestEnd():o},e.prototype.dragStart=function(t,e){void 0===e&&(e=t.target);var r=e,n=(0,o.I6)(this.moveables,function(t){var e=t.getTargets()[0],n=t.getControlBoxElement(),i=t.getDragElement();return!!e&&!!i&&(i===r||i.contains(r)||i!==e&&e===r||e.contains(r)||n===r||n.contains(r))});return n&&n.dragStart(t,e),this},e.prototype.hitTest=function(){return 0},e.prototype.isInside=function(){return!1},e.prototype.isDragging=function(){return!1},e.prototype.getDragElement=function(){return null},e.prototype.getMoveables=function(){return S([],x(this.moveables),!1)},e.prototype.updateRenderPoses=function(){},e.prototype.checkUpdate=function(){},e.prototype.triggerEvent=function(){},e.prototype.updateAbles=function(){},e.prototype._updateEvents=function(){},e.prototype._updateObserver=function(){},e}(ns),nS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.defaultAbles=nd,e}(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.refTargets=[],e.selectorMap={},e._differ=new u.A,e._elementTargets=[],e._tmpRefTargets=[],e._tmpSelectorMap={},e._onChangeTargets=null,e}return m(e,t),e.makeStyled=function(){var t={};this.getTotalAbles().forEach(function(e){var r=e.css;r&&r.forEach(function(e){t[e]=!0})});var e=(0,o.xD)(t).join("\n");this.defaultStyled=(0,d.I4)("div",(0,i.SS)(k,_+e))},e.getTotalAbles=function(){return S([rY,nu,np,rA],x(this.defaultAbles),!1)},e.prototype.render=function(){var t,e=this.constructor;e.defaultStyled||e.makeStyled();var r=this.props,n=r.ables,a=r.props,s=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)0>e.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}(r,["ables","props"]),u=x(this._updateRefs(!0),2),l=u[0],c=u[1],p=function t(e,r){var n=[];return e.forEach(function(e){if(e){if((0,o.Kg)(e)){r[e]&&n.push.apply(n,S([],x(r[e]),!1));return}(0,o.cy)(e)?n.push.apply(n,S([],x(t(e,r)),!1)):n.push(e)}}),n}(l,c),d=p.length>1,g=S(S([],x(e.getTotalAbles()),!1),x(n||[]),!1),h=b(b(b({},s),a||{}),{ables:g,cssStyled:e.defaultStyled,customStyledMap:e.customStyledMap});this._elementTargets=p;var v=null,m=this.moveable,y=s.persistData;if((null==y?void 0:y.children)&&(d=!0),s.individualGroupable)return f.createElement(nx,b({key:"individual-group",ref:(0,i.KR)(this,"moveable")},h,{target:null,targets:p}));if(d){var E=function t(e,r){var n=[];return e.forEach(function(e){if(e){if((0,o.Kg)(e)){r[e]&&n.push.apply(n,S([],x(r[e]),!1));return}(0,o.cy)(e)?n.push(t(e,r)):n.push(e)}}),n}(l,c);if(m&&!m.props.groupable&&!m.props.individualGroupable){var D=m.props.target;D&&p.indexOf(D)>-1&&(v=b({},m.state))}return f.createElement(nb,b({key:"group",ref:(0,i.KR)(this,"moveable")},h,null!==(t=s.groupableProps)&&void 0!==t?t:{},{target:null,targets:p,targetGroups:E,firstRenderState:v}))}var R=p[0];if(m&&(m.props.groupable||m.props.individualGroupable)){var C=m.moveables||[],M=(0,o.I6)(C,function(t){return t.props.target===R});M&&(v=b({},M.state))}return f.createElement(ns,b({key:"single",ref:(0,i.KR)(this,"moveable")},h,{target:R,firstRenderState:v}))},e.prototype.componentDidMount=function(){this._checkChangeTargets()},e.prototype.componentDidUpdate=function(){this._checkChangeTargets()},e.prototype.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},e.prototype.getTargets=function(){var t,e;return null!==(e=null===(t=this.moveable)||void 0===t?void 0:t.getTargets())&&void 0!==e?e:[]},e.prototype.updateSelectors=function(){this.selectorMap={},this._updateRefs(),this.forceUpdate()},e.prototype.waitToChangeTarget=function(){var t,e=this;return this._onChangeTargets=function(){e._onChangeTargets=null,t()},new Promise(function(e){t=e})},e.prototype.waitToChangeTargets=function(){return this.waitToChangeTarget()},e.prototype.getManager=function(){return this.moveable},e.prototype.getMoveables=function(){return this.moveable.getMoveables()},e.prototype.getDragElement=function(){return this.moveable.getDragElement()},e.prototype._updateRefs=function(t){var e=this.refTargets,r=rv(this.props.target||this.props.targets),n="undefined"!=typeof document,i=function t(e,r){return e.length!==r.length||e.some(function(e,n){var i=r[n];return(!!e||!!i)&&e!=i&&(!((0,o.cy)(e)&&(0,o.cy)(i))||t(e,i))})}(e,r),a=this.selectorMap,s={};return this.refTargets.forEach(function t(e){(0,o.Kg)(e)?a[e]?s[e]=a[e]:n&&(i=!0,s[e]=[].slice.call(document.querySelectorAll(e))):(0,o.cy)(e)&&e.forEach(t)}),this._tmpRefTargets=r,this._tmpSelectorMap=s,[r,s,!t&&i]},e.prototype._checkChangeTargets=function(){this.refTargets=this._tmpRefTargets,this.selectorMap=this._tmpSelectorMap;var t,e,r,n=this._differ.update(this._elementTargets),i=n.added,o=n.removed;(i.length||o.length)&&(null===(e=(t=this.props).onChangeTargets)||void 0===e||e.call(t,{moveable:this.moveable,targets:this._elementTargets}),null===(r=this._onChangeTargets)||void 0===r||r.call(this));var a=x(this._updateRefs(),3),s=a[0],u=a[1],l=a[2];this.refTargets=s,this.selectorMap=u,l&&this.forceUpdate()},e.defaultAbles=[],e.customStyledMap={},e.defaultStyled=null,!function(t,e,r,n){var i,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,r,a):i(e,r))||a);o>3&&a&&Object.defineProperty(e,r,a)}([(0,i.RI)(Y)],e.prototype,"moveable",void 0),e}(f.PureComponent))}}]);